"use strict";(self.webpackChunkangular_firebase_cart=self.webpackChunkangular_firebase_cart||[]).push([[179],{2011:(Et,Pe,F)=>{F.d(Pe,{Dh:()=>Ee,GT:()=>le,cc:()=>Me,hO:()=>Qe,on:()=>z,pX:()=>oe,xv:()=>De});var g=F(4650),Y=F(1274),O=F(441);Et=F.hmd(Et);const ce=["ngOnDestroy"],oe=(Ue,Ce,Be,xe={})=>new Proxy(Ue,{get:(ve,Ie)=>Be.runOutsideAngular(()=>{var Ge;if(Ue[Ie])return!(null===(Ge=xe?.spy)||void 0===Ge)&&Ge.get&&xe.spy.get(Ie,Ue[Ie]),Ue[Ie];if(ce.indexOf(Ie)>-1)return()=>{};const Oe=Ce.toPromise().then(at=>{const re=at&&at[Ie];return"function"==typeof re?re.bind(at):re&&re.then?re.then(ht=>Be.run(()=>ht)):Be.run(()=>re)});return new Proxy(()=>{},{get:(at,re)=>Oe[re],apply:(at,re,ht)=>Oe.then(Je=>{var jt;const ut=Je&&Je(...ht);return!(null===(jt=xe?.spy)||void 0===jt)&&jt.apply&&xe.spy.apply(Ie,ht,ut),ut})})})}),le=(Ue,Ce)=>{Ce.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(xe=>{Object.defineProperty(Ue.prototype,xe,Object.getOwnPropertyDescriptor(Be.prototype||Be,xe))})})};class we{constructor(Ce){return Ce}}const Ee=new g.OlP("angularfire2.app.options"),De=new g.OlP("angularfire2.app.name");function z(Ue,Ce,Be){const ve="object"==typeof Be&&Be||{};ve.name=ve.name||"string"==typeof Be&&Be||"[DEFAULT]";const Ge=Y.Z.apps.filter(Oe=>Oe&&Oe.name===ve.name)[0]||Ce.runOutsideAngular(()=>Y.Z.initializeApp(Ue,ve));try{JSON.stringify(Ue)!==JSON.stringify(Ge.options)&&$("error",`${Ge.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(Ge)}const $=(Ue,...Ce)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Ue](...Ce)},K={provide:we,useFactory:z,deps:[Ee,g.R0b,[new g.FiY,De]]};let Qe=(()=>{class Ue{constructor(Be){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",g.q4F.full,Be.toString())}static initializeApp(Be,xe){return{ngModule:Ue,providers:[{provide:Ee,useValue:Be},{provide:De,useValue:xe}]}}}return Ue.\u0275fac=function(Be){return new(Be||Ue)(g.LFG(g.Lbi))},Ue.\u0275mod=g.oAB({type:Ue}),Ue.\u0275inj=g.cJS({providers:[K]}),Ue})();function Me(Ue,Ce,Be,xe,ve){const[,Ie,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===Ue)||[];if(Ie)return function Dt(Ue,Ce){try{return Ue.toString()===Ce.toString()}catch{return Ue===Ce}}(ve,Ge)||(de("error",`${Ce} was already initialized on the ${Be} Firebase App with different settings.${Ke?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:ve,was:Ge})),Ie;{const Oe=xe();return globalThis.\u0275AngularfireInstanceCache.push([Ue,Oe,ve]),Oe}}const Ke=!!Et.hot,de=(Ue,...Ce)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Ue](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},441:(Et,Pe,F)=>{F.d(Pe,{q4:()=>Us,iC:()=>Pd,fc:()=>gf,HU:()=>Nd,vb:()=>Zn,JM:()=>Qu});var g=F(4650),Y=F(8140),O=F(5861),oe=(F(7212),F(5578));function Fc(){return fu.apply(this,arguments)}function fu(){return(fu=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}function ef(){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function vs(){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}F(1617),F(9357);var nl=F(4408),Ba=F(7565);const hf=new class Gu extends Ba.v{}(class Sd extends nl.o{constructor(D,S){super(D,S),this.scheduler=D,this.work=S}schedule(D,S=0){return S>0?super.schedule(D,S):(this.delay=S,this.state=D,this.scheduler.flush(this),this)}execute(D,S){return S>0||this.closed?super.execute(D,S):this._execute(D,S)}requestAsyncId(D,S,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(D,S,P):(D.flush(this),0)}});var rl=F(4986),Ad=F(576),xd=F(4482),zu=F(5403),Bs=F(4671),qu=F(5363),Wu=F(9468);const Us=new g.GfV("7.6.1"),or="__angularfire_symbol__analyticsIsSupportedValue",il="__angularfire_symbol__analyticsIsSupported",Md="__angularfire_symbol__remoteConfigIsSupportedValue",sl="__angularfire_symbol__remoteConfigIsSupported",Ku="__angularfire_symbol__messagingIsSupportedValue",ol="__angularfire_symbol__messagingIsSupported";function Qu(w,D,S){if(D){if(1===D.length)return D[0];const q=D.filter(ue=>ue.app===S);if(1===q.length)return q[0]}return S.container.getProvider(w).getImmediate({optional:!0})}globalThis[il]||(globalThis[il]=vs().then(w=>globalThis[or]=w).catch(()=>globalThis[or]=!1)),globalThis[ol]||(globalThis[ol]=ef().then(w=>globalThis[Ku]=w).catch(()=>globalThis[Ku]=!1)),globalThis[sl]||(globalThis[sl]=Fc().then(w=>globalThis[Md]=w).catch(()=>globalThis[Md]=!1));const Zn=(w,D)=>{const S=D?[D]:(0,Y.C6)(),P=[];return S.forEach(U=>{U.container.getProvider(w).instances.forEach(ue=>{P.includes(ue)||P.push(ue)})}),P};function go(){}class ar{constructor(D,S=hf){this.zone=D,this.delegate=S}now(){return this.delegate.now()}schedule(D,S,P){const U=this.zone;return this.delegate.schedule(function(ue){U.runGuarded(()=>{D.apply(this,[ue])})},S,P)}}class Rd{constructor(D){this.zone=D,this.task=null}call(D,S){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",go,{},go,go)),S.pipe(function Ua(w,D,S){const P=(0,Ad.m)(w)||D||S?{next:w,error:D,complete:S}:w;return P?(0,xd.e)((U,q)=>{var ue;null===(ue=P.subscribe)||void 0===ue||ue.call(P);let He=!0;U.subscribe((0,zu.x)(q,Fe=>{var qe;null===(qe=P.next)||void 0===qe||qe.call(P,Fe),q.next(Fe)},()=>{var Fe;He=!1,null===(Fe=P.complete)||void 0===Fe||Fe.call(P),q.complete()},Fe=>{var qe;He=!1,null===(qe=P.error)||void 0===qe||qe.call(P,Fe),q.error(Fe)},()=>{var Fe,qe;He&&(null===(Fe=P.unsubscribe)||void 0===Fe||Fe.call(P)),null===(qe=P.finalize)||void 0===qe||qe.call(P)}))}):Bs.y}({next:P,complete:P,error:P})).subscribe(D).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Nd=(()=>{class w{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new ar(Zone.current)),this.insideAngular=S.run(()=>new ar(Zone.current,rl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(S){return new(S||w)(g.LFG(g.R0b))},w.\u0275prov=g.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Di(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function gf(w){return w.pipe((0,qu.Q)(Di().outsideAngular))}function Pd(w){return Di(),function ul(w){return function(S){return(S=S.lift(new Rd(w.ngZone))).pipe((0,Wu.R)(w.outsideAngular),(0,qu.Q)(w.insideAngular))}}(Di())(w)}},5578:(Et,Pe,F)=>{F.d(Pe,{$s:()=>Oi,BH:()=>Ie,G6:()=>Pi,L:()=>De,LL:()=>se,Pz:()=>ve,Sg:()=>Ge,UG:()=>re,US:()=>le,ZB:()=>K,ZR:()=>ne,aH:()=>xe,b$:()=>jt,eu:()=>Ro,hl:()=>zi,jU:()=>ht,m9:()=>Br,ne:()=>tn,pd:()=>qi,r3:()=>Ht,ru:()=>Je,tV:()=>z,uI:()=>at,vZ:()=>it,w1:()=>xs,xO:()=>wr,xb:()=>jn,z$:()=>Oe,zI:()=>ee,zd:()=>Lr});const ce=function(V){const L=[];let G=0;for(let me=0;me<V.length;me++){let X=V.charCodeAt(me);X<128?L[G++]=X:X<2048?(L[G++]=X>>6|192,L[G++]=63&X|128):55296==(64512&X)&&me+1<V.length&&56320==(64512&V.charCodeAt(me+1))?(X=65536+((1023&X)<<10)+(1023&V.charCodeAt(++me)),L[G++]=X>>18|240,L[G++]=X>>12&63|128,L[G++]=X>>6&63|128,L[G++]=63&X|128):(L[G++]=X>>12|224,L[G++]=X>>6&63|128,L[G++]=63&X|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,L){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,me=[];for(let X=0;X<V.length;X+=3){const Le=V[X],Ct=X+1<V.length,Kt=Ct?V[X+1]:0,Ln=X+2<V.length,bn=Ln?V[X+2]:0;let Sr=(15&Kt)<<2|bn>>6,Fi=63&bn;Ln||(Fi=64,Ct||(Sr=64)),me.push(G[Le>>2],G[(3&Le)<<4|Kt>>4],G[Sr],G[Fi])}return me.join("")},encodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(V):this.encodeByteArray(ce(V),L)},decodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(V):function(V){const L=[];let G=0,me=0;for(;G<V.length;){const X=V[G++];if(X<128)L[me++]=String.fromCharCode(X);else if(X>191&&X<224){const Le=V[G++];L[me++]=String.fromCharCode((31&X)<<6|63&Le)}else if(X>239&&X<365){const Ln=((7&X)<<18|(63&V[G++])<<12|(63&V[G++])<<6|63&V[G++])-65536;L[me++]=String.fromCharCode(55296+(Ln>>10)),L[me++]=String.fromCharCode(56320+(1023&Ln))}else{const Le=V[G++],Ct=V[G++];L[me++]=String.fromCharCode((15&X)<<12|(63&Le)<<6|63&Ct)}}return L.join("")}(this.decodeStringToByteArray(V,L))},decodeStringToByteArray(V,L){this.init_();const G=L?this.charToByteMapWebSafe_:this.charToByteMap_,me=[];for(let X=0;X<V.length;){const Le=G[V.charAt(X++)],Kt=X<V.length?G[V.charAt(X)]:0;++X;const bn=X<V.length?G[V.charAt(X)]:64;++X;const Gt=X<V.length?G[V.charAt(X)]:64;if(++X,null==Le||null==Kt||null==bn||null==Gt)throw new we;me.push(Le<<2|Kt>>4),64!==bn&&(me.push(Kt<<4&240|bn>>2),64!==Gt&&me.push(bn<<6&192|Gt))}return me},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const De=function(V){return function(V){const L=ce(V);return le.encodeByteArray(L,!0)}(V).replace(/\./g,"")},z=function(V){try{return le.decodeString(V,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function K(V,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return L}for(const G in L)!L.hasOwnProperty(G)||!Qe(G)||(V[G]=K(V[G],L[G]));return V}function Qe(V){return"__proto__"!==V}const Ue=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=V&&z(V[1]);return L&&JSON.parse(L)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},xe=()=>{var V;return null===(V=Ue())||void 0===V?void 0:V.config},ve=V=>{var L;return null===(L=Ue())||void 0===L?void 0:L[`_${V}`]};class Ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,G)=>{this.resolve=L,this.reject=G})}wrapCallback(L){return(G,me)=>{G?this.reject(G):this.resolve(me),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(G):L(G,me))}}}function Ge(V,L){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const me=L||"demo-project",X=V.iat||0,Le=V.sub||V.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${me}`,aud:me,iat:X,exp:X+3600,auth_time:X,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},V);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(Ct)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function at(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function re(){var V;const L=null===(V=Ue())||void 0===V?void 0:V.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ht(){return"object"==typeof self&&self.self===self}function Je(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xs(){const V=Oe();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Pi(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zi(){try{return"object"==typeof indexedDB}catch{return!1}}function Ro(){return new Promise((V,L)=>{try{let G=!0;const me="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(me);X.onsuccess=()=>{X.result.close(),G||self.indexedDB.deleteDatabase(me),V(!0)},X.onupgradeneeded=()=>{G=!1},X.onerror=()=>{var Le;L((null===(Le=X.error)||void 0===Le?void 0:Le.message)||"")}}catch(G){L(G)}})}function ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor(L,G,me){super(G),this.code=L,this.customData=me,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(L,G,me){this.service=L,this.serviceName=G,this.errors=me}create(L,...G){const me=G[0]||{},X=`${this.service}/${L}`,Le=this.errors[L],Ct=Le?function Te(V,L){return V.replace(ye,(G,me)=>{const X=L[me];return null!=X?String(X):`<${me}?>`})}(Le,me):"Error";return new ne(X,`${this.serviceName}: ${Ct} (${X}).`,me)}}const ye=/\{\$([^}]+)}/g;function Ht(V,L){return Object.prototype.hasOwnProperty.call(V,L)}function jn(V){for(const L in V)if(Object.prototype.hasOwnProperty.call(V,L))return!1;return!0}function it(V,L){if(V===L)return!0;const G=Object.keys(V),me=Object.keys(L);for(const X of G){if(!me.includes(X))return!1;const Le=V[X],Ct=L[X];if(Xr(Le)&&Xr(Ct)){if(!it(Le,Ct))return!1}else if(Le!==Ct)return!1}for(const X of me)if(!G.includes(X))return!1;return!0}function Xr(V){return null!==V&&"object"==typeof V}function wr(V){const L=[];for(const[G,me]of Object.entries(V))Array.isArray(me)?me.forEach(X=>{L.push(encodeURIComponent(G)+"="+encodeURIComponent(X))}):L.push(encodeURIComponent(G)+"="+encodeURIComponent(me));return L.length?"&"+L.join("&"):""}function Lr(V){const L={};return V.replace(/^\?/,"").split("&").forEach(me=>{if(me){const[X,Le]=me.split("=");L[decodeURIComponent(X)]=decodeURIComponent(Le)}}),L}function qi(V){const L=V.indexOf("?");if(!L)return"";const G=V.indexOf("#",L);return V.substring(L,G>0?G:void 0)}function tn(V,L){const G=new rt(V,L);return G.subscribe.bind(G)}class rt{constructor(L,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{L(this)}).catch(me=>{this.error(me)})}next(L){this.forEachObserver(G=>{G.next(L)})}error(L){this.forEachObserver(G=>{G.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,G,me){let X;if(void 0===L&&void 0===G&&void 0===me)throw new Error("Missing Observer.");X=function gi(V,L){if("object"!=typeof V||null===V)return!1;for(const G of L)if(G in V&&"function"==typeof V[G])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:G,complete:me},void 0===X.next&&(X.next=Jr),void 0===X.error&&(X.error=Jr),void 0===X.complete&&(X.complete=Jr);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,L)}sendOne(L,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{G(this.observers[L])}catch(me){typeof console<"u"&&console.error&&console.error(me)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jr(){}const nn=1e3,mi=2,Rn=144e5,$n=.5;function Oi(V,L=nn,G=mi){const me=L*Math.pow(G,V),X=Math.round($n*me*(Math.random()-.5)*2);return Math.min(Rn,me+X)}function Br(V){return V&&V._delegate?V._delegate:V}},477:(Et,Pe,F)=>{var g=F(4650);let Y=null;function O(){return Y}class oe{}const le=new g.OlP("DocumentToken");class Gn{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Po=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Gn(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const y=r.get(u);r.move(y,l),Nn(y,o)}});for(let o=0,u=r.length;o<u;o++){const y=r.get(o).context;y.index=o,y.count=u,y.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Nn(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Nn(n,e){n.context.$implicit=e.item}let ii=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const od="server";function ls(n){return n===od}class _d extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hc extends _d{static makeCurrent(){!function ce(n){Y||(Y=n)}(new Hc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ho(){return $o=$o||document.querySelector("base"),$o?$o.getAttribute("href"):null}();return null==t?null:function Jp(n){gs=gs||document.createElement("a"),gs.setAttribute("href",n);const e=gs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$o=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function No(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let gs,$o=null;const Jh=new g.OlP("TRANSITION_ID"),py=[{provide:g.ip1,useFactory:function xu(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Jh,le,g.zs3],multi:!0}];let no=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ro=new g.OlP("EventManagerPlugins");let Mu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ro),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Go{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Gc=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const o=this.usageCount;let u=o.get(t)??0;return u+=r,u>0?o.set(t,u):o.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),io=(()=>{class n extends Gc{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const o=this.doc.createElement("style");o.textContent=r,t.appendChild(o);const u=this.styleRef.get(r);u?u.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const so={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ru=/%COMP%/g,Na=new g.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function wd(n,e){return e.flat(100).map(t=>t.replace(Ru,n))}function uo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vi=(()=>{class n{constructor(t,r,o,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new ms(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof Id?o.applyToHost(t):o instanceof fn&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.eventManager,y=this.sharedStylesHost,I=this.removeStylesOnCompDestory;switch(r.encapsulation){case g.ifc.Emulated:u=new Id(l,y,r,this.appId,I);break;case g.ifc.ShadowDom:return new Ed(l,y,t,r);default:u=new fn(l,y,r,I)}u.onDestroy=()=>o.delete(r.id),o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Mu),g.LFG(io),g.LFG(g.AFp),g.LFG(Na))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class ms{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(so[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(qo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=so[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=so[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,uo(r)):this.eventManager.addEventListener(e,t,uo(r))}}function qo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ed extends ms{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=wd(o.id,o.styles);for(const l of u){const y=document.createElement("style");y.textContent=l,this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class fn extends ms{constructor(e,t,r,o,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=wd(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Id extends fn{constructor(e,t,r,o,u){const l=o+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function ef(n){return"_ngcontent-%COMP%".replace(Ru,n)}(l),this.hostAttr=function Pu(n){return"_nghost-%COMP%".replace(Ru,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ou=(()=>{class n extends Go{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const qc=["alt","control","meta","shift"],ku={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let rr=(()=>{class n extends Go{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",y=r.indexOf("code");if(y>-1&&(r.splice(y,1),l="code."),qc.forEach(C=>{const x=r.indexOf(C);x>-1&&(r.splice(x,1),l+=C+".")}),l+=u,0!=r.length||0===u.length)return null;const I={};return I.domEventName=o,I.fullKey=l,I}static matchEventFullKeyCode(t,r){let o=ku[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),qc.forEach(l=>{l!==o&&(0,Fu[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Kc=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function ys(){Hc.makeCurrent()},multi:!0},{provide:le,useFactory:function Lu(){return(0,g.RDi)(document),document},deps:[]}]),ka=new g.OlP(""),Wo=[{provide:g.rWj,useClass:class Ra{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const y=function(I){l=l||I,u--,0==u&&r(l)};o.forEach(function(I){I.whenStable(y)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Fs=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function tf(){return new g.qLn},deps:[]},{provide:ro,useClass:Ou,multi:!0,deps:[le,g.R0b,g.Lbi]},{provide:ro,useClass:rr,multi:!0,deps:[le]},{provide:Vi,useClass:Vi,deps:[Mu,io,g.AFp,Na]},{provide:g.FYo,useExisting:Vi},{provide:Gc,useExisting:io},{provide:io,useClass:io,deps:[le]},{provide:Mu,useClass:Mu,deps:[ro,g.R0b]},{provide:class pu{},useClass:no,deps:[]},[]];let Ko=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Jh,useExisting:g.AFp},py]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ka,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Fs,...Wo],imports:[ii,g.hGG]}),n})();typeof window<"u"&&window;var Wn=F(2011),Ii=F(8306),_s=F(7669),Un=F(8996);function Kn(...n){const e=(0,_s.yG)(n);return(0,Un.D)(n,e)}var Jc=F(4986),Ui=F(4482),Hr=F(5403),sr=F(4004),si=F(8421);function Mr(n,e){return(0,Ui.e)((t,r)=>{let o=null,u=0,l=!1;const y=()=>l&&!o&&r.complete();t.subscribe((0,Hr.x)(r,I=>{o?.unsubscribe();let C=0;const x=u++;(0,si.Xf)(n(I,x)).subscribe(o=(0,Hr.x)(r,N=>r.next(e?e(I,N,x,C++):N),()=>{o=null,y()}))},()=>{l=!0,y()}))})}var pn=F(441),ge=(F(6101),F(5861)),Mt=(F(7212),F(5578));F(1617),F(8140);var qa=F(9357);class Mg{constructor(){return(0,pn.vb)("app-check")}}typeof window<"u"&&window;var uc=F(1274);function r_(n){const e=function SD(n){return new Ii.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function $u(n,e=Jc.z){return(0,Ui.e)((t,r)=>{let o=null,u=null,l=null;const y=()=>{if(o){o.unsubscribe(),o=null;const C=u;u=null,r.next(C)}};function I(){const C=l+n,x=e.now();if(x<C)return o=this.schedule(void 0,C-x),void r.add(o);y()}t.subscribe((0,Hr.x)(r,C=>{u=C,l=e.now(),o||(o=e.schedule(I,n),r.add(o))},()=>{y(),r.complete()},void 0,()=>{u=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,sr.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function vl(n){return{getDownloadURL:()=>Kn(void 0).pipe(pn.fc,Mr(()=>n.getDownloadURL()),pn.iC),getMetadata:()=>Kn(void 0).pipe(pn.fc,Mr(()=>n.getMetadata()),pn.iC),delete:()=>(0,Un.D)(n.delete()),child:e=>vl(n.child(e)),updateMetadata:e=>(0,Un.D)(n.updateMetadata(e)),put:(e,t)=>r_(n.put(e,t)),putString:(e,t,r)=>r_(n.putString(e,t,r)),list:e=>(0,Un.D)(n.list(e)),listAll:()=>(0,Un.D)(n.listAll())}}const AD=new g.OlP("angularfire2.storageBucket"),G0=new g.OlP("angularfire2.storage.maxUploadRetryTime"),xD=new g.OlP("angularfire2.storage.maxOperationRetryTime"),MD=new g.OlP("angularfire2.storage.use-emulator");let RD=(()=>{class n{constructor(t,r,o,u,l,y,I,C,x,N){const j=(0,Wn.on)(t,l,r);this.storage=(0,Wn.cc)(`${j.name}.storage.${o}`,"AngularFireStorage",j.name,()=>{const W=l.runOutsideAngular(()=>j.storage(o||void 0)),fe=x;return fe&&W.useEmulator(...fe),I&&W.setMaxUploadRetryTime(I),C&&W.setMaxOperationRetryTime(C),W},[I,C])}ref(t){return vl(this.storage.ref(t))}refFromURL(t){return vl(this.storage.refFromURL(t))}upload(t,r,o){return vl(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Wn.Dh),g.LFG(Wn.xv,8),g.LFG(AD,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(pn.HU),g.LFG(G0,8),g.LFG(xD,8),g.LFG(MD,8),g.LFG(Mg,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ND=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),z0=(()=>{class n{constructor(){uc.Z.registerVersion("angularfire",pn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[RD],imports:[ND]}),n})();var q0=F(7579),W0=F(6451),Of=F(5363),i_=F(6063);class OS extends q0.x{constructor(e=1/0,t=1/0,r=i_.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let y=0;for(let I=1;I<r.length&&r[I]<=l;I+=2)y=I;y&&r.splice(0,y+1)}}}var s_=F(3099);function K0(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,s_.B)({connector:()=>new OS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const wl=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ng(n,e){return(0,Ui.e)((t,r)=>{let o=0;t.subscribe((0,Hr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var PD=F(515);function kD(n=Pg){return(0,Ui.e)((e,t)=>{let r=!1;e.subscribe((0,Hr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Pg(){return new wl}var El=F(4671);var kf=F(576);function Og(n,e){return(0,kf.m)(e)?Mr(()=>n,e):Mr(()=>n)}var Yd=F(9468);const kg=new g.OlP("angularfire2.auth.use-emulator"),Fg=new g.OlP("angularfire2.auth.settings"),Lg=new g.OlP("angularfire2.auth.tenant-id"),a_=new g.OlP("angularfire2.auth.langugage-code"),Vg=new g.OlP("angularfire2.auth.use-device-language"),Q0=new g.OlP("angularfire.auth.persistence"),X0=(n,e,t,r,o,u,l,y)=>(0,Wn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const I=e.runOutsideAngular(()=>n.auth());if(t&&I.useEmulator(...t),r&&(I.tenantId=r),I.languageCode=o,u&&I.useDeviceLanguage(),l)for(const[C,x]of Object.entries(l))I.settings[C]=x;return y&&I.setPersistence(y),I},[t,r,o,u,l,y]);let Bg=(()=>{class n{constructor(t,r,o,u,l,y,I,C,x,N,j,W){const fe=new q0.x,Ne=Kn(void 0).pipe((0,Of.Q)(l.outsideAngular),Mr(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8463)))),(0,sr.U)(()=>(0,Wn.on)(t,u,r)),(0,sr.U)(Se=>X0(Se,u,y,C,x,N,I,j)),K0({bufferSize:1,refCount:!1}));if(ls(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Kn(null);else{Ne.pipe(function o_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ng((o,u)=>n(o,u,r)):El.y,function Z0(n){return n<=0?()=>PD.E:(0,Ui.e)((e,t)=>{let r=0;e.subscribe((0,Hr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}(1),t?function OD(n){return(0,Ui.e)((e,t)=>{let r=!1;e.subscribe((0,Hr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}(e):kD(()=>new wl))}()).subscribe();const dt=Ne.pipe(Mr(lt=>lt.getRedirectResult().then(Rt=>Rt,()=>null)),pn.iC,K0({bufferSize:1,refCount:!1})),_t=Ne.pipe(Mr(lt=>new Ii.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>lt.onAuthStateChanged(zt=>Rt.next(zt),zt=>Rt.error(zt),()=>Rt.complete()))})))),nt=Ne.pipe(Mr(lt=>new Ii.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>lt.onIdTokenChanged(zt=>Rt.next(zt),zt=>Rt.error(zt),()=>Rt.complete()))}))));this.authState=dt.pipe(Og(_t),(0,Yd.R)(l.outsideAngular),(0,Of.Q)(l.insideAngular)),this.user=dt.pipe(Og(nt),(0,Yd.R)(l.outsideAngular),(0,Of.Q)(l.insideAngular)),this.idToken=this.user.pipe(Mr(lt=>lt?(0,Un.D)(lt.getIdToken()):Kn(null))),this.idTokenResult=this.user.pipe(Mr(lt=>lt?(0,Un.D)(lt.getIdTokenResult()):Kn(null))),this.credential=(0,W0.T)(dt,fe,this.authState.pipe(Ng(lt=>!lt))).pipe((0,sr.U)(lt=>lt?.user?lt:null),(0,Yd.R)(l.outsideAngular),(0,Of.Q)(l.insideAngular))}return(0,Wn.pX)(this,Ne,u,{spy:{apply:(Se,dt,_t)=>{(Se.startsWith("signIn")||Se.startsWith("createUser"))&&_t.then(nt=>fe.next(nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Wn.Dh),g.LFG(Wn.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(pn.HU),g.LFG(kg,8),g.LFG(Fg,8),g.LFG(Lg,8),g.LFG(a_,8),g.LFG(Vg,8),g.LFG(Q0,8),g.LFG(Mg,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),FD=(()=>{class n{constructor(){uc.Z.registerVersion("angularfire",pn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Bg]}),n})();var J0=F(6131);function tw(...n){return function ew(){return(0,J0.J)(1)}()((0,Un.D)(n,(0,_s.yG)(n)))}function u_(...n){const e=(0,_s.yG)(n);return(0,Ui.e)((t,r)=>{(e?tw(n,t,e):tw(n,t)).subscribe(r)})}function $i(){return(0,Ui.e)((n,e)=>{let t,r=!1;n.subscribe((0,Hr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function c_(n,e){return(0,Ui.e)(function LD(n,e,t,r,o){return(u,l)=>{let y=t,I=e,C=0;u.subscribe((0,Hr.x)(l,x=>{const N=C++;I=y?n(I,x,N):(y=!0,x),r&&l.next(I)},o&&(()=>{y&&l.next(I),l.complete()})))}}(n,e,arguments.length>=2,!0))}function l_(n,e){return n===e}F(8463);var Xe,BD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Io={},Ug=Ug||{},Bt=BD||self;function jg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Il(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var d_="closure_uid_"+(1e9*Math.random()>>>0),jD=0;function $D(n,e,t){return n.call.apply(n.bind,arguments)}function HD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Pn(n,e,t){return(Pn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$D:HD).apply(null,arguments)}function Qd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function cc(){this.s=this.s,this.o=this.o}cc.prototype.s=!1,cc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function UD(n){Object.prototype.hasOwnProperty.call(n,d_)&&n[d_]||(n[d_]=++jD)}(this)},cc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function h_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function iw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(jg(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function Wr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Wr.prototype.h=function(){this.defaultPrevented=!0};var GD=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",()=>{},e),Bt.removeEventListener("test",()=>{},e)}catch{}return n}();function Ff(n){return/^[\s\xa0]*$/.test(n)}function Dl(){var n=Bt.navigator;return n&&(n=n.userAgent)?n:""}function Is(n){return-1!=Dl().indexOf(n)}function Xd(n){return Xd[" "](n),n}Xd[" "]=function(){};var Do,f_=Is("Opera"),Lf=Is("Trident")||Is("MSIE"),p_=Is("Edge"),$g=p_||Lf,g_=Is("Gecko")&&!(-1!=Dl().toLowerCase().indexOf("webkit")&&!Is("Edge"))&&!(Is("Trident")||Is("MSIE"))&&!Is("Edge"),sw=-1!=Dl().toLowerCase().indexOf("webkit")&&!Is("Edge");function Hg(){var n=Bt.document;return n?n.documentMode:void 0}e:{var Jd="",eh=function(){var n=Dl();return g_?/rv:([^\);]+)(\)|;)/.exec(n):p_?/Edge\/([\d\.]+)/.exec(n):Lf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sw?/WebKit\/(\S+)/.exec(n):f_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(eh&&(Jd=eh?eh[1]:""),Lf){var bl=Hg();if(null!=bl&&bl>parseFloat(Jd)){Do=String(bl);break e}}Do=Jd}var ow=Bt.document&&Lf&&(Hg()||parseInt(Do,10))||void 0;function Vf(n,e){if(Wr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(g_){e:{try{Xd(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Vf.$.h.call(this)}}var zD={2:"touch",3:"pen",4:"mouse"};Vf.prototype.h=function(){Vf.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wa="closure_listenable_"+(1e6*Math.random()|0),qD=0;function VS(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++qD,this.fa=this.ia=!1}function Gg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function __(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function aw(n){const e={};for(const t in n)e[t]=n[t];return e}const uw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cw(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<uw.length;u++)t=uw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function zg(n){this.src=n,this.g={},this.h=0}function qg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=rw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Gg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Bf(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}zg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Bf(n,e,r,o);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new VS(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var v_="closure_lm_"+(1e6*Math.random()|0),Uf={};function lw(n,e,t,r,o){if(r&&r.once)return hw(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)lw(n,e[u],t,r,o);return null}return t=mw(t),n&&n[Wa]?n.O(e,t,Il(r)?!!r.capture:!!r,o):dw(n,e,t,!1,r,o)}function dw(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Il(o)?!!o.capture:!!o,y=Wg(n);if(y||(n[v_]=y=new zg(n)),(t=y.add(e,t,r,l,u)).proxy)return t;if(r=function KD(){const e=gw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)GD||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(pw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hw(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)hw(n,e[u],t,r,o);return null}return t=mw(t),n&&n[Wa]?n.P(e,t,Il(r)?!!r.capture:!!r,o):dw(n,e,t,!0,r,o)}function fw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)fw(n,e[u],t,r,o);else r=Il(r)?!!r.capture:!!r,t=mw(t),n&&n[Wa]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Bf(u=n.g[e],t,r,o))&&(Gg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Wg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Bf(e,t,r,o)),(t=-1<n?e[n]:null)&&w_(t))}function w_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Wa])qg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(pw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Wg(e))?(qg(t,n),0==t.h&&(t.src=null,e[v_]=null)):Gg(n)}}}function pw(n){return n in Uf?Uf[n]:Uf[n]="on"+n}function gw(n,e){if(n.fa)n=!0;else{e=new Vf(e,this);var t=n.listener,r=n.la||n.src;n.ia&&w_(n),n=t.call(r,e)}return n}function Wg(n){return(n=n[v_])instanceof zg?n:null}var E_="__closure_events_fn_"+(1e9*Math.random()>>>0);function mw(n){return"function"==typeof n?n:(n[E_]||(n[E_]=function(e){return n.handleEvent(e)}),n[E_])}function Rr(){cc.call(this),this.i=new zg(this),this.S=this,this.J=null}function bi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Wr(e,n);else if(e instanceof Wr)e.target=e.target||n;else{var o=e;cw(e=new Wr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=Cl(l,r,!0,e)&&o}if(o=Cl(l=e.g=n,r,!0,e)&&o,o=Cl(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Cl(l=e.g=t[u],r,!1,e)&&o}function Cl(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var y=l.listener,I=l.la||l.src;l.ia&&qg(n.i,l),o=!1!==y.call(I,r)&&o}}return o&&!r.defaultPrevented}Rr.prototype[Wa]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){fw(this,n,e,t,r)},Rr.prototype.N=function(){if(Rr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Gg(t[r]);delete n.g[e],n.h--}}this.J=null},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var I_=Bt.JSON.stringify;class ZD{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function D_(){var n=$f;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class YD{constructor(){this.h=this.g=null}add(e,t){const r=bo.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var bo=new ZD(()=>new jf,n=>n.reset());class jf{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ci(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Tl(n){Bt.setTimeout(()=>{throw n},0)}let lc,Ti=!1,$f=new YD,Sl=()=>{const n=Bt.Promise.resolve(void 0);lc=()=>{n.then(th)}};var th=()=>{for(var n;n=D_();){try{n.h.call(n.g)}catch(t){Tl(t)}var e=bo;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ti=!1};function Ka(n,e){Rr.call(this),this.h=n||1,this.g=e||Bt,this.j=Pn(this.qb,this),this.l=Date.now()}function dc(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function hc(n,e,t){if("function"==typeof n)t&&(n=Pn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Pn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function Al(n){n.g=hc(()=>{n.g=null,n.i&&(n.i=!1,Al(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}(Xe=Ka.prototype).ga=!1,Xe.T=null,Xe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bi(this,"tick"),this.ga&&(dc(this),this.start()))}},Xe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.N=function(){Ka.$.N.call(this),dc(this),delete this.g};class nh extends cc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Al(this)}N(){super.N(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oa(n){cc.call(this),this.h=n,this.g={}}var xl=[];function b_(n,e,t,r){Array.isArray(t)||(t&&(xl[0]=t.toString()),t=xl);for(var o=0;o<t.length;o++){var u=lw(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function C_(n){__(n.g,function(e,t){this.g.hasOwnProperty(t)&&w_(e)},n),n.g={}}function Hf(){this.g=!0}function Ml(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ww(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return I_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}oa.prototype.N=function(){oa.$.N.call(this),C_(this)},oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hf.prototype.Ea=function(){this.g=!1},Hf.prototype.info=function(){};var fc={},Ew=null;function Kg(){return Ew=Ew||new Rr}function T_(n){Wr.call(this,fc.Ta,n)}function Gf(n){const e=Kg();bi(e,new T_(e))}function Iw(n,e){Wr.call(this,fc.STAT_EVENT,n),this.stat=e}function li(n){const e=Kg();bi(e,new Iw(e,n))}function Zg(n,e){Wr.call(this,fc.Ua,n),this.size=e}function zf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}fc.Ta="serverreachability",fc.STAT_EVENT="statevent",fc.Ua="timingevent";var Rl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qf={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yg(){}var Kf,Nl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qg(){Wr.call(this,"d")}function Xg(){Wr.call(this,"c")}function Zf(){}function rh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new oa(this),this.P=bw,this.V=new Ka(n=$g?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Jg}function Jg(){this.i=null,this.g="",this.h=!1}Zf.prototype.g=function(){return new XMLHttpRequest},Zf.prototype.i=function(){return{}},Kf=new Zf;var bw=45e3,S_={},Yf={};function em(n,e,t){n.L=1,n.v=sh(Si(e)),n.s=t,n.S=!0,A_(n,null)}function A_(n,e){n.G=Date.now(),Qf(n),n.A=Si(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),R_(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Jg,n.g=Kw(n.l,t?e:null,!n.s),0<n.O&&(n.M=new nh(Pn(n.Pa,n,n.g),n.O)),b_(n.U,n.g,"readystatechange",n.nb),e=n.I?aw(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Gf(),function yw(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",y=u.split("&"),I=0;I<y.length;I++){var C=y[I].split("=");if(1<C.length){var x=C[0];C=C[1];var N=x.split("_");l=2<=N.length&&"type"==N[1]?l+(x+"=")+C+"&":l+(x+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Cw(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Tw(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=QD(n,t),o==Yf){4==e&&(n.o=4,li(14),r=!1),Ml(n.j,n.m,null,"[Incomplete Response]");break}if(o==S_){n.o=4,li(15),Ml(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ml(n.j,n.m,o,null),nm(n,o)}Cw(n)&&o!=Yf&&o!=S_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,li(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),H_(e),e.M=!0,li(11))):(Ml(n.j,n.m,t,"[Invalid Chunked Response]"),pc(n),ih(n))}function QD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Yf:(t=Number(e.substring(t,r)),isNaN(t)?S_:(r+=1)+t>e.length?Yf:(e=e.slice(r,r+t),n.C=r+t,e))}function Qf(n){n.Y=Date.now()+n.P,tm(n,n.P)}function tm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zf(Pn(n.lb,n),e)}function Pl(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function ih(n){0==n.l.H||n.J||Gw(n.l,n)}function pc(n){Pl(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,dc(n.V),C_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function nm(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||P_(t.i,n)))if(!n.K&&P_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;dm(t),ip(t)}$_(t),li(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=zf(Pn(t.ib,t),6e3));if(1>=N_(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Fl(t,11)}else if((n.K||t.g==n)&&dm(t),!Ff(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const x=C[3];null!=x&&(t.ra=x,t.l.info("VER="+t.ra));const N=C[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const j=C[5];null!=j&&"number"==typeof j&&0<j&&(t.L=r=1.5*j,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const fe=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var u=r.i;u.g||-1==fe.indexOf("spdy")&&-1==fe.indexOf("quic")&&-1==fe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(om(u,u.h),u.h=null))}if(r.F){const Ne=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.Da=Ne,mn(r.I,r.F,Ne))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Ww(r,r.J?r.pa:null,r.Y),l.K){rb(r.i,l);var y=l,I=r.L;I&&y.setTimeout(I),y.B&&(Pl(y),Qf(y)),r.g=l}else $w(r);0<t.j.length&&sp(t)}else"stop"!=C[0]&&"close"!=C[0]||Fl(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Fl(t,7):lm(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}Gf()}catch{}}function x_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(jg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Aw(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(jg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Sw(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(jg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(Xe=rh.prototype).setTimeout=function(n){this.P=n},Xe.nb=function(n){n=n.target;const e=this.M;e&&3==ca(n)?e.l():this.Pa(n)},Xe.Pa=function(n){try{if(n==this.g)e:{const x=ca(this.g);var e=this.g.Ia();if(this.g.da(),!(3>x)&&(3!=x||$g||this.g&&(this.h.h||this.g.ja()||V_(this.g)))){this.J||4!=x||7==e||Gf(),Pl(this);var t=this.g.da();this.ca=t;t:if(Cw(this)){var r=V_(this.g);n="";var o=r.length,u=4==ca(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){pc(this),ih(this);var l="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function _w(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,x,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var y,I=this.g;if((y=I.g?I.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ff(y)){var C=y;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,li(12),pc(this),ih(this);break e}Ml(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nm(this,t)}this.S?(Tw(this,x,l),$g&&this.i&&3==x&&(b_(this.U,this.V,"tick",this.mb),this.V.start())):(Ml(this.j,this.m,l,null),nm(this,l)),4==x&&pc(this),this.i&&!this.J&&(4==x?Gw(this.l,this):(this.i=!1,Qf(this)))}else(function Bw(n){const e={};n=(n.g&&2<=ca(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Ff(n[r]))continue;var t=Ci(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function WD(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,li(12)):(this.o=0,li(13)),pc(this),ih(this)}}}catch{}},Xe.mb=function(){if(this.g){var n=ca(this.g),e=this.g.ja();this.C<e.length&&(Pl(this),Tw(this,n,e),this.i&&4!=n&&Qf(this))}},Xe.cancel=function(){this.J=!0,pc(this)},Xe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function vw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Gf(),li(17)),pc(this),this.o=2,ih(this)):tm(this,this.Y-n)};var M_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aa(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof aa){this.h=n.h,rm(this,n.j),this.s=n.s,this.g=n.g,im(this,n.m),this.l=n.l;var e=n.i,t=new Yn;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),sm(this,t),this.o=n.o}else n&&(e=String(n).match(M_))?(this.h=!1,rm(this,e[1]||"",!0),this.s=Xf(e[2]||""),this.g=Xf(e[3]||"",!0),im(this,e[4]),this.l=Xf(e[5]||"",!0),sm(this,e[6]||"",!0),this.o=Xf(e[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}function Si(n){return new aa(n)}function rm(n,e,t){n.j=t?Xf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function im(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function sm(n,e,t){e instanceof Yn?(n.i=e,function Pw(n,e){e&&!n.j&&(Za(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Rw(this,r),R_(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ol(e,Mw)),n.i=new Yn(e,n.h))}function mn(n,e,t){n.i.set(e,t)}function sh(n){return mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Xf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ol(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,BS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function BS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}aa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ol(e,XD,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ol(e,XD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ol(t,"/"==t.charAt(0)?eb:JD,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ol(t,tb)),n.join("")};var XD=/[#\/\?@]/g,JD=/[#\?:]/g,eb=/[#\?]/g,Mw=/[#\?@]/g,tb=/#/g;function Yn(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Za(n){n.g||(n.g=new Map,n.h=0,n.i&&function xw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Rw(n,e){Za(n),e=oh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Nw(n,e){return Za(n),e=oh(n,e),n.g.has(e)}function R_(n,e,t){Rw(n,e),0<t.length&&(n.i=null,n.g.set(oh(n,e),h_(t)),n.h+=t.length)}function oh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function kl(n){this.l=n||nb,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ka&&Bt.g.Ka()&&Bt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=Yn.prototype).add=function(n,e){Za(this),this.i=null,n=oh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){Za(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},Xe.ta=function(){Za(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},Xe.Z=function(n){Za(this);let e=[];if("string"==typeof n)Nw(this,n)&&(e=e.concat(this.g.get(oh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Xe.set=function(n,e){return Za(this),this.i=null,Nw(this,n=oh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var nb=10;function kw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function N_(n){return n.h?1:n.g?n.g.size:0}function P_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function om(n,e){n.g?n.g.add(e):n.h=e}function rb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function O_(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return h_(n.i)}kl.prototype.cancel=function(){if(this.i=O_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var n,k_=class{stringify(n){return Bt.JSON.stringify(n,void 0)}parse(n){return Bt.JSON.parse(n,void 0)}};function ua(){this.g=new k_}function ib(n,e,t){const r=t||"";try{x_(n,function(o,u){let l=o;Il(o)&&(l=I_(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Ds(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Hi(n){this.l=n.fc||null,this.j=n.ob||!1}function ts(n,e){Rr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=am,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hi.prototype.g=function(){return new ts(this.l,this.j)},Hi.prototype.i=(n={},function(){return n});var am=0;function F_(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Jf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ep(n)}function ep(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=ts.prototype).open=function(n,e){if(this.readyState!=am)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ep(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Bt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jf(this)),this.readyState=am},Xe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ep(this)),this.g&&(this.readyState=3,ep(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;F_(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Xe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Jf(this):ep(this),3==this.readyState&&F_(this)}},Xe.Za=function(n){this.g&&(this.response=this.responseText=n,Jf(this))},Xe.Ya=function(n){this.g&&(this.response=n,Jf(this))},Xe.ka=function(){this.g&&Jf(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")};var ob=Bt.JSON.parse;function ur(n){Rr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=um,this.L=this.M=!1}var um="",tp=/^https?$/i,ab=["POST","PUT"];function Lw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Vw(n),np(n)}function Vw(n){n.F||(n.F=!0,bi(n,"complete"),bi(n,"error"))}function L_(n){if(n.h&&typeof Ug<"u"&&(!n.C[1]||4!=ca(n)||2!=n.da()))if(n.v&&4==ca(n))hc(n.La,0,n);else if(bi(n,"readystatechange"),4==ca(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var o=String(n.I).match(M_)[1]||null;!o&&Bt.self&&Bt.self.location&&(o=Bt.self.location.protocol.slice(0,-1)),r=!tp.test(o?o.toLowerCase():"")}t=r}if(t)bi(n,"complete"),bi(n,"success");else{n.m=6;try{var u=2<ca(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",Vw(n)}}finally{np(n)}}}function np(n,e){if(n.g){rp(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||bi(n,"ready");try{t.onreadystatechange=r}catch{}}}function rp(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function ca(n){return n.g?n.g.readyState:0}function V_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case um:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function cm(n){let e="";return __(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ah(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=cm(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):mn(n,e,t))}function uh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function B_(n){this.Ga=0,this.j=[],this.l=new Hf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=uh("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=uh("baseRetryDelayMs",5e3,n),this.hb=uh("retryDelaySeedMs",1e4,n),this.eb=uh("forwardChannelMaxRetries",2,n),this.xa=uh("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new kl(n&&n.concurrentRequestLimit),this.Ja=new ua,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function lm(n){if(U_(n),3==n.H){var e=n.W++,t=Si(n.I);if(mn(t,"SID",n.K),mn(t,"RID",e),mn(t,"TYPE","terminate"),op(n,t),(e=new rh(n,n.l,e)).L=2,e.v=sh(Si(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon)try{t=Bt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Kw(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Qf(e)}qw(n)}function ip(n){n.g&&(H_(n),n.g.cancel(),n.g=null)}function U_(n){ip(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),dm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function sp(n){if(!kw(n.i)&&!n.m){n.m=!0;var e=n.Na;lc||Sl(),Ti||(lc(),Ti=!0),$f.add(e,n),n.C=0}}function j_(n,e){var t;t=e?e.m:n.W++;const r=Si(n.I);mn(r,"SID",n.K),mn(r,"RID",t),mn(r,"AID",n.V),op(n,r),n.o&&n.s&&ah(r,n.o,n.s),t=new rh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=jw(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),om(n.i,t),em(t,r,e)}function op(n,e){n.na&&__(n.na,function(t,r){mn(e,r,t)}),n.h&&x_({},function(t,r){mn(e,r,t)})}function jw(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Pn(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let y=!0;for(let I=0;I<t;I++){let C=o[I].g;const x=o[I].map;if(C-=u,0>C)u=Math.max(0,o[I].g-100),y=!1;else try{ib(x,l,"req"+C+"_")}catch{r&&r(x)}}if(y){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function $w(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;lc||Sl(),Ti||(lc(),Ti=!0),$f.add(e,n),n.A=0}}function $_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=zf(Pn(n.Ma,n),zw(n,n.A)),n.A++,0))}function H_(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Hw(n){n.g=new rh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Si(n.wa);mn(e,"RID","rpc"),mn(e,"SID",n.K),mn(e,"AID",n.V),mn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&mn(e,"TO",n.qa),mn(e,"TYPE","xmlhttp"),op(n,e),n.o&&n.s&&ah(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=sh(Si(e)),t.s=null,t.S=!0,A_(t,n)}function dm(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function Gw(n,e){var t=null;if(n.g==e){dm(n),H_(n),n.g=null;var r=2}else{if(!P_(n.i,e))return;t=e.F,rb(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;bi(r=Kg(),new Zg(r,t)),sp(n)}else $w(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function Uw(n,e){return!(N_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=zf(Pn(n.Na,n,e),zw(n,n.C)),n.C++,0)))}(n,e)||2==r&&$_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Fl(n,5);break;case 4:Fl(n,10);break;case 3:Fl(n,6);break;default:Fl(n,2)}}function zw(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Fl(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Pn(n.pb,n);t||(t=new aa("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||rm(t,"https"),sh(t)),function sb(n,e){const t=new Hf;if(Bt.Image){const r=new Image;r.onload=Qd(Ds,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Qd(Ds,t,r,"TestLoadImage: error",!1,e),r.onabort=Qd(Ds,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qd(Ds,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else li(2);n.H=0,n.h&&n.h.za(e),qw(n),U_(n)}function qw(n){if(n.H=0,n.ma=[],n.h){const e=O_(n.i);(0!=e.length||0!=n.j.length)&&(iw(n.ma,e),iw(n.ma,n.j),n.i.i.length=0,h_(n.j),n.j.length=0),n.h.ya()}}function Ww(n,e,t){var r=t instanceof aa?Si(t):new aa(t);if(""!=r.g)e&&(r.g=e+"."+r.g),im(r,r.m);else{var o=Bt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new aa(null);r&&rm(u,r),e&&(u.g=e),o&&im(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&mn(r,t,e),mn(r,"VER",n.ra),op(n,r),r}function Kw(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Ha&&!n.va?new Hi({ob:!0}):n.va)).Oa(n.J),e}function hm(){if(Lf&&!(10<=Number(ow)))throw Error("Environmental error: no available transport.")}function bs(n,e){Rr.call(this),this.g=new B_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Ff(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ff(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ll(this)}function Yw(n){Qg.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Qw(){Xg.call(this),this.status=1}function Ll(n){this.g=n}function Gs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function fm(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=u+((l=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function vn(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(Xe=ur.prototype).Oa=function(n){this.M=n},Xe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Kf.g(),this.C=function Dw(n){return n.h||(n.h=n.i())}(this.u?this.u:Kf),this.g.onreadystatechange=Pn(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Lw(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Bt.FormData&&n instanceof Bt.FormData,!(0<=rw(ab,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rp(this),0<this.B&&((this.L=function Fw(n){return Lf&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pn(this.ua,this)):this.A=hc(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Lw(this,u)}},Xe.ua=function(){typeof Ug<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bi(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,bi(this,"complete"),bi(this,"abort"),np(this))},Xe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),np(this,!0)),ur.$.N.call(this)},Xe.La=function(){this.s||(this.G||this.v||this.l?L_(this):this.kb())},Xe.kb=function(){L_(this)},Xe.isActive=function(){return!!this.g},Xe.da=function(){try{return 2<ca(this)?this.g.status:-1}catch{return-1}},Xe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Xe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ob(e)}},Xe.Ia=function(){return this.m},Xe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=B_.prototype).ra=8,Xe.H=1,Xe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new rh(this,this.l,n);let u=this.s;if(this.U&&(u?(u=aw(u),cw(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jw(this,o,e),mn(t=Si(this.I),"RID",n),mn(t,"CVER",22),this.F&&mn(t,"X-HTTP-Session-Id",this.F),op(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(cm(u)))+"&"+e:this.o&&ah(t,this.o,u)),om(this.i,o),this.bb&&mn(t,"TYPE","init"),this.P?(mn(t,"$req",e),mn(t,"SID","null"),o.aa=!0,em(o,t,null)):em(o,t,e),this.H=2}}else 3==this.H&&(n?j_(this,n):0==this.j.length||kw(this.i)||j_(this))},Xe.Ma=function(){if(this.u=null,Hw(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=zf(Pn(this.jb,this),n)}},Xe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,li(10),ip(this),Hw(this))},Xe.ib=function(){null!=this.v&&(this.v=null,ip(this),$_(this),li(19))},Xe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),li(2)):(this.l.info("Failed to ping google.com"),li(1))},Xe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Xe=function Zw(){}.prototype).Ba=function(){},Xe.Aa=function(){},Xe.za=function(){},Xe.ya=function(){},Xe.isActive=function(){return!0},Xe.Va=function(){},hm.prototype.g=function(n,e){return new bs(n,e)},bs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;li(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Ww(n,null,n.Y),sp(n)},bs.prototype.close=function(){lm(this.g)},bs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=I_(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&sp(e)},bs.prototype.N=function(){this.g.h=null,delete this.j,lm(this.g),delete this.g,bs.$.N.call(this)},Ll.prototype.Ba=function(){bi(this.g,"a")},Ll.prototype.Aa=function(n){bi(this.g,new Yw(n))},Ll.prototype.za=function(n){bi(this.g,new Qw)},Ll.prototype.ya=function(){bi(this.g,"b")},Gs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Gs.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)fm(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){fm(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){fm(this,r),o=0;break}}this.h=o,this.i+=e},Gs.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Jw={};function pm(n){return-128<=n&&128>n?function LS(n,e){var t=Jw;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new vn([0|e],0>e?-1:0)}):new vn([0|n],0>n?-1:0)}function Co(n){if(isNaN(n)||!isFinite(n))return Vl;if(0>n)return Ai(Co(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=gm;return new vn(e,0)}var gm=4294967296,Vl=pm(0),Ya=pm(1),eE=pm(16777216);function Qa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function di(n){return-1==n.h}function Ai(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new vn(t,~n.h).add(Ya)}function ch(n,e){return n.add(Ai(e))}function z_(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function lh(n,e){this.g=n,this.h=e}function ap(n,e){if(Qa(e))throw Error("division by zero");if(Qa(n))return new lh(Vl,Vl);if(di(n))return e=ap(Ai(n),e),new lh(Ai(e.g),Ai(e.h));if(di(e))return e=ap(n,Ai(e)),new lh(Ai(e.g),e.h);if(30<n.g.length){if(di(n)||di(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Ya,r=e;0>=r.X(n);)t=ub(t),r=ub(r);var o=wt(t,1),u=wt(r,1);for(r=wt(r,2),t=wt(t,2);!Qa(r);){var l=u.add(r);0>=l.X(n)&&(o=o.add(t),u=l),r=wt(r,1),t=wt(t,1)}return e=ch(n,o.R(e)),new lh(o,e)}for(o=Vl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Co(t)).R(e);di(l)||0<l.X(n);)l=(u=Co(t-=r)).R(e);Qa(u)&&(u=Ya),o=o.add(u),n=ch(n,l)}return new lh(o,n)}function ub(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new vn(t,n.h)}function wt(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new vn(o,n.h)}(Xe=vn.prototype).ea=function(){if(di(this))return-Ai(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:gm+r)*e,e*=gm}return n},Xe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Qa(this))return"0";if(di(this))return"-"+Ai(this).toString(n);for(var e=Co(Math.pow(n,6)),t=this,r="";;){var o=ap(t,e).g,u=((0<(t=ch(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Qa(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Xe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Xe.X=function(n){return di(n=ch(this,n))?-1:Qa(n)?0:1},Xe.abs=function(){return di(this)?Ai(this):this},Xe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),l=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=l>>>16,t[o]=(l&=65535)<<16|(u&=65535)}return new vn(t,-2147483648&t[t.length-1]?-1:0)},Xe.R=function(n){if(Qa(this)||Qa(n))return Vl;if(di(this))return di(n)?Ai(this).R(Ai(n)):Ai(Ai(this).R(n));if(di(n))return Ai(this.R(Ai(n)));if(0>this.X(eE)&&0>n.X(eE))return Co(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,l=65535&this.D(r),y=n.D(o)>>>16,I=65535&n.D(o);t[2*r+2*o]+=l*I,z_(t,2*r+2*o),t[2*r+2*o+1]+=u*I,z_(t,2*r+2*o+1),t[2*r+2*o+1]+=l*y,z_(t,2*r+2*o+1),t[2*r+2*o+2]+=u*y,z_(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new vn(t,0)},Xe.gb=function(n){return ap(this,n).h},Xe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new vn(t,this.h&n.h)},Xe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new vn(t,this.h|n.h)},Xe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new vn(t,this.h^n.h)},hm.prototype.createWebChannel=hm.prototype.g,bs.prototype.send=bs.prototype.u,bs.prototype.open=bs.prototype.m,bs.prototype.close=bs.prototype.close,Rl.NO_ERROR=0,Rl.TIMEOUT=8,Rl.HTTP_ERROR=6,qf.COMPLETE="complete",Yg.EventType=Nl,Nl.OPEN="a",Nl.CLOSE="b",Nl.ERROR="c",Nl.MESSAGE="d",Rr.prototype.listen=Rr.prototype.O,ur.prototype.listenOnce=ur.prototype.P,ur.prototype.getLastError=ur.prototype.Sa,ur.prototype.getLastErrorCode=ur.prototype.Ia,ur.prototype.getStatus=ur.prototype.da,ur.prototype.getResponseJson=ur.prototype.Wa,ur.prototype.getResponseText=ur.prototype.ja,ur.prototype.send=ur.prototype.ha,ur.prototype.setWithCredentials=ur.prototype.Oa,Gs.prototype.digest=Gs.prototype.l,Gs.prototype.reset=Gs.prototype.reset,Gs.prototype.update=Gs.prototype.j,vn.prototype.add=vn.prototype.add,vn.prototype.multiply=vn.prototype.R,vn.prototype.modulo=vn.prototype.gb,vn.prototype.compare=vn.prototype.X,vn.prototype.toNumber=vn.prototype.ea,vn.prototype.toString=vn.prototype.toString,vn.prototype.getBits=vn.prototype.D,vn.fromNumber=Co,vn.fromString=function G_(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ai(G_(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Co(Math.pow(e,8)),r=Vl,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+u),e);8>u?(u=Co(Math.pow(e,u)),r=r.R(u).add(Co(l))):r=(r=r.R(t)).add(Co(l))}return r};var cb=Io.createWebChannelTransport=function(){return new hm},lb=Io.getStatEventTarget=function(){return Kg()},q_=Io.ErrorCode=Rl,dh=Io.EventType=qf,db=Io.Event=fc,up=Io.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},mm=Io.FetchXmlHttpFactory=Hi,On=Io.WebChannel=Yg,US=Io.XhrIo=ur,tE=Io.Md5=Gs,Bl=Io.Integer=vn;class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let Ul="9.23.0";const Xa=new qa.Yd("@firebase/firestore");function ym(){return Xa.logLevel}function Ve(n,...e){if(Xa.logLevel<=qa.in.DEBUG){const t=e.map(W_);Xa.debug(`Firestore (${Ul}): ${n}`,...t)}}function yr(n,...e){if(Xa.logLevel<=qa.in.ERROR){const t=e.map(W_);Xa.error(`Firestore (${Ul}): ${n}`,...t)}}function xi(n,...e){if(Xa.logLevel<=qa.in.WARN){const t=e.map(W_);Xa.warn(`Firestore (${Ul}): ${n}`,...t)}}function W_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: `+n;throw yr(e),new Error(e)}function mt(n,e){n||st()}function Ze(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Mt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class gb{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class rE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new gb(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}function sE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class oE{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=sE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function lp(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new Qn(0,0))}static max(){return new vt(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fh{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===fh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends fh{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const yb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends fh{construct(e,t,r){return new cr(e,t,r)}static isValidIdentifier(e){return yb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new be(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const y=e[o];if("\\"===y){if(o+1===e.length)throw new be(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[o+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new be(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=I,o+=2}else"`"===y?(l=!l,o++):"."!==y||l?(r+=y,o++):(u(),o++)}if(u(),l)throw new be(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(t)}static emptyPath(){return new cr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(Yt.fromString(e))}static fromName(e){return new We(Yt.fromString(e).popFirst(5))}static empty(){return new We(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Yt(e.slice()))}}function aE(n){return new Cs(n.readTime,n.key,-1)}class Cs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Cs(vt.min(),We.empty(),-1)}static max(){return new Cs(vt.max(),We.empty(),-1)}}function $l(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const uE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function mc(n){return wm.apply(this,arguments)}function wm(){return wm=(0,ge.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==uE)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),wm.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let o=0,u=0,l=!1;e.forEach(y=>{++o,y.next(()=>{++u,l&&u===o&&t()},I=>r(I))}),l=!0,u===o&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(o=>o?ie.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,o)=>{const u=e.length,l=new Array(u);let y=0;for(let I=0;I<u;I++){const C=I;t(e[C]).next(x=>{l[C]=x,++y,y===u&&r(l)},x=>o(x))}})}static doWhile(e,t){return new ie((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}function Ja(n){return"IndexedDbTransactionError"===n.name}let ns=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function pp(n){return null==n}function gp(n){return 0===n&&1/n==-1/0}function ov(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dn{constructor(e,t){this.comparator=e,this.root=t||Zr.EMPTY}insert(e,t){return new Dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _p(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _p(this.root,e,this.comparator,!1)}getReverseIterator(){return new _p(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _p(this.root,e,this.comparator,!0)}}class _p{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Zr.RED,this.left=o??Zr.EMPTY,this.right=u??Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Zr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Zr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1,Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new av(this.data.getIterator())}getIteratorFrom(e){return new av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xn(this.comparator);return t.data=e,t}}class av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rs{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new rs([])}unionWith(e){let t=new xn(cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wE("Invalid base64 string: "+o):o}}(e);return new Tr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const HS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eu(n){if(mt(!!n),"string"==typeof n){let e=0;const t=HS.exec(n);if(mt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lr(n.seconds),nanos:lr(n.nanos)}}function lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tu(n){return"string"==typeof n?Tr.fromBase64String(n):Tr.fromUint8Array(n)}function uv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Em(n){const e=n.mapValue.fields.__previous_value__;return uv(e)?Em(e):e}function vp(n){const e=eu(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class Nb{constructor(e,t,r,o,u,l,y,I,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=y,this.longPollingOptions=I,this.useFetchStreams=C}}class _c{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _c("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _c&&e.projectId===this.projectId&&e.database===this.database}}const vc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function wc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uv(n)?4:DE(n)?9007199254740991:10:st()}function da(n,e){if(n===e)return!0;const t=wc(n);if(t!==wc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vp(n).isEqual(vp(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=eu(r.timestampValue),l=eu(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,tu(n.bytesValue).isEqual(tu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return lr(r.geoPointValue.latitude)===lr(o.geoPointValue.latitude)&&lr(r.geoPointValue.longitude)===lr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return lr(r.integerValue)===lr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=lr(r.doubleValue),l=lr(o.doubleValue);return u===l?gp(u)===gp(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return lp(n.arrayValue.values||[],e.arrayValue.values||[],da);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(ov(u)!==ov(l))return!1;for(const y in u)if(u.hasOwnProperty(y)&&(void 0===l[y]||!da(u[y],l[y])))return!1;return!0}(n,e);default:return st()}var o}function wp(n,e){return void 0!==(n.values||[]).find(t=>da(t,e))}function Ec(n,e){if(n===e)return 0;const t=wc(n),r=wc(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=lr(o.integerValue||o.doubleValue),y=lr(u.integerValue||u.doubleValue);return l<y?-1:l>y?1:l===y?0:isNaN(l)?isNaN(y)?0:-1:1}(n,e);case 3:return EE(n.timestampValue,e.timestampValue);case 4:return EE(vp(n),vp(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(o,u){const l=tu(o),y=tu(u);return l.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),y=u.split("/");for(let I=0;I<l.length&&I<y.length;I++){const C=Ft(l[I],y[I]);if(0!==C)return C}return Ft(l.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Ft(lr(o.latitude),lr(u.latitude));return 0!==l?l:Ft(lr(o.longitude),lr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],y=u.values||[];for(let I=0;I<l.length&&I<y.length;++I){const C=Ec(l[I],y[I]);if(C)return C}return Ft(l.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===vc.mapValue&&u===vc.mapValue)return 0;if(o===vc.mapValue)return 1;if(u===vc.mapValue)return-1;const l=o.fields||{},y=Object.keys(l),I=u.fields||{},C=Object.keys(I);y.sort(),C.sort();for(let x=0;x<y.length&&x<C.length;++x){const N=Ft(y[x],C[x]);if(0!==N)return N;const j=Ec(l[y[x]],I[C[x]]);if(0!==j)return j}return Ft(y.length,C.length)}(n.mapValue,e.mapValue);default:throw st()}}function EE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=eu(n),r=eu(e),o=Ft(t.seconds,r.seconds);return 0!==o?o:Ft(t.nanos,r.nanos)}function gh(n){return zl(n)}function zl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=eu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tu(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=zl(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const y of o)l?l=!1:u+=",",u+=`${y}:${zl(r.fields[y])}`;return u+"}"}(n.mapValue):st();var e}function Ic(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Dm(n){return!!n&&"integerValue"in n}function mh(n){return!!n&&"arrayValue"in n}function cv(n){return!!n&&"nullValue"in n}function IE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bm(n){return!!n&&"mapValue"in n}function Cm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return yc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cm(t)}setAll(e){let t=cr.emptyPath(),r={},o=[];e.forEach((l,y)=>{if(!t.isImmediateParentOf(y)){const I=this.getFieldsMap(t);this.applyChanges(I,r,o),r={},o=[],t=y.popLast()}l?r[y.lastSegment()]=Cm(l):o.push(y.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());bm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];bm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){yc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new _r(Cm(this.value))}}function TE(n){const e=[];return yc(n.fields,(t,r)=>{const o=new cr([t]);if(bm(r)){const u=TE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new rs(e)}class Tn{constructor(e,t,r,o,u,l,y){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=y}static newInvalidDocument(e){return new Tn(e,0,vt.min(),vt.min(),vt.min(),_r.empty(),0)}static newFoundDocument(e,t,r,o){return new Tn(e,1,t,vt.min(),r,o,0)}static newNoDocument(e,t){return new Tn(e,2,t,vt.min(),vt.min(),_r.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,vt.min(),vt.min(),_r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hi{constructor(e,t){this.position=e,this.inclusive=t}}function SE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?We.comparator(We.fromName(l.referenceValue),t.key):Ec(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Tm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!da(n.position[t],e.position[t]))return!1;return!0}class ha{constructor(e,t="asc"){this.field=e,this.dir=t}}function kb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class AE{}class Jt extends AE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new pv(e,t,r):"array-contains"===t?new Fb(e,r):"in"===t?new ME(e,r):"not-in"===t?new Lb(e,r):"array-contains-any"===t?new Vb(e,r):new Jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new xE(e,r):new gv(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ec(t,this.value)):null!==t&&wc(this.value)===wc(t)&&this.matchesComparison(Ec(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class dn extends AE{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new dn(e,t)}matches(e){return nu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function nu(n){return"and"===n.op}function dv(n){return function hv(n){for(const e of n.filters)if(e instanceof dn)return!1;return!0}(n)&&nu(n)}function Sm(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+gh(n.value);if(dv(n))return n.filters.map(e=>Sm(e)).join(",");{const e=n.filters.map(t=>Sm(t)).join(",");return`${n.op}(${e})`}}function Am(n,e){return n instanceof Jt?(t=n,(r=e)instanceof Jt&&t.op===r.op&&t.field.isEqual(r.field)&&da(t.value,r.value)):n instanceof dn?function(t,r){return r instanceof dn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&Am(u,r.filters[l]),!0)}(n,e):void st();var t,r}function xm(n){return n instanceof Jt?`${(e=n).field.canonicalString()} ${e.op} ${gh(e.value)}`:n instanceof dn?function(e){return e.op.toString()+" {"+e.getFilters().map(xm).join(" ,")+"}"}(n):"Filter";var e}class pv extends Jt{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class xE extends Jt{constructor(e,t){super(e,"in",t),this.keys=Mm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gv extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=Mm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class Fb extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mh(t)&&wp(t.arrayValue,this.value)}}class ME extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wp(this.value.arrayValue,t)}}class Lb extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wp(this.value.arrayValue,t)}}class Vb extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wp(this.value.arrayValue,r))}}class RE{constructor(e,t=null,r=[],o=[],u=null,l=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=y,this.dt=null}}function Ip(n,e=null,t=[],r=[],o=null,u=null,l=null){return new RE(n,e,t,r,o,u,l)}function ql(n){const e=Ze(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Sm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),pp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gh(r)).join(",")),e.dt=t}return e.dt}function Dp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Am(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Tm(n.startAt,e.startAt)&&Tm(n.endAt,e.endAt)}function Rm(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class fa{constructor(e,t=null,r=[],o=[],u=null,l="F",y=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=y,this.endAt=I,this.wt=null,this._t=null}}function Wl(n){return new fa(n)}function OE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function fi(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ru(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function yv(n){return null!==n.collectionGroup}function Kl(n){const e=Ze(n);if(null===e.wt){e.wt=[];const t=ru(e),r=fi(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new ha(t)),e.wt.push(new ha(cr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ha(cr.keyField(),u))}}}return e.wt}function is(n){const e=Ze(n);if(!e._t)if("F"===e.limitType)e._t=Ip(e.path,e.collectionGroup,Kl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Kl(e))t.push(new ha(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new hi(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new hi(e.startAt.position,e.startAt.inclusive):null;e._t=Ip(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function kE(n,e){e.getFirstInequalityField(),ru(n);const t=n.filters.concat([e]);return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bp(n,e,t){return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yh(n,e){return Dp(is(n),is(e))&&n.limitType===e.limitType}function _h(n){return`${ql(is(n))}|lt:${n.limitType}`}function _v(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>xm(r)).join(", ")}]`),pp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gh(r)).join(",")),`Target(${t})`}(is(n))}; limitType=${n.limitType})`}function Zl(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):We.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Kl(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const y=SE(o,u,l);return o.inclusive?y<=0:y<0}(t.startAt,Kl(t),r)||t.endAt&&!function(o,u,l){const y=SE(o,u,l);return o.inclusive?y>=0:y>0}(t.endAt,Kl(t),r)));var t,r}function vv(n){return(e,t)=>{let r=!1;for(const o of Kl(n)){const u=Bb(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Bb(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(o,u,l){const y=u.data.field(o),I=l.data.field(o);return null!==y&&null!==I?Ec(y,I):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}class iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){yc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return vE(this.inner)}size(){return this.innerSize}}const Ub=new Dn(We.comparator);function Ri(){return Ub}const wv=new Dn(We.comparator);function vh(...n){let e=wv;for(const t of n)e=e.insert(t.key,t);return e}function Cp(n){let e=wv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zs(){return wh()}function jb(){return wh()}function wh(){return new iu(n=>n.toString(),(n,e)=>n.isEqual(e))}const $b=new Dn(We.comparator),LE=new xn(We.comparator);function kt(...n){let e=LE;for(const t of n)e=e.add(t);return e}const Hb=new xn(Ft);function Om(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gp(e)?"-0":e}}function Gb(n){return{integerValue:""+n}}function VE(n,e){return function dE(n){return"number"==typeof n&&Number.isInteger(n)&&!gp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?Gb(e):Om(n,e)}class Ev{constructor(){this._=void 0}}function zb(n,e,t){return n instanceof Yl?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&uv(o)&&(o=Em(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Dc?UE(n,e):n instanceof bc?Iv(n,e):function(r,o){const u=BE(r,o),l=jE(u)+jE(r.gt);return Dm(u)&&Dm(r.gt)?Gb(l):Om(r.serializer,l)}(n,e)}function qb(n,e,t){return n instanceof Dc?UE(n,e):n instanceof bc?Iv(n,e):t}function BE(n,e){return n instanceof Eh?Dm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Yl extends Ev{}class Dc extends Ev{constructor(e){super(),this.elements=e}}function UE(n,e){const t=Dv(e);for(const r of n.elements)t.some(o=>da(o,r))||t.push(r);return{arrayValue:{values:t}}}class bc extends Ev{constructor(e){super(),this.elements=e}}function Iv(n,e){let t=Dv(e);for(const r of n.elements)t=t.filter(o=>!da(o,r));return{arrayValue:{values:t}}}class Eh extends Ev{constructor(e,t){super(),this.serializer=e,this.gt=t}}function jE(n){return lr(n.integerValue||n.doubleValue)}function Dv(n){return mh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class HE{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class km{}function GE(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new xp(n.key,kn.none()):new Ap(n.key,n.data,kn.none());{const t=n.data,r=_r.empty();let o=new xn(cr.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Cc(n.key,r,new rs(o.toArray()),kn.none())}}function GS(n,e,t){n instanceof Ap?function(r,o,u){const l=r.value.clone(),y=Zb(r.fieldTransforms,o,u.transformResults);l.setAll(y),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Cc?function(r,o,u){if(!Sp(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=Zb(r.fieldTransforms,o,u.transformResults),y=o.data;y.setAll(Kb(r)),y.setAll(l),o.convertToFoundDocument(u.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ih(n,e,t,r){return n instanceof Ap?function(o,u,l,y){if(!Sp(o.precondition,u))return l;const I=o.value.clone(),C=Yb(o.fieldTransforms,y,u);return I.setAll(C),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cc?function(o,u,l,y){if(!Sp(o.precondition,u))return l;const I=Yb(o.fieldTransforms,y,u),C=u.data;return C.setAll(Kb(o)),C.setAll(I),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(x=>x.field))}(n,e,t,r):(l=t,Sp(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function zS(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=BE(r.transform,o||null);null!=u&&(null===t&&(t=_r.empty()),t.set(r.field,u))}return t||null}function Wb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&lp(t,r,(o,u)=>function $E(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Dc&&r instanceof Dc||t instanceof bc&&r instanceof bc?lp(t.elements,r.elements,da):t instanceof Eh&&r instanceof Eh?da(t.gt,r.gt):t instanceof Yl&&r instanceof Yl);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ap extends km{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cc extends km{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Kb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Zb(n,e,t){const r=new Map;mt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,y=e.data.field(u.field);r.set(u.field,qb(l,y,t[o]))}return r}function Yb(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,zb(u,l,e))}return r}class xp extends km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dh extends km{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zE{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&GS(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ih(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ih(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jb();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let y=this.applyToLocalView(l,u.mutatedFields);y=t.has(o.key)?null:y;const I=GE(l,y);null!==I&&r.set(o.key,I),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&lp(this.mutations,e.mutations,(t,r)=>Wb(t,r))&&lp(this.baseMutations,e.baseMutations,(t,r)=>Wb(t,r))}}class Fm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){mt(e.mutations.length===r.length);let o=$b;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new Fm(e,t,r,o)}}class bh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class WE{constructor(e,t){this.count=e,this.unchangedNames=t}}var Or,en;function KE(n){if(void 0===n)return yr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Or.OK:return ae.OK;case Or.CANCELLED:return ae.CANCELLED;case Or.UNKNOWN:return ae.UNKNOWN;case Or.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Or.INTERNAL:return ae.INTERNAL;case Or.UNAVAILABLE:return ae.UNAVAILABLE;case Or.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Or.NOT_FOUND:return ae.NOT_FOUND;case Or.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Or.ABORTED:return ae.ABORTED;case Or.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Or.DATA_LOSS:return ae.DATA_LOSS;default:return st()}}(en=Or||(Or={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class ZE{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Cv}static getOrCreateInstance(){return null===Cv&&(Cv=new ZE),Cv}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Cv=null;const Xb=new Bl([4294967295,4294967295],0);function Mp(n){const e=function Qb(){return new TextEncoder}().encode(n),t=new tE;return t.update(e),new Uint8Array(t.digest())}function YE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Bl([t,r],0),new Bl([o,u],0)]}class QE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lm(`Invalid padding: ${t}`);if(r<0)throw new Lm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Lm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Lm(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Bl.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(Bl.fromNumber(r)));return 1===o.compare(Xb)&&(o=new Bl([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Mp(e),[r,o]=YE(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new QE(u,o,t);return r.forEach(y=>l.insert(y)),l}insert(e){if(0===this.It)return;const t=Mp(e),[r,o]=YE(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Lm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vm{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Vm(vt.min(),o,new Dn(Ft),Ri(),kt())}}class Rp{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Rp(r,t,kt(),kt(),kt())}}class Tv{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class XE{constructor(e,t){this.targetId=e,this.Vt=t}}class Jb{constructor(e,t,r=Tr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class JE{constructor(){this.St=0,this.Dt=eC(),this.Ct=Tr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=kt(),t=kt(),r=kt();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new Rp(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=eC()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class eI{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ri(),this.zt=Sv(),this.Wt=new Dn(Ft)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Rm(l))if(0===o){const y=new We(l.path);this.Yt(r,y,Tn.newNoDocument(y,vt.min()))}else mt(1===o);else{const y=this.ie(r);if(y!==o){const I=this.re(e,y);0!==I&&(this.ee(r),this.Wt=this.Wt.insert(r,2===I?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=ZE.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(C,x,N){var j,W,fe,Ne,Se,dt;const _t={localCacheCount:x,existenceFilterCount:N.count},nt=N.unchangedNames;return nt&&(_t.bloomFilter={applied:0===C,hashCount:null!==(j=nt?.hashCount)&&void 0!==j?j:0,bitmapLength:null!==(Ne=null===(fe=null===(W=nt?.bits)||void 0===W?void 0:W.bitmap)||void 0===fe?void 0:fe.length)&&void 0!==Ne?Ne:0,padding:null!==(dt=null===(Se=nt?.bits)||void 0===Se?void 0:Se.padding)&&void 0!==dt?dt:0}),_t}(I,y,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:y=0}=r;let I,C;try{I=tu(u).toUint8Array()}catch(x){if(x instanceof wE)return xi("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw x}try{C=new QE(I,l,y)}catch(x){return xi(x instanceof Lm?"BloomFilter error: ":"Applying bloom filter failed: ",x),1}return 0===C.It?1:o!==t-this.oe(e.targetId,C)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const l=this.Gt.ue(),y=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(y)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const y=this.se(l);if(y){if(u.current&&Rm(y.target)){const I=new We(y.target.path);null!==this.jt.get(I)||this.ae(l,I)||this.Yt(l,I,Tn.newNoDocument(I,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=kt();this.zt.forEach((u,l)=>{let y=!0;l.forEachWhile(I=>{const C=this.se(I);return!C||"TargetPurposeLimboResolution"===C.purpose||(y=!1,!1)}),y&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const o=new Vm(e,t,this.Wt,this.jt,r);return this.jt=Ri(),this.zt=Sv(),this.Wt=new Dn(Ft),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new JE,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new xn(Ft),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new JE),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Sv(){return new Dn(We.comparator)}function eC(){return new Dn(We.comparator)}const So=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),tC=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Av=(()=>({and:"AND",or:"OR"}))();class nC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tI(n,e){return n.useProto3Json||pp(e)?e:{value:e}}function pi(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function xv(n,e){return pi(n,e.toTimestamp())}function vr(n){return mt(!!n),vt.fromTimestamp(function(e){const t=eu(e);return new Qn(t.seconds,t.nanos)}(n))}function Mv(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Bm(n){const e=Yt.fromString(n);return mt(uC(e)),e}function Ch(n,e){return Mv(n.databaseId,e.path)}function Ao(n,e){const t=Bm(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(rI(t))}function Rv(n,e){return Mv(n.databaseId,e)}function Th(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rI(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Pv(n,e,t){return{name:Ch(n,e),fields:t.value.mapValue.fields}}function sI(n,e){return{documents:[Rv(n,e.path)]}}function Fv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Rv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Rv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(I){if(0!==I.length)return aI(dn.create(I,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(I){if(0!==I.length)return I.map(C=>{return{field:Ql((x=C).field),direction:oC(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=tI(n,e.limit);var y,I;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(I=e.endAt).inclusive,values:I.position}),t}function rC(n){let e=function Nv(n){const e=Bm(n);return 4===e.length?Yt.emptyPath():rI(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){mt(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=function(x){const N=sC(x);return N instanceof dn&&dv(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(x=>{return new ha(Xl((N=x).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let y=null;t.limit&&(y=function(x){let N;return N="object"==typeof x?x.value:x,pp(N)?null:N}(t.limit));let I=null;var x;t.startAt&&(I=new hi((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new hi(x.values||[],!x.before)}(t.endAt)),function PE(n,e,t,r,o,u,l,y){return new fa(n,e,t,r,o,u,l,y)}(e,o,l,u,y,"F",I,C)}function sC(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xl(e.unaryFilter.field);return Jt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Xl(e.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xl(e.unaryFilter.field);return Jt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Xl(e.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?Jt.create(Xl((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return dn.create(e.compositeFilter.filters.map(t=>sC(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(n):st();var e}function oC(n){return So[n]}function aC(n){return tC[n]}function oI(n){return Av[n]}function Ql(n){return{fieldPath:n.canonicalString()}}function Xl(n){return cr.fromServerFormat(n.fieldPath)}function aI(n){return n instanceof Jt?function(e){if("=="===e.op){if(IE(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NAN"}};if(cv(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(IE(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NOT_NAN"}};if(cv(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ql(e.field),op:aC(e.op),value:e.value}}}(n):n instanceof dn?function(e){const t=e.getFilters().map(r=>aI(r));return 1===t.length?t[0]:{compositeFilter:{op:oI(e.op),filters:t}}}(n):st()}function uI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class xo{constructor(e,t,r,o,u=vt.min(),l=vt.min(),y=Tr.EMPTY_BYTE_STRING,I=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=y,this.expectedCount=I}withSequenceNumber(e){return new xo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Lv{constructor(e){this.fe=e}}function Bv(n){const e=rC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bp(e,e.limit,"L"):e}class Ah{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(lr(e.integerValue));else if("doubleValue"in e){const r=lr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),gp(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(tu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?DE(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):st()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),We.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Ah.Ve=new Ah;class KS{constructor(){this.rn=new qm}addToCollectionParentIndex(e,t){return this.rn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Cs.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class qm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new xn(Yt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new xn(Yt.comparator)).toArray()}}class Ni{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ni(e,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Ni.DEFAULT_COLLECTION_PERCENTILE=10,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ni.DEFAULT=new Ni(41943040,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ni.DISABLED=new Ni(-1,0,0);class Ph{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ph(0)}static Mn(){return new Ph(-1)}}class yC{constructor(){this.changes=new iu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class p{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Ih(r.mutation,o,rs.empty(),Qn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kt()){const o=zs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=vh();return u.forEach((y,I)=>{l=l.insert(y,I.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=zs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,y)=>{t.set(l,y)})})}computeViews(e,t,r,o){let u=Ri();const l=wh(),y=wh();return t.forEach((I,C)=>{const x=r.get(C.key);o.has(C.key)&&(void 0===x||x.mutation instanceof Cc)?u=u.insert(C.key,C):void 0!==x?(l.set(C.key,x.mutation.getFieldMask()),Ih(x.mutation,C,x.mutation.getFieldMask(),Qn.now())):l.set(C.key,rs.empty())}),this.recalculateAndSaveOverlays(e,u).next(I=>(I.forEach((C,x)=>l.set(C,x)),t.forEach((C,x)=>{var N;return y.set(C,new p(x,null!==(N=l.get(C))&&void 0!==N?N:null))}),y))}recalculateAndSaveOverlays(e,t){const r=wh();let o=new Dn((l,y)=>l-y),u=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const y of l)y.keys().forEach(I=>{const C=t.get(I);if(null===C)return;let x=r.get(I)||rs.empty();x=y.applyToLocalView(C,x),r.set(I,x);const N=(o.get(y.batchId)||kt()).add(I);o=o.insert(y.batchId,N)})}).next(()=>{const l=[],y=o.getReverseIterator();for(;y.hasNext();){const I=y.getNext(),C=I.key,x=I.value,N=jb();x.forEach(j=>{if(!u.has(j)){const W=GE(t.get(j),r.get(j));null!==W&&N.set(j,W),u=u.add(j)}}),l.push(this.documentOverlayCache.saveOverlays(e,C,N))}return ie.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):yv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ie.resolve(zs());let y=-1,I=u;return l.next(C=>ie.forEach(C,(x,N)=>(y<N.largestBatchId&&(y=N.largestBatchId),u.get(x)?ie.resolve():this.remoteDocumentCache.getEntry(e,x).next(j=>{I=I.insert(x,j)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,I,C,kt())).next(x=>({batchId:y,changes:Cp(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let o=vh();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=vh();return this.indexManager.getCollectionParents(e,o).next(l=>ie.forEach(l,y=>{const I=(C=t,x=y.child(o),new fa(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.getDocumentsMatchingCollectionQuery(e,I,r).next(C=>{C.forEach((x,N)=>{u=u.insert(x,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((y,I)=>{const C=I.getKey();null===u.get(C)&&(u=u.insert(C,Tn.newInvalidDocument(C)))});let l=vh();return u.forEach((y,I)=>{const C=o.get(y);void 0!==C&&Ih(C.mutation,I,rs.empty(),Qn.now()),Zl(t,I)&&(l=l.insert(y,I))}),l})}}class E{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ie.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:vr(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Bv(r.bundledQuery),readTime:vr(r.readTime)}),ie.resolve();var r}}class b{constructor(){this.overlays=new Dn(We.comparator),this.ls=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=zs();return ie.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const o=zs(),u=t.length+1,l=new We(t.child("")),y=this.overlays.getIteratorFrom(l);for(;y.hasNext();){const I=y.getNext().value,C=I.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&I.largestBatchId>r&&o.set(I.getKey(),I)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Dn((C,x)=>C-x);const l=this.overlays.getIterator();for(;l.hasNext();){const C=l.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=u.get(C.largestBatchId);null===x&&(x=zs(),u=u.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const y=zs(),I=u.getIterator();for(;I.hasNext()&&(I.getNext().value.forEach((C,x)=>y.set(C,x)),!(y.size()>=o)););return ie.resolve(y)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new bh(t,r));let u=this.ls.get(t);void 0===u&&(u=kt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class A{constructor(){this.fs=new xn(R.ds),this.ws=new xn(R._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new R(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new R(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new We(new Yt([])),r=new R(t,e),o=new R(t,e+1),u=[];return this.ws.forEachInRange([r,o],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new We(new Yt([])),r=new R(t,e),o=new R(t,e+1);let u=kt();return this.ws.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new R(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class R{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return We.comparator(e.key,t.key)||Ft(e.As,t.As)}static _s(e,t){return Ft(e.As,t.As)||We.comparator(e.key,t.key)}}class k{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new xn(R.ds)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const l=new zE(u,t,r,o);this.mutationQueue.push(l);for(const y of o)this.Rs=this.Rs.add(new R(y.key,u)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new R(t,0),o=new R(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],l=>{const y=this.Ps(l.As);u.push(y)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xn(Ft);return t.forEach(o=>{const u=new R(o,0),l=new R(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],y=>{r=r.add(y.As)})}),ie.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;We.isDocumentKey(u)||(u=u.child(""));const l=new R(new We(u),0);let y=new xn(Ft);return this.Rs.forEachWhile(I=>{const C=I.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(y=y.add(I.As)),!0)},l),ie.resolve(this.Vs(y))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){mt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ie.forEach(t.mutations,o=>{const u=new R(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new R(t,0),o=this.Rs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ie.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class H{constructor(e){this.Ds=e,this.docs=new Dn(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Ri();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Tn.newInvalidDocument(o))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Ri();const l=t.path,y=new We(l.child("")),I=this.docs.getIteratorFrom(y);for(;I.hasNext();){const{key:C,value:{document:x}}=I.getNext();if(!l.isPrefixOf(C.path))break;C.path.length>l.length+1||$l(aE(x),r)<=0||(o.has(x.key)||Zl(t,x))&&(u=u.insert(x.key,x.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,t,r,o){st()}Cs(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new J(this)}getSize(e){return ie.resolve(this.size)}}class J extends yC{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class _e{constructor(e){this.persistence=e,this.xs=new iu(t=>ql(t),Dp),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new A,this.targetCount=0,this.Ms=Ph.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ie.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ph(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Fn(t),ie.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((l,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)}),ie.waitFor(u).next(()=>o)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.ks.containsKey(t))}}class je{constructor(e,t){this.$s={},this.overlays={},this.Os=new ns(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new _e(this),this.indexManager=new KS,this.remoteDocumentCache=new H(r=>this.referenceDelegate.Ls(r)),this.serializer=new Lv(t),this.qs=new E(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new b,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new k(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const o=new Ye(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return ie.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Ye extends Q_{constructor(e){super(),this.currentSequenceNumber=e}}class ot{constructor(e){this.persistence=e,this.Qs=new A,this.js=null}static zs(e){return new ot(e)}get Ws(){if(this.js)return this.js;throw st()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ws,r=>{const o=We.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ie.or([()=>ie.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class wC{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=kt(),o=kt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new wC(e,t.fromCache,r,o)}}class tA{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(OE(t))return ie.resolve(null);let r=is(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=bp(t,null,"F"),r=is(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=kt(...u);return this.Ui.getDocuments(e,l).next(y=>this.indexManager.getMinOffset(e,r).next(I=>{const C=this.ji(t,y);return this.zi(t,C,l,I.readTime)?this.Ki(e,bp(t,null,"F")):this.Wi(e,C,t,I)}))})))}Gi(e,t,r,o){return OE(t)||o.isEqual(vt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,o)?this.Qi(e,t):(ym()<=qa.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_v(t)),this.Wi(e,l,t,function Y_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new Cs(o,We.empty(),e)}(o,-1)))})}ji(e,t){let r=new xn(vv(e));return t.forEach((o,u)=>{Zl(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return ym()<=qa.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",_v(t)),this.Ui.getDocumentsMatchingQuery(e,t,Cs.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class jM{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new Dn(Ft),this.Yi=new iu(u=>ql(u),Dp),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function rA(n,e){return EC.apply(this,arguments)}function EC(){return EC=(0,ge.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],y=[];let I=kt();for(const C of o){l.push(C.batchId);for(const x of C.mutations)I=I.add(x.key)}for(const C of u){y.push(C.batchId);for(const x of C.mutations)I=I.add(x.key)}return t.localDocuments.getDocuments(r,I).next(C=>({er:C,removedBatchIds:l,addedBatchIds:y}))})})}),EC.apply(this,arguments)}function iA(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function GM(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ym(n,e,t){return IC.apply(this,arguments)}function IC(){return IC=(0,ge.Z)(function*(n,e,t){const r=Ze(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Ja(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),IC.apply(this,arguments)}function DI(n,e,t){const r=Ze(n);let o=vt.min(),u=kt();return r.persistence.runTransaction("Execute query","readonly",l=>function(y,I,C){const x=Ze(y),N=x.Yi.get(C);return void 0!==N?ie.resolve(x.Ji.get(N)):x.Bs.getTargetData(I,C)}(r,l,is(e)).next(y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,y.targetId).next(I=>{u=I})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?o:vt.min(),t?u:kt())).next(y=>(function uA(n,e,t){let r=n.Xi.get(e)||vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}(r,function FE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),y),{documents:y,ir:u})))}class SC{constructor(){this.activeTargetIds=function Pm(){return Hb}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dA{constructor(){this.Hr=new SC,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new SC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WM{Yr(e){}shutdown(){}}class hA{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let TI=null;function xC(){return null===TI?TI=268435456+Math.round(2147483648*Math.random()):TI++,"0x"+TI.toString(16)}const KM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZM{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ss="WebChannelConnection";class YM extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const l=xC(),y=this.To(e,t);Ve("RestConnection",`Sending RPC '${e}' ${l}:`,y,r);const I={};return this.Eo(I,o,u),this.Ao(e,y,I,r).then(C=>(Ve("RestConnection",`Received RPC '${e}' ${l}: `,C),C),C=>{throw xi("RestConnection",`RPC '${e}' ${l} failed with error: `,C,"url: ",y,"request:",r),C})}vo(e,t,r,o,u,l){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ul,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${KM[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=xC();return new Promise((l,y)=>{const I=new US;I.setWithCredentials(!0),I.listenOnce(dh.COMPLETE,()=>{try{switch(I.getLastErrorCode()){case q_.NO_ERROR:const x=I.getResponseJson();Ve(ss,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),l(x);break;case q_.TIMEOUT:Ve(ss,`RPC '${e}' ${u} timed out`),y(new be(ae.DEADLINE_EXCEEDED,"Request time out"));break;case q_.HTTP_ERROR:const N=I.getStatus();if(Ve(ss,`RPC '${e}' ${u} failed with status:`,N,"response text:",I.getResponseText()),N>0){let j=I.getResponseJson();Array.isArray(j)&&(j=j[0]);const W=j?.error;if(W&&W.status&&W.message){const fe=function(Ne){const Se=Ne.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Se)>=0?Se:ae.UNKNOWN}(W.status);y(new be(fe,W.message))}else y(new be(ae.UNKNOWN,"Server responded with status "+I.getStatus()))}else y(new be(ae.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Ve(ss,`RPC '${e}' ${u} completed.`)}});const C=JSON.stringify(o);Ve(ss,`RPC '${e}' ${u} sending request:`,o),I.send(t,"POST",C,r,15)})}Ro(e,t,r){const o=xC(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=cb(),y=lb(),I={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(I.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(I.xmlHttpFactory=new mm({})),this.Eo(I.initMessageHeaders,t,r),I.encodeInitMessageHeaders=!0;const x=u.join("");Ve(ss,`Creating RPC '${e}' stream ${o}: ${x}`,I);const N=l.createWebChannel(x,I);let j=!1,W=!1;const fe=new ZM({ro:Se=>{W?Ve(ss,`Not sending because RPC '${e}' stream ${o} is closed:`,Se):(j||(Ve(ss,`Opening RPC '${e}' stream ${o} transport.`),N.open(),j=!0),Ve(ss,`RPC '${e}' stream ${o} sending:`,Se),N.send(Se))},oo:()=>N.close()}),Ne=(Se,dt,_t)=>{Se.listen(dt,nt=>{try{_t(nt)}catch(lt){setTimeout(()=>{throw lt},0)}})};return Ne(N,On.EventType.OPEN,()=>{W||Ve(ss,`RPC '${e}' stream ${o} transport opened.`)}),Ne(N,On.EventType.CLOSE,()=>{W||(W=!0,Ve(ss,`RPC '${e}' stream ${o} transport closed`),fe.wo())}),Ne(N,On.EventType.ERROR,Se=>{W||(W=!0,xi(ss,`RPC '${e}' stream ${o} transport errored:`,Se),fe.wo(new be(ae.UNAVAILABLE,"The operation could not be completed")))}),Ne(N,On.EventType.MESSAGE,Se=>{var dt;if(!W){const _t=Se.data[0];mt(!!_t);const lt=_t.error||(null===(dt=_t[0])||void 0===dt?void 0:dt.error);if(lt){Ve(ss,`RPC '${e}' stream ${o} received error:`,lt);const Rt=lt.status;let zt=function(Mo){const dy=Or[Mo];if(void 0!==dy)return KE(dy)}(Rt),Yr=lt.message;void 0===zt&&(zt=ae.INTERNAL,Yr="Unknown error status: "+Rt+" with message "+lt.message),W=!0,fe.wo(new be(zt,Yr)),N.close()}else Ve(ss,`RPC '${e}' stream ${o} received:`,_t),fe._o(_t)}}),Ne(y,db.STAT_EVENT,Se=>{Se.stat===up.PROXY?Ve(ss,`RPC '${e}' stream ${o} detected buffering proxy`):Se.stat===up.NOPROXY&&Ve(ss,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{fe.fo()},0),fe}}function SI(){return typeof document<"u"?document:null}function Zv(n){return new nC(n,!0)}class MC{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&Ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class pA{constructor(e,t,r,o,u,l,y,I){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=y,this.listener=I,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new MC(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ge.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ge.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new be(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,ge.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QM extends pA{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function su(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(I=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===I?1:"REMOVE"===I?2:"CURRENT"===I?3:"RESET"===I?4:st(),o=e.targetChange.targetIds||[],u=function(I,C){return I.useProto3Json?(mt(void 0===C||"string"==typeof C),Tr.fromBase64String(C||"")):(mt(void 0===C||C instanceof Uint8Array),Tr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,y=l&&function(I){const C=void 0===I.code?ae.UNKNOWN:KE(I.code);return new be(C,I.message||"")}(l);t=new Jb(r,o,u,y||null)}else if("documentChange"in e){const r=e.documentChange,o=Ao(n,r.document.name),u=vr(r.document.updateTime),l=r.document.createTime?vr(r.document.createTime):vt.min(),y=new _r({mapValue:{fields:r.document.fields}}),I=Tn.newFoundDocument(o,u,l,y);t=new Tv(r.targetIds||[],r.removedTargetIds||[],I.key,I)}else if("documentDelete"in e){const r=e.documentDelete,o=Ao(n,r.document),u=r.readTime?vr(r.readTime):vt.min(),l=Tn.newNoDocument(o,u);t=new Tv([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Ao(n,r.document);t=new Tv([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,{count:o=0,unchangedNames:u}=r,l=new WE(o,u);t=new XE(r.targetId,l)}}var I;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?vr(u.readTime):vt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Th(this.serializer),t.addTarget=function(o,u){let l;const y=u.target;if(l=Rm(y)?{documents:sI(o,y)}:{query:Fv(o,y)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=nI(o,u.resumeToken);const I=tI(o,u.expectedCount);null!==I&&(l.expectedCount=I)}else if(u.snapshotVersion.compareTo(vt.min())>0){l.readTime=pi(o,u.snapshotVersion.toTimestamp());const I=tI(o,u.expectedCount);null!==I&&(l.expectedCount=I)}return l}(this.serializer,e);const r=function iC(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Th(this.serializer),t.removeTarget=e,this.Wo(t)}}class XM extends pA{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function kv(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,o){let u=vr(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=vr(o)),new HE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.cu(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Th(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function qs(n,e){let t;if(e instanceof Ap)t={update:Pv(n,e.key,e.value)};else if(e instanceof xp)t={delete:Ch(n,e.key)};else if(e instanceof Cc)t={update:Pv(n,e.key,e.data),updateMask:uI(e.fieldMask)};else{if(!(e instanceof Dh))return st();t={verify:Ch(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Yl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Dc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof bc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Eh)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:xv(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}(this.serializer,r))};this.Wo(t)}}class JM extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(ae.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(ae.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class tR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(yr(t),this.mu=!1):Ve("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class nR{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(y=>{r.enqueueAndForget((0,ge.Z)(function*(){var I;kh(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,ge.Z)(function*(C){const x=Ze(C);x.vu.add(4),yield Qm(x),x.bu.set("Unknown"),x.vu.delete(4),yield Yv(x)}),function(C){return I.apply(this,arguments)})(l))}))}),this.bu=new tR(r,o)}}function Yv(n){return NC.apply(this,arguments)}function NC(){return NC=(0,ge.Z)(function*(n){if(kh(n))for(const e of n.Ru)yield e(!0)}),NC.apply(this,arguments)}function Qm(n){return PC.apply(this,arguments)}function PC(){return PC=(0,ge.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),PC.apply(this,arguments)}function AI(n,e){const t=Ze(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),FC(t)?kC(t):Jm(t).Ko()&&OC(t,e))}function Qv(n,e){const t=Ze(n),r=Jm(t);t.Au.delete(e),r.Ko()&&gA(t,e),0===t.Au.size&&(r.Ko()?r.jo():kh(t)&&t.bu.set("Unknown"))}function OC(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jm(n).su(e)}function gA(n,e){n.Vu.qt(e),Jm(n).iu(e)}function kC(n){n.Vu=new eI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Jm(n).start(),n.bu.gu()}function FC(n){return kh(n)&&!Jm(n).Uo()&&n.Au.size>0}function kh(n){return 0===Ze(n).vu.size}function mA(n){n.Vu=void 0}function rR(n){return LC.apply(this,arguments)}function LC(){return LC=(0,ge.Z)(function*(n){n.Au.forEach((e,t)=>{OC(n,e)})}),LC.apply(this,arguments)}function iR(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,ge.Z)(function*(n,e){mA(n),FC(n)?(n.bu.Iu(e),kC(n)):n.bu.set("Unknown")}),VC.apply(this,arguments)}function sR(n,e,t){return BC.apply(this,arguments)}function BC(){return BC=(0,ge.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof Jb&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(o,u){const l=u.cause;for(const y of u.targetIds)o.Au.has(y)&&(yield o.remoteSyncer.rejectListen(y,l),o.Au.delete(y),o.Vu.removeTarget(y))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xI(n,r)}else if(e instanceof Tv?n.Vu.Ht(e):e instanceof XE?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(vt.min()))try{const r=yield iA(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Vu.ce(u);return l.targetChanges.forEach((y,I)=>{if(y.resumeToken.approximateByteSize()>0){const C=o.Au.get(I);C&&o.Au.set(I,C.withResumeToken(y.resumeToken,u))}}),l.targetMismatches.forEach((y,I)=>{const C=o.Au.get(y);if(!C)return;o.Au.set(y,C.withResumeToken(Tr.EMPTY_BYTE_STRING,C.snapshotVersion)),gA(o,y);const x=new xo(C.target,y,I,C.sequenceNumber);OC(o,x)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield xI(n,r)}var r}),BC.apply(this,arguments)}function xI(n,e,t){return UC.apply(this,arguments)}function UC(){return UC=(0,ge.Z)(function*(n,e,t){if(!Ja(e))throw e;n.vu.add(1),yield Qm(n),n.bu.set("Offline"),t||(t=()=>iA(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Yv(n)}))}),UC.apply(this,arguments)}function yA(n,e){return e().catch(t=>xI(n,t,e))}function Xm(n){return jC.apply(this,arguments)}function jC(){return jC=(0,ge.Z)(function*(n){const e=Ze(n),t=Fh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;oR(e);)try{const o=yield GM(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,aR(e,o)}catch(o){yield xI(e,o)}_A(e)&&vA(e)}),jC.apply(this,arguments)}function oR(n){return kh(n)&&n.Eu.length<10}function aR(n,e){n.Eu.push(e);const t=Fh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function _A(n){return kh(n)&&!Fh(n).Uo()&&n.Eu.length>0}function vA(n){Fh(n).start()}function uR(n){return $C.apply(this,arguments)}function $C(){return $C=(0,ge.Z)(function*(n){Fh(n).hu()}),$C.apply(this,arguments)}function cR(n){return HC.apply(this,arguments)}function HC(){return HC=(0,ge.Z)(function*(n){const e=Fh(n);for(const t of n.Eu)e.uu(t.mutations)}),HC.apply(this,arguments)}function lR(n,e,t){return GC.apply(this,arguments)}function GC(){return GC=(0,ge.Z)(function*(n,e,t){const r=n.Eu.shift(),o=Fm.from(r,e,t);yield yA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Xm(n)}),GC.apply(this,arguments)}function dR(n,e){return zC.apply(this,arguments)}function zC(){return zC=(0,ge.Z)(function*(n,e){var t;e&&Fh(n).ou&&(yield(t=(0,ge.Z)(function*(r,o){if(function bv(n){switch(n){default:return st();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}(u=o.code)&&u!==ae.ABORTED){const l=r.Eu.shift();Fh(r).Qo(),yield yA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Xm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),_A(n)&&vA(n)}),zC.apply(this,arguments)}function wA(n,e){return qC.apply(this,arguments)}function qC(){return qC=(0,ge.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=kh(t);t.vu.add(3),yield Qm(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Yv(t)}),qC.apply(this,arguments)}function KC(){return KC=(0,ge.Z)(function*(n,e){const t=Ze(n);e?(t.vu.delete(2),yield Yv(t)):e||(t.vu.add(2),yield Qm(t),t.bu.set("Unknown"))}),KC.apply(this,arguments)}function Jm(n){return n.Su||(n.Su=function(e,t,r){const o=Ze(e);return o.fu(),new QM(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:rR.bind(null,n),ao:iR.bind(null,n),nu:sR.bind(null,n)}),n.Ru.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Su.Qo(),FC(n)?kC(n):n.bu.set("Unknown")):(yield n.Su.stop(),mA(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Fh(n){return n.Du||(n.Du=function(e,t,r){const o=Ze(e);return o.fu(),new XM(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:uR.bind(null,n),ao:dR.bind(null,n),au:cR.bind(null,n),cu:lR.bind(null,n)}),n.Ru.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Du.Qo(),yield Xm(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class ZC{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,y=new ZC(e,t,l,o,u);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ey(n,e){if(yr("AsyncQueue",`${e}: ${n}`),Ja(n))return new be(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class ty{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=vh(),this.sortedSet=new Dn(this.comparator)}static emptySet(e){return new ty(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ty)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ty;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class EA{constructor(){this.Cu=new Dn(We.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):st():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ny{constructor(e,t,r,o,u,l,y,I,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=y,this.excludesMetadataChanges=I,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(y=>{l.push({type:0,doc:y})}),new ny(e,t,ty.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class hR{constructor(){this.Nu=void 0,this.listeners=[]}}class fR{constructor(){this.queries=new iu(e=>_h(e),yh),this.onlineState="Unknown",this.ku=new Set}}function YC(n,e){return QC.apply(this,arguments)}function QC(){return QC=(0,ge.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new hR),o)try{u.Nu=yield t.onListen(r)}catch(l){const y=ey(l,`Initialization of query '${_v(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&eT(t)}),QC.apply(this,arguments)}function XC(n,e){return JC.apply(this,arguments)}function JC(){return JC=(0,ge.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),JC.apply(this,arguments)}function pR(n,e){const t=Ze(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const y of l.listeners)y.$u(o)&&(r=!0);l.Nu=o}}r&&eT(t)}function gR(n,e,t){const r=Ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function eT(n){n.ku.forEach(e=>{e.next()})}class tT{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new ny(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=ny.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class bA{constructor(e){this.key=e}}class CA{constructor(e){this.key=e}}class TA{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=kt(),this.mutatedKeys=kt(),this.tc=vv(e),this.ec=new ty(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new EA,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,y=!1;const I="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const j=o.get(x),W=Zl(this.query,N)?N:null,fe=!!j&&this.mutatedKeys.has(j.key),Ne=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let Se=!1;j&&W?j.data.isEqual(W.data)?fe!==Ne&&(r.track({type:3,doc:W}),Se=!0):this.rc(j,W)||(r.track({type:2,doc:W}),Se=!0,(I&&this.tc(W,I)>0||C&&this.tc(W,C)<0)&&(y=!0)):!j&&W?(r.track({type:0,doc:W}),Se=!0):j&&!W&&(r.track({type:1,doc:j}),Se=!0,(I||C)&&(y=!0)),Se&&(W?(l=l.add(W),u=Ne?u.add(x):u.delete(x)):(l=l.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const x="F"===this.query.limitType?l.last():l.first();l=l.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{ec:l,ic:r,zi:y,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((C,x)=>function(N,j){const W=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return W(N)-W(j)}(C.type,x.type)||this.tc(C.doc,x.doc)),this.oc(r);const l=t?this.uc():[],y=0===this.Zu.size&&this.current?1:0,I=y!==this.Xu;return this.Xu=y,0!==u.length||I?{snapshot:new ny(this.query,e.ec,o,u,e.mutatedKeys,0===y,I,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new EA,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=kt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new CA(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new bA(r))}),t}hc(e){this.Yu=e.ir,this.Zu=kt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return ny.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class _R{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vR{constructor(e){this.key=e,this.fc=!1}}class wR{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new iu(y=>_h(y),yh),this._c=new Map,this.mc=new Set,this.gc=new Dn(We.comparator),this.yc=new Map,this.Ic=new A,this.Tc={},this.Ec=new Map,this.Ac=Ph.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function ER(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,ge.Z)(function*(n,e){const t=function CT(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bR.bind(null,e),e.dc.nu=pR.bind(null,e.eventManager),e.dc.Pc=gR.bind(null,e.eventManager),e}(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const l=yield function Zm(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,ie.resolve(o)):t.Bs.allocateTargetId(r).next(l=>(o=new xo(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,is(e)),y=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield function rT(n,e,t,r,o){return iT.apply(this,arguments)}(t,e,r,"current"===y,l.resumeToken),t.isPrimaryClient&&AI(t.remoteStore,l)}return o}),nT.apply(this,arguments)}function iT(){return iT=(0,ge.Z)(function*(n,e,t,r,o){n.Rc=(N,j,W)=>{return(fe=(0,ge.Z)(function*(Ne,Se,dt,_t){let nt=Se.view.sc(dt);nt.zi&&(nt=yield DI(Ne.localStore,Se.query,!1).then(({documents:zt})=>Se.view.sc(zt,nt)));const lt=_t&&_t.targetChanges.get(Se.targetId),Rt=Se.view.applyChanges(nt,Ne.isPrimaryClient,lt);return pT(Ne,Se.targetId,Rt.cc),Rt.snapshot}),function(Ne,Se,dt,_t){return fe.apply(this,arguments)})(n,N,j,W);var fe};const u=yield DI(n.localStore,e,!0),l=new TA(e,u.ir),y=l.sc(u.documents),I=Rp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=l.applyChanges(y,n.isPrimaryClient,I);pT(n,t,C.cc);const x=new _R(e,t,l);return n.wc.set(e,x),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),C.snapshot}),iT.apply(this,arguments)}function IR(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,ge.Z)(function*(n,e){const t=Ze(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!yh(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ym(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Qv(t.remoteStore,r.targetId),ry(t,r.targetId)}).catch(mc))):(ry(t,r.targetId),yield Ym(t.localStore,r.targetId,!0))}),sT.apply(this,arguments)}function oT(){return oT=(0,ge.Z)(function*(n,e,t){const r=function TT(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TR.bind(null,e),e}(n);try{const o=yield function(u,l){const y=Ze(u),I=Qn.now(),C=l.reduce((j,W)=>j.add(W.key),kt());let x,N;return y.persistence.runTransaction("Locally write mutations","readwrite",j=>{let W=Ri(),fe=kt();return y.Zi.getEntries(j,C).next(Ne=>{W=Ne,W.forEach((Se,dt)=>{dt.isValidDocument()||(fe=fe.add(Se))})}).next(()=>y.localDocuments.getOverlayedDocuments(j,W)).next(Ne=>{x=Ne;const Se=[];for(const dt of l){const _t=zS(dt,x.get(dt.key).overlayedDocument);null!=_t&&Se.push(new Cc(dt.key,_t,TE(_t.value.mapValue),kn.exists(!0)))}return y.mutationQueue.addMutationBatch(j,I,Se,l)}).next(Ne=>{N=Ne;const Se=Ne.applyToLocalDocumentSet(x,fe);return y.documentOverlayCache.saveOverlays(j,Ne.batchId,Se)})}).then(()=>({batchId:N.batchId,changes:Cp(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,y){let I=u.Tc[u.currentUser.toKey()];I||(I=new Dn(Ft)),I=I.insert(l,y),u.Tc[u.currentUser.toKey()]=I}(r,o.batchId,t),yield ed(r,o.changes),yield Xm(r.remoteStore)}catch(o){const u=ey(o,"Failed to persist write");t.reject(u)}}),oT.apply(this,arguments)}function SA(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,ge.Z)(function*(n,e){const t=Ze(n);try{const r=yield function HM(n,e){const t=Ze(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const y=[];e.targetChanges.forEach((x,N)=>{const j=o.get(N);if(!j)return;y.push(t.Bs.removeMatchingKeys(u,x.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,x.addedDocuments,N)));let W=j.withSequenceNumber(u.currentSequenceNumber);var fe,Ne,Se;null!==e.targetMismatches.get(N)?W=W.withResumeToken(Tr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):x.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(x.resumeToken,r)),o=o.insert(N,W),Ne=W,Se=x,(0===(fe=j).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-fe.snapshotVersion.toMicroseconds()>=3e8||Se.addedDocuments.size+Se.modifiedDocuments.size+Se.removedDocuments.size>0)&&y.push(t.Bs.updateTargetData(u,W))});let I=Ri(),C=kt();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(u,x))}),y.push(function sA(n,e,t){let r=kt(),o=kt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ri();return t.forEach((y,I)=>{const C=u.get(y);I.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(y)),I.isNoDocument()&&I.version.isEqual(vt.min())?(e.removeEntry(y,I.readTime),l=l.insert(y,I)):!C.isValidDocument()||I.version.compareTo(C.version)>0||0===I.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(I),l=l.insert(y,I)):Ve("LocalStore","Ignoring outdated watch update for ",y,". Current version:",C.version," Watch version:",I.version)}),{nr:l,sr:o}})}(u,l,e.documentUpdates).next(x=>{I=x.nr,C=x.sr})),!r.isEqual(vt.min())){const x=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));y.push(x)}return ie.waitFor(y).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,I,C)).next(()=>I)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.yc.get(u);l&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?mt(l.fc):o.removedDocuments.size>0&&(mt(l.fc),l.fc=!1))}),yield ed(t,r,e)}catch(r){yield mc(r)}}),aT.apply(this,arguments)}function AA(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,l)=>{const y=l.view.Mu(e);y.snapshot&&o.push(y.snapshot)}),function(u,l){const y=Ze(u);y.onlineState=l;let I=!1;y.queries.forEach((C,x)=>{for(const N of x.listeners)N.Mu(l)&&(I=!0)}),I&&eT(y)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bR(n,e,t){return uT.apply(this,arguments)}function uT(){return uT=(0,ge.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let l=new Dn(We.comparator);l=l.insert(u,Tn.newNoDocument(u,vt.min()));const y=kt().add(u),I=new Vm(vt.min(),new Map,new Dn(Ft),l,y);yield SA(r,I),r.gc=r.gc.remove(u),r.yc.delete(e),gT(r)}else yield Ym(r.localStore,e,!1).then(()=>ry(r,e,t)).catch(mc)}),uT.apply(this,arguments)}function CR(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,ge.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const o=yield function $M(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,y,I,C){const x=I.batch,N=x.keys();let j=ie.resolve();return N.forEach(W=>{j=j.next(()=>C.getEntry(y,W)).next(fe=>{const Ne=I.docVersions.get(W);mt(null!==Ne),fe.version.compareTo(Ne)<0&&(x.applyToRemoteDocument(fe,I),fe.isValidDocument()&&(fe.setReadTime(I.commitVersion),C.addEntry(fe)))})}),j.next(()=>l.mutationQueue.removeMutationBatch(y,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let y=kt();for(let I=0;I<l.mutationResults.length;++I)l.mutationResults[I].transformResults.length>0&&(y=y.add(l.batch.mutations[I].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);fT(t,r,null),hT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ed(t,o)}catch(o){yield mc(o)}}),cT.apply(this,arguments)}function TR(n,e,t){return lT.apply(this,arguments)}function lT(){return lT=(0,ge.Z)(function*(n,e,t){const r=Ze(n);try{const o=yield function(u,l){const y=Ze(u);return y.persistence.runTransaction("Reject batch","readwrite-primary",I=>{let C;return y.mutationQueue.lookupMutationBatch(I,l).next(x=>(mt(null!==x),C=x.keys(),y.mutationQueue.removeMutationBatch(I,x))).next(()=>y.mutationQueue.performConsistencyCheck(I)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(I,C,l)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(I,C)).next(()=>y.localDocuments.getDocuments(I,C))})}(r.localStore,e);fT(r,e,t),hT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ed(r,o)}catch(o){yield mc(o)}}),lT.apply(this,arguments)}function hT(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function fT(n,e,t){const r=Ze(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function ry(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||xA(n,r)})}function xA(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Qv(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),gT(n))}function pT(n,e,t){for(const r of t)r instanceof bA?(n.Ic.addReference(r.key,e),AR(n,r)):r instanceof CA?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||xA(n,r.key)):st()}function AR(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.mc.add(r),gT(n))}function gT(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new We(Yt.fromString(e)),r=n.Ac.next();n.yc.set(r,new vR(t)),n.gc=n.gc.insert(t,r),AI(n.remoteStore,new xo(is(Wl(t.path)),r,"TargetPurposeLimboResolution",ns.ct))}}function ed(n,e,t){return mT.apply(this,arguments)}function mT(){return mT=(0,ge.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[],l=[];var y;r.wc.isEmpty()||(r.wc.forEach((y,I)=>{l.push(r.Rc(I,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(I.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const x=wC.Li(I.targetId,C);u.push(x)}}))}),yield Promise.all(l),r.dc.nu(o),yield(y=(0,ge.Z)(function*(I,C){const x=Ze(I);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ie.forEach(C,j=>ie.forEach(j.Fi,W=>x.persistence.referenceDelegate.addReference(N,j.targetId,W)).next(()=>ie.forEach(j.Bi,W=>x.persistence.referenceDelegate.removeReference(N,j.targetId,W)))))}catch(N){if(!Ja(N))throw N;Ve("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const j=N.targetId;if(!N.fromCache){const W=x.Ji.get(j),Ne=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);x.Ji=x.Ji.insert(j,Ne)}}}),function(I,C){return y.apply(this,arguments)})(r.localStore,u))}),mT.apply(this,arguments)}function xR(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,ge.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield rA(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(l=>{l.forEach(y=>{y.reject(new be(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ed(t,r.er)}var o}),yT.apply(this,arguments)}function MR(n,e){const t=Ze(n),r=t.yc.get(e);if(r&&r.fc)return kt().add(r.key);{let o=kt();const u=t._c.get(e);if(!u)return o;for(const l of u){const y=t.wc.get(l);o=o.unionWith(y.view.nc)}return o}}class Xv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.serializer=Zv(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function nA(n,e,t,r){return new jM(n,e,t,r)}(this.persistence,new tA,e.initialUser,this.serializer)}createPersistence(e){return new je(ot.zs,this.serializer)}createSharedClientState(e){return new dA}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class iy{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>AA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=xR.bind(null,r.syncEngine),yield function WC(n,e){return KC.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fR}createDatastore(e){const t=Zv(e.databaseInfo.databaseId),r=new YM(e.databaseInfo);return new JM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=y=>AA(this.syncEngine,y,0),l=hA.D()?new hA:new WM,new nR(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,y,I,C){const x=new wR(r,o,u,l,y,I);return C&&(x.vc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ze(t);Ve("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Qm(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class HR{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Nr.UNAUTHENTICATED,this.clientId=oE.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ge.Z)(function*(y){Ve("FirestoreClient","Received user=",y.uid),yield u.authCredentialListener(y),u.user=y});return function(y){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=ey(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function RI(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ge.Z)(function*(u){r.isEqual(u)||(yield rA(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),AT.apply(this,arguments)}function xT(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield RT(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>wA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>wA(e.remoteStore,u)),n._onlineComponents=e}),MT.apply(this,arguments)}function RT(n){return NT.apply(this,arguments)}function NT(){return NT=(0,ge.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield RI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function OA(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;xi("Error using user provided cache. Falling back to memory cache: "+t),yield RI(n,new Xv)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),yield RI(n,new Xv);return n._offlineComponents}),NT.apply(this,arguments)}function NI(n){return PT.apply(this,arguments)}function PT(){return PT=(0,ge.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield xT(n,n._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield xT(n,new iy))),n._onlineComponents}),PT.apply(this,arguments)}function PI(n){return RT(n).then(e=>e.localStore)}function sy(n){return kT.apply(this,arguments)}function kT(){return kT=(0,ge.Z)(function*(n){const e=yield NI(n),t=e.eventManager;return t.onListen=ER.bind(null,e.syncEngine),t.onUnlisten=IR.bind(null,e.syncEngine),t}),kT.apply(this,arguments)}function VA(n,e,t={}){const r=new Pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,l,y,I){const C=new MI({next:N=>{u.enqueueAndForget(()=>XC(o,x));const j=N.docs.has(l);!j&&N.fromCache?I.reject(new be(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&N.fromCache&&y&&"server"===y.source?I.reject(new be(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(N)},error:N=>I.reject(N)}),x=new tT(Wl(l.path),C,{includeMetadataChanges:!0,Ku:!0});return YC(o,x)}(yield sy(n),n.asyncQueue,e,t,r)})),r.promise}function BA(n,e,t={}){const r=new Pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,l,y,I){const C=new MI({next:N=>{u.enqueueAndForget(()=>XC(o,x)),N.fromCache&&"server"===y.source?I.reject(new be(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(N)},error:N=>I.reject(N)}),x=new tT(l,C,{includeMetadataChanges:!0,Ku:!0});return YC(o,x)}(yield sy(n),n.asyncQueue,e,t,r)})),r.promise}function UA(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const jA=new Map;function FT(n,e,t){if(!t)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HA(n){if(!We.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GA(n){if(We.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=OI(n);throw new be(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zA(n,e){if(e<=0)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class qA{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new be(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function $A(n,e,t,r){if(!0===e&&!0===r)throw new be(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=UA(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jv{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cp;switch(t.type){case"firstParty":return new rE(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jA.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),jA.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class Gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class xc extends Gi{constructor(e,t,r){super(e,t,Wl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new We(e))}withConverter(e){return new xc(this.firestore,e,this._path)}}function kI(n,e,...t){if(n=(0,Mt.m9)(n),1===arguments.length&&(e=oE.A()),FT("doc","path",e),n instanceof Jv){const r=Yt.fromString(e,...t);return HA(r),new Jn(n,null,new We(r))}{if(!(n instanceof Jn||n instanceof xc))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return HA(r),new Jn(n.firestore,n instanceof xc?n.converter:null,new We(r))}}function ZA(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),(n instanceof Jn||n instanceof xc)&&(e instanceof Jn||e instanceof xc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LT(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&yh(n._query,e._query)&&n.converter===e.converter}class JR{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new MC(this,"async_queue_retry"),this.Xc=()=>{const t=SI();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=SI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=SI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Pr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ja(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,yr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=ZC.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&st()}verifyOperationInProgress(){}sa(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function VT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class er extends Jv{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new JR,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||YA(this),this._firestoreClient.terminate()}}function kr(n){return n._firestoreClient||YA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function YA(n){var e,t,r;const o=n._freezeSettings(),u=(y=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Nb(n._databaseId,y,n._persistenceKey,(C=o).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,UA(C.experimentalLongPollingOptions),C.useFetchStreams));var y,C;n._firestoreClient=new HR(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}class Mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mc(Tr.fromBase64String(e))}catch(t){throw new be(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mc(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lp{constructor(e){this._methodName=e}}class FI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const dN=/^__.*__$/;class hN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Cc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ap(e,this.data,t,this.fieldTransforms)}}class JA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ex(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class LI{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new LI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return UI(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(ex(this.ca)&&dN.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class fN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zv(e)}ya(e,t,r,o=!1){return new LI({ca:e,methodName:t,ga:r,path:cr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vp(n){const e=n._freezeSettings(),t=Zv(n._databaseId);return new fN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VI(n,e,t,r,o,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,o);$T("Data must be an object, but it was:",l,r);const y=rx(r,l);let I,C;if(u.merge)I=new rs(l.fieldMask),C=l.fieldTransforms;else if(u.mergeFields){const x=[];for(const N of u.mergeFields){const j=n0(e,N,t);if(!l.contains(j))throw new be(ae.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);sx(x,j)||x.push(j)}I=new rs(x),C=l.fieldTransforms.filter(N=>I.covers(N.field))}else I=null,C=l.fieldTransforms;return new hN(new _r(y),I,C)}class t0 extends Lp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t0}}function nx(n,e,t,r=!1){return Bp(t,n.ya(r?4:3,e))}function Bp(n,e){if(ix(n=(0,Mt.m9)(n)))return $T("Unsupported field value:",e,n),rx(n,e);if(n instanceof Lp)return function(t,r){if(!ex(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let y=Bp(l,r.wa(u));null==y&&(y={nullValue:"NULL_VALUE"}),o.push(y),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Mt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return VE(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Qn.fromDate(t);return{timestampValue:pi(r.serializer,o)}}if(t instanceof Qn){const o=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pi(r.serializer,o)}}if(t instanceof FI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Mc)return{bytesValue:nI(r.serializer,t._byteString)};if(t instanceof Jn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Mv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${OI(t)}`)}(n,e)}function rx(n,e){const t={};return vE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yc(n,(r,o)=>{const u=Bp(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function ix(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof FI||n instanceof Mc||n instanceof Jn||n instanceof Lp)}function $T(n,e,t){if(!ix(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=OI(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function n0(n,e,t){if((e=(0,Mt.m9)(e))instanceof td)return e._internalPath;if("string"==typeof e)return BI(n,e);throw UI("Field path arguments must be of type string or ",n,!1,void 0,t)}const yN=new RegExp("[~\\*/\\[\\]]");function BI(n,e,t){if(e.search(yN)>=0)throw UI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new td(...e.split("."))._internalPath}catch{throw UI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function UI(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let I="";return(u||l)&&(I+=" (found",u&&(I+=` in field ${r}`),l&&(I+=` in document ${o}`),I+=")"),new be(ae.INVALID_ARGUMENT,y+n+I)}function sx(n,e){return n.some(t=>t.isEqual(e))}class r0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _N(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _N extends r0{data(){return super.data()}}function jI(n,e){return"string"==typeof e?BI(n,e):e instanceof td?e._internalPath:e._delegate._internalPath}function ox(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HT{}class s0 extends HT{}function Lh(n,e,...t){let r=[];e instanceof HT&&r.push(e),r=r.concat(t),function(o){const u=o.filter(y=>y instanceof oy).length,l=o.filter(y=>y instanceof o0).length;if(u>1||u>0&&l>0)throw new be(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class o0 extends s0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new o0(e,t,r)}_apply(e){const t=this._parse(e);return lx(e._query,t),new Gi(e.firestore,e.converter,kE(e._query,t))}_parse(e){const t=Vp(e.firestore);return function(o,u,l,y,I,C,x){let N;if(I.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){cx(x,C);const j=[];for(const W of x)j.push(ux(y,o,W));N={arrayValue:{values:j}}}else N=ux(y,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||cx(x,C),N=nx(l,"where",x,"in"===C||"not-in"===C);return Jt.create(I,C,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class oy extends HT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new oy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const y of l)lx(u,y),u=kE(u,y)}(e._query,t),new Gi(e.firestore,e.converter,kE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class GT extends s0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new GT(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ha(o,u);return function(y,I){if(null===fi(y)){const C=ru(y);null!==C&&dx(0,C,I.field)}}(r,l),l}(e._query,this._field,this._direction);return new Gi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new fa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class $I extends s0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new $I(e,t,r)}_apply(e){return new Gi(e.firestore,e.converter,bp(e._query,this._limit,this._limitType))}}class HI extends s0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new HI(e,t,r)}_apply(e){const t=ax(e,this.type,this._docOrFields,this._inclusive);return new Gi(e.firestore,e.converter,(o=t,new fa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class GI extends s0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new GI(e,t,r)}_apply(e){const t=ax(e,this.type,this._docOrFields,this._inclusive);return new Gi(e.firestore,e.converter,(o=t,new fa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function ax(n,e,t,r){if(t[0]=(0,Mt.m9)(t[0]),t[0]instanceof r0)return function(o,u,l,y,I){if(!y)throw new be(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const C=[];for(const x of Kl(o))if(x.field.isKeyField())C.push(Ic(u,y.key));else{const N=y.data.field(x.field);if(uv(N))throw new be(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const j=x.field.canonicalString();throw new be(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${j}' (used as the orderBy) does not exist.`)}C.push(N)}return new hi(C,I)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Vp(n.firestore);return function(u,l,y,I,C,x){const N=u.explicitOrderBy;if(C.length>N.length)throw new be(ae.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const j=[];for(let W=0;W<C.length;W++){const fe=C[W];if(N[W].field.isKeyField()){if("string"!=typeof fe)throw new be(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof fe}`);if(!yv(u)&&-1!==fe.indexOf("/"))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${I}() must be a plain document ID, but '${fe}' contains a slash.`);const Ne=u.path.child(Yt.fromString(fe));if(!We.isDocumentKey(Ne))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${I}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const Se=new We(Ne);j.push(Ic(l,Se))}else{const Ne=nx(y,I,fe);j.push(Ne)}}return new hi(j,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function ux(n,e,t){if("string"==typeof(t=(0,Mt.m9)(t))){if(""===t)throw new be(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yv(e)&&-1!==t.indexOf("/"))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!We.isDocumentKey(r))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ic(n,new We(r))}if(t instanceof Jn)return Ic(n,t._key);throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OI(t)}.`)}function cx(n,e){if(!Array.isArray(n)||0===n.length)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lx(n,e){if(e.isInequality()){const r=ru(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new be(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=fi(n);null!==u&&dx(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new be(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function dx(n,e,t){if(!t.isEqual(e))throw new be(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zT{convertValue(e,t="none"){switch(wc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return yc(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new FI(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Em(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vp(e));default:return null}}convertTimestamp(e){const t=eu(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);mt(uC(r));const o=new _c(r.get(1),r.get(3)),u=new We(r.popFirst(5));return o.isEqual(t)||yr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function zI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Up{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nd extends r0{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a0 extends nd{data(e={}){return super.data(e)}}class Vh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Up(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new a0(this._firestore,this._userDataWriter,r.key,r,new Up(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new a0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Up(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const y=new a0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Up(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let I=-1,C=-1;return 0!==l.type&&(I=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),C=u.indexOf(l.doc.key)),{type:xN(l.type),doc:y,oldIndex:I,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function fx(n,e){return n instanceof nd&&e instanceof nd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Vh&&e instanceof Vh&&n._firestore===e._firestore&&LT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bh extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function px(n,e,t){n=sn(n,Jn);const r=sn(n.firestore,er),o=zI(n.converter,e,t);return ay(r,[VI(Vp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,kn.none())])}function gx(n,e,t,...r){n=sn(n,Jn);const o=sn(n.firestore,er),u=Vp(o);let l;return l="string"==typeof(e=(0,Mt.m9)(e))||e instanceof td?function jT(n,e,t,r,o,u){const l=n.ya(1,e,t),y=[n0(e,r,t)],I=[o];if(u.length%2!=0)throw new be(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)y.push(n0(e,u[j])),I.push(u[j+1]);const C=[],x=_r.empty();for(let j=y.length-1;j>=0;--j)if(!sx(C,y[j])){const W=y[j];let fe=I[j];fe=(0,Mt.m9)(fe);const Ne=l.da(W);if(fe instanceof t0)C.push(W);else{const Se=Bp(fe,Ne);null!=Se&&(C.push(W),x.set(W,Se))}}const N=new rs(C);return new JA(x,N,l.fieldTransforms)}(u,"updateDoc",n._key,e,t,r):function UT(n,e,t,r){const o=n.ya(1,e,t);$T("Data must be an object, but it was:",o,r);const u=[],l=_r.empty();yc(r,(I,C)=>{const x=BI(e,I,t);C=(0,Mt.m9)(C);const N=o.da(x);if(C instanceof t0)u.push(x);else{const j=Bp(C,N);null!=j&&(u.push(x),l.set(x,j))}});const y=new rs(u);return new JA(l,y,o.fieldTransforms)}(u,"updateDoc",n._key,e),ay(o,[l.toMutation(n._key,kn.exists(!0))])}function mx(n,...e){var t,r,o;n=(0,Mt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||VT(e[l])||(u=e[l],l++);const y={includeMetadataChanges:u.includeMetadataChanges};if(VT(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let I,C,x;if(n instanceof Jn)C=sn(n.firestore,er),x=Wl(n._key.path),I={next:N=>{e[l]&&e[l](qT(C,n,N))},error:e[l+1],complete:e[l+2]};else{const N=sn(n,Gi);C=sn(N.firestore,er),x=N._query;const j=new Bh(C);I={next:W=>{e[l]&&e[l](new Vh(C,j,N,W))},error:e[l+1],complete:e[l+2]},ox(n._query)}return function(N,j,W,fe){const Ne=new MI(fe),Se=new tT(j,Ne,W);return N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return YC(yield sy(N),Se)})),()=>{Ne.Dc(),N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return XC(yield sy(N),Se)}))}}(kr(C),x,y,I)}function ay(n,e){return function(t,r){const o=new Pr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function DR(n,e,t){return oT.apply(this,arguments)}(yield function OT(n){return NI(n).then(e=>e.syncEngine)}(t),r,o)})),o.promise}(kr(n),e)}function qT(n,e,t){const r=t.docs.get(e._key),o=new Bh(n);return new nd(n,o,e._key,r,new Up(t.hasPendingWrites,t.fromCache),e.converter)}function vx(){if(typeof Uint8Array>"u")throw new be("unimplemented","Uint8Arrays are not available in this environment.")}function wx(){if(!function Rb(){return typeof atob<"u"}())throw new be("unimplemented","Blobs are unavailable in Firestore in this environment.")}class u0{constructor(e){this._delegate=e}static fromBase64String(e){return wx(),new u0(Mc.fromBase64String(e))}static fromUint8Array(e){return vx(),new u0(Mc.fromUint8Array(e))}toBase64(){return wx(),this._delegate.toBase64()}toUint8Array(){return vx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KT(n){return function rP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class qI extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new u0(new Mc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ma.forKey(t,this.firestore,null)}}class jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new a0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new l0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new jp(e,new qI(e),t),o.set(t,u)),u}}jp.INSTANCES=new WeakMap;class ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ma(t,new Jn(t._delegate,r,new We(e)))}static forKey(e,t,r){return new ma(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new uy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uy(this.firestore,function KA(n,e,...t){if(n=(0,Mt.m9)(n),FT("collection","path",e),n instanceof Jv){const r=Yt.fromString(e,...t);return GA(r),new xc(n,null,r)}{if(!(n instanceof Jn||n instanceof xc))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return GA(r),new xc(n.firestore,null,r)}}(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Mt.m9)(e))instanceof Jn&&ZA(this._delegate,e)}set(e,t){t=function WT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}("DocumentReference.set",t);try{return t?px(this._delegate,e,t):px(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?gx(this._delegate,e):gx(this._delegate,e,t,...r)}catch(o){throw Ts(o,"updateDoc()","DocumentReference.update()")}}delete(){return function FN(n){return ay(sn(n.firestore,er),[new xp(n._key,kn.none())])}(this._delegate)}onSnapshot(...e){const t=bx(e),r=Cx(e,o=>new c0(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return mx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function RN(n){n=sn(n,Jn);const e=sn(n.firestore,er),t=kr(e),r=new Bh(e);return function qR(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,l){try{const y=yield function(I,C){const x=Ze(I);return x.persistence.runTransaction("read document","readonly",N=>x.localDocuments.getDocument(N,C))}(o,u);y.isFoundDocument()?l.resolve(y):y.isNoDocument()?l.resolve(null):l.reject(new be(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const I=ey(y,`Failed to get document '${u} from cache`);l.reject(I)}}),function(o,u,l){return r.apply(this,arguments)})(yield PI(n),e,t);var r})),t.promise}(t,n._key).then(o=>new nd(e,r,n._key,o,new Up(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function NN(n){n=sn(n,Jn);const e=sn(n.firestore,er);return VA(kr(e),n._key,{source:"server"}).then(t=>qT(e,n,t))}(this._delegate):function MN(n){n=sn(n,Jn);const e=sn(n.firestore,er);return VA(kr(e),n._key).then(t=>qT(e,n,t))}(this._delegate),t.then(r=>new c0(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ma(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function bx(n){for(const e of n)if("object"==typeof e&&!KT(e))return e;return{}}function Cx(n,e){var t,r;let o;return o=KT(n[0])?n[0]:KT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class c0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fx(this._delegate,e._delegate)}}class l0 extends c0{data(e){const t=this._delegate.data(e);return function _m(n,e){n||st()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qI(e)}where(e,t,r){try{return new Ss(this.firestore,Lh(this._delegate,function vN(n,e,t){const r=e,o=jI("where",n);return o0._create(o,r,t)}(e,t,r)))}catch(o){throw Ts(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,Lh(this._delegate,function wN(n,e="asc"){const t=e,r=jI("orderBy",n);return GT._create(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,Lh(this._delegate,function EN(n){return zA("limit",n),$I._create("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,Lh(this._delegate,function IN(n){return zA("limitToLast",n),$I._create("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,Lh(this._delegate,function DN(...n){return HI._create("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,Lh(this._delegate,function bN(...n){return HI._create("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,Lh(this._delegate,function CN(...n){return GI._create("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,Lh(this._delegate,function TN(...n){return GI._create("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return LT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ON(n){n=sn(n,Gi);const e=sn(n.firestore,er),t=kr(e),r=new Bh(e);return function WR(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,l){try{const y=yield DI(o,u,!0),I=new TA(u,y.ir),C=I.sc(y.documents),x=I.applyChanges(C,!1);l.resolve(x.snapshot)}catch(y){const I=ey(y,`Failed to execute query '${u} against cache`);l.reject(I)}}),function(o,u,l){return r.apply(this,arguments)})(yield PI(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Vh(e,r,n,o))}(this._delegate):"server"===e?.source?function kN(n){n=sn(n,Gi);const e=sn(n.firestore,er),t=kr(e),r=new Bh(e);return BA(t,n._query,{source:"server"}).then(o=>new Vh(e,r,n,o))}(this._delegate):function PN(n){n=sn(n,Gi);const e=sn(n.firestore,er),t=kr(e),r=new Bh(e);return ox(n._query),BA(t,n._query).then(o=>new Vh(e,r,n,o))}(this._delegate),t.then(r=>new ZT(this.firestore,new Vh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=bx(e),r=Cx(e,o=>new ZT(this.firestore,new Vh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return mx(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}class oP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new l0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ZT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new l0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new oP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new l0(this._firestore,r))})}isEqual(e){return fx(this._delegate,e._delegate)}}class uy extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ma(this.firestore,e):null}doc(e){try{return new ma(this.firestore,void 0===e?kI(this._delegate):kI(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function LN(n,e){const t=sn(n.firestore,er),r=kI(n),o=zI(n.converter,e);return ay(t,[VI(Vp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ma(this.firestore,t))}isEqual(e){return ZA(this._delegate,e._delegate)}withConverter(e){return new uy(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function Tx(n,e){return function lP(n,e=Jc.z){return new Ii.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function QT(n,e){return Tx(n,e).pipe((0,sr.U)(t=>({payload:t,type:"query"})))}function WI(n,e){return QT(n,e).pipe(u_(void 0),$i(),(0,sr.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,y)=>{const I=o.find(x=>x.doc.ref.isEqual(l.ref)),C=t?.payload.docs.find(x=>x.ref.isEqual(l.ref));I&&JSON.stringify(I.doc.metadata)===JSON.stringify(l.metadata)||!I&&C&&JSON.stringify(C.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:l}})}),u}))}function Sx(n,e,t){return WI(n,t).pipe(c_((r,o)=>function hP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function fP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function FS(n,e=El.y){return n=n??l_,(0,Ui.e)((t,r)=>{let o,u=!0;t.subscribe((0,Hr.x)(r,l=>{const y=e(l);(u||!n(o,y))&&(u=!1,o=y,r.next(l))}))})}(),(0,sr.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function XT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Ax(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class xx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=WI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,sr.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(u_(void 0),$i(),Ng(([r,o])=>o.length>0||!r),(0,sr.U)(([r,o])=>o),pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(c_((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ax(e);return Sx(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return QT(this.query,this.afs.schedulers.outsideAngular).pipe((0,sr.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pn.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(pn.iC)}add(e){return this.ref.add(e)}doc(e){return new Mx(this.ref.doc(e),this.afs)}}class Mx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Px(r,t);return new xx(o,u,this.afs)}snapshotChanges(){return function dP(n,e){return Tx(n,e).pipe(u_(void 0),$i(),(0,sr.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,sr.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Un.D)(this.ref.get(e)).pipe(pn.iC)}}class pP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?WI(this.query,this.afs.schedulers.outsideAngular).pipe((0,sr.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ng(t=>t.length>0),pn.iC):WI(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(c_((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ax(e);return Sx(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return QT(this.query,this.afs.schedulers.outsideAngular).pipe((0,sr.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),pn.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(pn.iC)}}const Rx=new g.OlP("angularfire2.enableFirestorePersistence"),Nx=new g.OlP("angularfire2.firestore.persistenceSettings"),gP=new g.OlP("angularfire2.firestore.settings"),mP=new g.OlP("angularfire2.firestore.use-emulator");function Px(n,e=(t=>t)){return{query:e(n),ref:n}}let yP=(()=>{class n{constructor(t,r,o,u,l,y,I,C,x,N,j,W,fe,Ne,Se,dt,_t){this.schedulers=I;const nt=(0,Wn.on)(t,y,r),lt=x;N&&X0(nt,y,j,fe,Ne,Se,W,dt),[this.firestore,this.persistenceEnabled$]=(0,Wn.cc)(`${nt.name}.firestore`,"AngularFirestore",nt.name,()=>{const Rt=y.runOutsideAngular(()=>nt.firestore());if(u&&Rt.settings(u),lt&&Rt.useEmulator(...lt),o&&!ls(l)){const zt=()=>{try{return(0,Un.D)(Rt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Yr){return typeof console<"u"&&console.warn(Yr),Kn(!1)}};return[Rt,y.runOutsideAngular(zt)]}return[Rt,Kn(!1)]},[u,lt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=Px(o,r),y=this.schedulers.ngZone.run(()=>u);return new xx(y,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new pP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Mx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Wn.Dh),g.LFG(Wn.xv,8),g.LFG(Rx,8),g.LFG(gP,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(pn.HU),g.LFG(Nx,8),g.LFG(mP,8),g.LFG(Bg,8),g.LFG(kg,8),g.LFG(Fg,8),g.LFG(Lg,8),g.LFG(a_,8),g.LFG(Vg,8),g.LFG(Q0,8),g.LFG(Mg,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_P=(()=>{class n{constructor(){uc.Z.registerVersion("angularfire",pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Rx,useValue:!0},{provide:Nx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[yP]}),n})();const vP_firebase={apiKey:"AIzaSyAh00qesxvfoqyRiLgFrXhbebV9hHkwTEI",authDomain:"cart-frederik.firebaseapp.com",projectId:"cart-frederik",storageBucket:"cart-frederik.firebasestorage.app",messagingSenderId:"663935402544",appId:"1:663935402544:web:00b7c832de70c729ada3f5"};let wP=(()=>{const e=class{constructor(){this.cart=[{name:"alma",price:150,quantity:4,image:"https://firebasestorage.googleapis.com/v0/b/cart-frederik.firebasestorage.app/o/apple.png?alt=media&token=bd08516a-2a45-408b-9505-8bf85ccee9ee"},{name:"tej",price:300,quantity:2,image:"https://firebasestorage.googleapis.com/v0/b/cart-frederik.firebasestorage.app/o/milk.png?alt=media&token=d7c815ee-d607-415b-9268-799d02c3d06e"},{name:"keny\xe9r",price:200,quantity:1,image:"https://firebasestorage.googleapis.com/v0/b/cart-frederik.firebasestorage.app/o/bread.png?alt=media&token=26055259-5caa-4e4a-b685-e6bab4b7ea8d"}]}getCartItems(){return this.cart}setCartItems(r){this.cart=r}calculateTotal(){let r=0;for(const u of this.cart)r+=u.price*u.quantity;r>3e3&&(r*=.9);const o=this.cart.find(u=>"alma"===u.name);return o&&o.quantity>5&&(r-=o.price*o.quantity*.2),r}};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();const{isArray:EP}=Array,{getPrototypeOf:IP,prototype:DP,keys:bP}=Object;const{isArray:SP}=Array;function MP(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Ox=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Gp=(()=>{class n extends Ox{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Rc=new g.OlP("NgValueAccessor"),PP={provide:Rc,useExisting:(0,g.Gpc)(()=>KI),multi:!0},kP=new g.OlP("CompositionEventMode");let KI=(()=>{class n extends Ox{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function OP(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(kP,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([PP]),g.qOj]}),n})();const FP=!1;function jh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const os=new g.OlP("NgValidators"),$h=new g.OlP("NgAsyncValidators");function ZI(n){return null}function zx(n){return null!=n}function qx(n){const e=(0,g.QGY)(n)?(0,Un.D)(n):n;if(FP&&!(0,g.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new g.vHH(-1101,t)}return e}function Wx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Kx(n,e){return e.map(t=>t(n))}function Zx(n){return n.map(e=>function VP(n){return!n.validate}(e)?e:t=>e.validate(t))}function JT(n){return null!=n?function Yx(n){if(!n)return null;const e=n.filter(zx);return 0==e.length?null:function(t){return Wx(Kx(t,e))}}(Zx(n)):null}function Qx(n){if(!n)return null;const e=n.filter(zx);return 0==e.length?null:function(t){return function RP(...n){const e=(0,_s.jO)(n),{args:t,keys:r}=function CP(n){if(1===n.length){const e=n[0];if(EP(e))return{args:e,keys:null};if(function TP(n){return n&&"object"==typeof n&&IP(n)===DP}(e)){const t=bP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n),o=new Ii.y(u=>{const{length:l}=t;if(!l)return void u.complete();const y=new Array(l);let I=l,C=l;for(let x=0;x<l;x++){let N=!1;(0,si.Xf)(t[x]).subscribe((0,Hr.x)(u,j=>{N||(N=!0,C--),y[x]=j},()=>I--,void 0,()=>{(!I||!N)&&(C||u.next(r?MP(r,y):y),u.complete())}))}});return e?o.pipe(function xP(n){return(0,sr.U)(e=>function AP(n,e){return SP(e)?n(...e):n(e)}(n,e))}(e)):o}(Kx(t,e).map(qx)).pipe((0,sr.U)(Wx))}}function eS(n){return null!=n?Qx(Zx(n)):null}function Xx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tS(n){return n?Array.isArray(n)?n:[n]:[]}function YI(n,e){return Array.isArray(n)?n.includes(e):n===e}function tM(n,e){const t=tS(e);return tS(n).forEach(o=>{YI(t,o)||t.push(o)}),t}function nM(n,e){return tS(e).filter(t=>!YI(n,t))}class rM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class As extends rM{get formDirective(){return null}get path(){return null}}class Hh extends rM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class iM{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let sM=(()=>{class n extends iM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hh,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})();const d0="VALID",XI="INVALID",cy="PENDING",h0="DISABLED";function JI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class cM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===d0}get invalid(){return this.status===XI}get pending(){return this.status==cy}get disabled(){return this.status===h0}get enabled(){return this.status!==h0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nM(e,this._rawAsyncValidators))}hasValidator(e){return YI(this._rawValidators,e)}hasAsyncValidator(e){return YI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=cy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=h0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=d0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===d0||this.status===cy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?h0:d0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=cy,this._hasOwnPendingAsyncValidator=!0;const t=qx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?h0:this.errors?XI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cy)?cy:this._anyControlsHaveStatus(XI)?XI:d0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){JI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function qP(n){return Array.isArray(n)?JT(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function WP(n){return Array.isArray(n)?eS(n):n||null}(this._rawAsyncValidators)}}const ly=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>eD}),eD="always";function f0(n,e,t=eD){(function uS(n,e){const t=function Jx(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Xx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function eM(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Xx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();rD(e._rawValidators,o),rD(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function YP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&lM(n,e)})}(n,e),function XP(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function QP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&lM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ZP(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function rD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function pM(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const gM=class extends cM{constructor(e=null,t,r){super(function sS(n){return(JI(n)?n.validators:n)||null}(t),function oS(n,e){return(JI(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),JI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=pM(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){pM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},o1={provide:Hh,useExisting:(0,g.Gpc)(()=>fS)},_M=(()=>Promise.resolve())();let fS=(()=>{class n extends Hh{constructor(t,r,o,u,l,y){super(),this._changeDetectorRef=l,this.callSetDisabledState=y,this.control=new gM,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function dS(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===KI?t=u:function t1(n){return Object.getPrototypeOf(n.constructor)===Gp}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function lS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){f0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_M.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,g.D6c)(r);_M.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function tD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(As,9),g.Y36(os,10),g.Y36($h,10),g.Y36(Rc,10),g.Y36(g.sBO,8),g.Y36(ly,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([o1]),g.qOj,g.TTD]}),n})();const u1={provide:Rc,useExisting:(0,g.Gpc)(()=>pS),multi:!0};let pS=(()=>{class n extends Gp{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[g._Bn([u1]),g.qOj]}),n})(),vM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();let zp=(()=>{class n{constructor(){this._validator=ZI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ZI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const b1={provide:os,useExisting:(0,g.Gpc)(()=>wS),multi:!0};let wS=(()=>{class n extends zp{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function xM(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>function Lx(n){return e=>{if(jh(e.value)||jh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[g._Bn([b1]),g.qOj]}),n})(),R1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[vM]}),n})(),P1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ly,useValue:t.callSetDisabledState??eD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[R1]}),n})();function O1(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",9)(1,"div",10),g._UZ(2,"img",11),g.TgZ(3,"div",12)(4,"h5",13),g._uU(5),g.qZA(),g.TgZ(6,"p",14),g._uU(7,"\xc1r: "),g.TgZ(8,"span",15),g._uU(9),g.qZA()(),g.TgZ(10,"div",16)(11,"label",17),g._uU(12,"Mennyis\xe9g:"),g.qZA(),g.TgZ(13,"input",18),g.NdJ("ngModelChange",function(o){const l=g.CHM(t).$implicit;return g.KtG(l.quantity=o)}),g.qZA()()()()()}if(2&n){const t=e.$implicit;g.xp6(2),g.s9C("alt",t.name),g.Q6J("src",t.image,g.LSH),g.xp6(3),g.Oqu(t.name),g.xp6(4),g.hij("",t.price," Ft"),g.xp6(4),g.MGl("id","quantity-",t.name,""),g.Q6J("ngModel",t.quantity)}}let k1=(()=>{const e=class{constructor(r){this.cartService=r,this.cartItems=[],this.finalTotal=0}ngOnInit(){this.cartItems=this.cartService.getCartItems(),this.calculateTotal()}calculateTotal(){this.cartService.setCartItems(this.cartItems),this.finalTotal=this.cartService.calculateTotal()}};let n=e;return e.\u0275fac=function(o){return new(o||e)(g.Y36(wP))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-cart"]],decls:13,vars:2,consts:[[1,"container","mt-5"],[1,"text-center","mb-4","text-primary"],[1,"row","justify-content-center"],["class","col-md-4 mb-4",4,"ngFor","ngForOf"],[1,"text-center","mt-4"],[1,"fw-bold","text-success","bg-light","p-3","rounded","shadow-sm"],[1,"text-danger"],[1,"text-center","mt-3"],[1,"btn","btn-lg","btn-primary","px-5","fw-bold","shadow",3,"click"],[1,"col-md-4","mb-4"],[1,"card","h-100","shadow-lg","border-0","rounded-4"],[1,"card-img-top","p-3","rounded-4",2,"object-fit","contain","height","180px","background","#f8f9fa",3,"src","alt"],[1,"card-body","text-center"],[1,"card-title","fw-bold","text-capitalize","text-dark"],[1,"card-text","fs-5","text-secondary"],[1,"fw-bold","text-dark"],[1,"d-flex","justify-content-center","align-items-center","gap-2"],[1,"form-label","mb-0","fw-semibold"],["type","number","min","0",1,"form-control","text-center","fw-bold",2,"width","70px",3,"id","ngModel","ngModelChange"]],template:function(o,u){1&o&&(g.TgZ(0,"div",0)(1,"h2",1),g._uU(2,"Kos\xe1r"),g.qZA(),g.TgZ(3,"div",2),g.YNc(4,O1,14,6,"div",3),g.qZA(),g.TgZ(5,"div",4)(6,"h4",5),g._uU(7," V\xe9g\xf6sszeg: "),g.TgZ(8,"span",6),g._uU(9),g.qZA()()(),g.TgZ(10,"div",7)(11,"button",8),g.NdJ("click",function(){return u.calculateTotal()}),g._uU(12," Sz\xe1mol "),g.qZA()()()),2&o&&(g.xp6(4),g.Q6J("ngForOf",u.cartItems),g.xp6(5),g.hij("",u.finalTotal," Ft"))},dependencies:[Po,KI,pS,sM,wS,fS]}),n})(),F1=(()=>{const e=class{constructor(){this.title="angular-firebase-cart"}};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,u){1&o&&g._UZ(0,"app-cart")},dependencies:[k1]}),n})(),L1=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[ii,P1]}),n})(),V1=(()=>{const e=class{};let n=e;return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=g.oAB({type:e,bootstrap:[F1]}),e.\u0275inj=g.cJS({imports:[Ko,Wn.hO.initializeApp(vP_firebase),_P,FD,z0,L1]}),n})();Kc().bootstrapModule(V1).catch(n=>console.error(n))},8306:(Et,Pe,F)=>{F.d(Pe,{y:()=>z});var g=F(2961),Y=F(727),O=F(8822),ce=F(4671);var we=F(2416),Ee=F(576),De=F(2806);let z=(()=>{class Me{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const de=new Me;return de.source=this,de.operator=Ke,de}subscribe(Ke,de,Ue){const Ce=function Qe(Me){return Me&&Me instanceof g.Lv||function K(Me){return Me&&(0,Ee.m)(Me.next)&&(0,Ee.m)(Me.error)&&(0,Ee.m)(Me.complete)}(Me)&&(0,Y.Nn)(Me)}(Ke)?Ke:new g.Hp(Ke,de,Ue);return(0,De.x)(()=>{const{operator:Be,source:xe}=this;Ce.add(Be?Be.call(Ce,xe):xe?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(de){Ke.error(de)}}forEach(Ke,de){return new(de=$(de))((Ue,Ce)=>{const Be=new g.Hp({next:xe=>{try{Ke(xe)}catch(ve){Ce(ve),Be.unsubscribe()}},error:Ce,complete:Ue});this.subscribe(Be)})}_subscribe(Ke){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Ke)}[O.L](){return this}pipe(...Ke){return function le(Me){return 0===Me.length?ce.y:1===Me.length?Me[0]:function(Ke){return Me.reduce((de,Ue)=>Ue(de),Ke)}}(Ke)(this)}toPromise(Ke){return new(Ke=$(Ke))((de,Ue)=>{let Ce;this.subscribe(Be=>Ce=Be,Be=>Ue(Be),()=>de(Ce))})}}return Me.create=Dt=>new Me(Dt),Me})();function $(Me){var Dt;return null!==(Dt=Me??we.v.Promise)&&void 0!==Dt?Dt:Promise}},7579:(Et,Pe,F)=>{F.d(Pe,{x:()=>we});var g=F(8306),Y=F(727);const ce=(0,F(3888).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=F(8737),le=F(2806);let we=(()=>{class De extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const K=new Ee(this,this);return K.operator=$,K}_throwIfClosed(){if(this.closed)throw new ce}next($){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next($)}})}error($){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:K}=this;for(;K.length;)K.shift().error($)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:K,isStopped:Qe,observers:Me}=this;return K||Qe?Y.Lc:(this.currentObservers=null,Me.push($),new Y.w0(()=>{this.currentObservers=null,(0,oe.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:K,thrownError:Qe,isStopped:Me}=this;K?$.error(Qe):Me&&$.complete()}asObservable(){const $=new g.y;return $.source=this,$}}return De.create=(z,$)=>new Ee(z,$),De})();class Ee extends we{constructor(z,$){super(),this.destination=z,this.source=$}next(z){var $,K;null===(K=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===K||K.call($,z)}error(z){var $,K;null===(K=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===K||K.call($,z)}complete(){var z,$;null===($=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===$||$.call(z)}_subscribe(z){var $,K;return null!==(K=null===($=this.source)||void 0===$?void 0:$.subscribe(z))&&void 0!==K?K:Y.Lc}}},2961:(Et,Pe,F)=>{F.d(Pe,{Hp:()=>Ke,Lv:()=>K});var g=F(576),Y=F(727),O=F(2416),ce=F(7849);function oe(){}const le=De("C",void 0,void 0);function De(xe,ve,Ie){return{kind:xe,value:ve,error:Ie}}var z=F(3410),$=F(2806);class K extends Y.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,Y.Nn)(ve)&&ve.add(this)):this.destination=Be}static create(ve,Ie,Ge){return new Ke(ve,Ie,Ge)}next(ve){this.isStopped?Ce(function Ee(xe){return De("N",xe,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ce(function we(xe){return De("E",void 0,xe)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ce(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function Me(xe,ve){return Qe.call(xe,ve)}class Dt{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ve)}catch(Ge){de(Ge)}}error(ve){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ve)}catch(Ge){de(Ge)}else de(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ie){de(Ie)}}}class Ke extends K{constructor(ve,Ie,Ge){let Oe;if(super(),(0,g.m)(ve)||!ve)Oe={next:ve??void 0,error:Ie??void 0,complete:Ge??void 0};else{let at;this&&O.v.useDeprecatedNextContext?(at=Object.create(ve),at.unsubscribe=()=>this.unsubscribe(),Oe={next:ve.next&&Me(ve.next,at),error:ve.error&&Me(ve.error,at),complete:ve.complete&&Me(ve.complete,at)}):Oe=ve}this.destination=new Dt(Oe)}}function de(xe){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(xe):(0,ce.h)(xe)}function Ce(xe,ve){const{onStoppedNotification:Ie}=O.v;Ie&&z.z.setTimeout(()=>Ie(xe,ve))}const Be={closed:!0,next:oe,error:function Ue(xe){throw xe},complete:oe}},727:(Et,Pe,F)=>{F.d(Pe,{Lc:()=>le,w0:()=>oe,Nn:()=>we});var g=F(576);const O=(0,F(3888).d)(De=>function($){De(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((K,Qe)=>`${Qe+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ce=F(8737);class oe{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:K}=this;if((0,g.m)(K))try{K()}catch(Me){z=Me instanceof O?Me.errors:[Me]}const{_finalizers:Qe}=this;if(Qe){this._finalizers=null;for(const Me of Qe)try{Ee(Me)}catch(Dt){z=z??[],Dt instanceof O?z=[...z,...Dt.errors]:z.push(Dt)}}if(z)throw new O(z)}}add(z){var $;if(z&&z!==this)if(this.closed)Ee(z);else{if(z instanceof oe){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(z)}}_hasParent(z){const{_parentage:$}=this;return $===z||Array.isArray($)&&$.includes(z)}_addParent(z){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(z),$):$?[$,z]:z}_removeParent(z){const{_parentage:$}=this;$===z?this._parentage=null:Array.isArray($)&&(0,ce.P)($,z)}remove(z){const{_finalizers:$}=this;$&&(0,ce.P)($,z),z instanceof oe&&z._removeParent(this)}}oe.EMPTY=(()=>{const De=new oe;return De.closed=!0,De})();const le=oe.EMPTY;function we(De){return De instanceof oe||De&&"closed"in De&&(0,g.m)(De.remove)&&(0,g.m)(De.add)&&(0,g.m)(De.unsubscribe)}function Ee(De){(0,g.m)(De)?De():De.unsubscribe()}},2416:(Et,Pe,F)=>{F.d(Pe,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,Pe,F)=>{F.d(Pe,{E:()=>Y});const Y=new(F(8306).y)(oe=>oe.complete())},8996:(Et,Pe,F)=>{F.d(Pe,{D:()=>ve});var g=F(8421),Y=F(5363),O=F(9468),le=F(8306),Ee=F(2202),De=F(576),z=F(9672);function K(Ie,Ge){if(!Ie)throw new Error("Iterable cannot be null");return new le.y(Oe=>{(0,z.f)(Oe,Ge,()=>{const at=Ie[Symbol.asyncIterator]();(0,z.f)(Oe,Ge,()=>{at.next().then(re=>{re.done?Oe.complete():Oe.next(re.value)})},0,!0)})})}var Qe=F(3670),Me=F(8239),Dt=F(1144),Ke=F(6495),de=F(2206),Ue=F(4532),Ce=F(3260);function ve(Ie,Ge){return Ge?function xe(Ie,Ge){if(null!=Ie){if((0,Qe.c)(Ie))return function ce(Ie,Ge){return(0,g.Xf)(Ie).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Ie,Ge);if((0,Dt.z)(Ie))return function we(Ie,Ge){return new le.y(Oe=>{let at=0;return Ge.schedule(function(){at===Ie.length?Oe.complete():(Oe.next(Ie[at++]),Oe.closed||this.schedule())})})}(Ie,Ge);if((0,Me.t)(Ie))return function oe(Ie,Ge){return(0,g.Xf)(Ie).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Ie,Ge);if((0,de.D)(Ie))return K(Ie,Ge);if((0,Ke.T)(Ie))return function $(Ie,Ge){return new le.y(Oe=>{let at;return(0,z.f)(Oe,Ge,()=>{at=Ie[Ee.h](),(0,z.f)(Oe,Ge,()=>{let re,ht;try{({value:re,done:ht}=at.next())}catch(Je){return void Oe.error(Je)}ht?Oe.complete():Oe.next(re)},0,!0)}),()=>(0,De.m)(at?.return)&&at.return()})}(Ie,Ge);if((0,Ce.L)(Ie))return function Be(Ie,Ge){return K((0,Ce.Q)(Ie),Ge)}(Ie,Ge)}throw(0,Ue.z)(Ie)}(Ie,Ge):(0,g.Xf)(Ie)}},8421:(Et,Pe,F)=>{F.d(Pe,{Xf:()=>Qe});var g=F(7582),Y=F(1144),O=F(8239),ce=F(8306),oe=F(3670),le=F(2206),we=F(4532),Ee=F(6495),De=F(3260),z=F(576),$=F(7849),K=F(8822);function Qe(xe){if(xe instanceof ce.y)return xe;if(null!=xe){if((0,oe.c)(xe))return function Me(xe){return new ce.y(ve=>{const Ie=xe[K.L]();if((0,z.m)(Ie.subscribe))return Ie.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,Y.z)(xe))return function Dt(xe){return new ce.y(ve=>{for(let Ie=0;Ie<xe.length&&!ve.closed;Ie++)ve.next(xe[Ie]);ve.complete()})}(xe);if((0,O.t)(xe))return function Ke(xe){return new ce.y(ve=>{xe.then(Ie=>{ve.closed||(ve.next(Ie),ve.complete())},Ie=>ve.error(Ie)).then(null,$.h)})}(xe);if((0,le.D)(xe))return Ue(xe);if((0,Ee.T)(xe))return function de(xe){return new ce.y(ve=>{for(const Ie of xe)if(ve.next(Ie),ve.closed)return;ve.complete()})}(xe);if((0,De.L)(xe))return function Ce(xe){return Ue((0,De.Q)(xe))}(xe)}throw(0,we.z)(xe)}function Ue(xe){return new ce.y(ve=>{(function Be(xe,ve){var Ie,Ge,Oe,at;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,g.KL)(xe);!(Ge=yield Ie.next()).done;)if(ve.next(Ge.value),ve.closed)return}catch(re){Oe={error:re}}finally{try{Ge&&!Ge.done&&(at=Ie.return)&&(yield at.call(Ie))}finally{if(Oe)throw Oe.error}}ve.complete()})})(xe,ve).catch(Ie=>ve.error(Ie))})}},6451:(Et,Pe,F)=>{F.d(Pe,{T:()=>le});var g=F(6131),Y=F(8421),O=F(515),ce=F(7669),oe=F(8996);function le(...we){const Ee=(0,ce.yG)(we),De=(0,ce._6)(we,1/0),z=we;return z.length?1===z.length?(0,Y.Xf)(z[0]):(0,g.J)(De)((0,oe.D)(z,Ee)):O.E}},5403:(Et,Pe,F)=>{F.d(Pe,{x:()=>Y});var g=F(2961);function Y(ce,oe,le,we,Ee){return new O(ce,oe,le,we,Ee)}class O extends g.Lv{constructor(oe,le,we,Ee,De,z){super(oe),this.onFinalize=De,this.shouldUnsubscribe=z,this._next=le?function($){try{le($)}catch(K){oe.error(K)}}:super._next,this._error=Ee?function($){try{Ee($)}catch(K){oe.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch($){oe.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(Et,Pe,F)=>{F.d(Pe,{U:()=>O});var g=F(4482),Y=F(5403);function O(ce,oe){return(0,g.e)((le,we)=>{let Ee=0;le.subscribe((0,Y.x)(we,De=>{we.next(ce.call(oe,De,Ee++))}))})}},6131:(Et,Pe,F)=>{F.d(Pe,{J:()=>z});var g=F(4004),Y=F(8421),O=F(4482),ce=F(9672),oe=F(5403),we=F(576);function Ee($,K,Qe=1/0){return(0,we.m)(K)?Ee((Me,Dt)=>(0,g.U)((Ke,de)=>K(Me,Ke,Dt,de))((0,Y.Xf)($(Me,Dt))),Qe):("number"==typeof K&&(Qe=K),(0,O.e)((Me,Dt)=>function le($,K,Qe,Me,Dt,Ke,de,Ue){const Ce=[];let Be=0,xe=0,ve=!1;const Ie=()=>{ve&&!Ce.length&&!Be&&K.complete()},Ge=at=>Be<Me?Oe(at):Ce.push(at),Oe=at=>{Ke&&K.next(at),Be++;let re=!1;(0,Y.Xf)(Qe(at,xe++)).subscribe((0,oe.x)(K,ht=>{Dt?.(ht),Ke?Ge(ht):K.next(ht)},()=>{re=!0},void 0,()=>{if(re)try{for(Be--;Ce.length&&Be<Me;){const ht=Ce.shift();de?(0,ce.f)(K,de,()=>Oe(ht)):Oe(ht)}Ie()}catch(ht){K.error(ht)}}))};return $.subscribe((0,oe.x)(K,Ge,()=>{ve=!0,Ie()})),()=>{Ue?.()}}(Me,Dt,$,Qe)))}var De=F(4671);function z($=1/0){return Ee(De.y,$)}},5363:(Et,Pe,F)=>{F.d(Pe,{Q:()=>ce});var g=F(9672),Y=F(4482),O=F(5403);function ce(oe,le=0){return(0,Y.e)((we,Ee)=>{we.subscribe((0,O.x)(Ee,De=>(0,g.f)(Ee,oe,()=>Ee.next(De),le),()=>(0,g.f)(Ee,oe,()=>Ee.complete(),le),De=>(0,g.f)(Ee,oe,()=>Ee.error(De),le)))})}},3099:(Et,Pe,F)=>{F.d(Pe,{B:()=>oe});var g=F(8421),Y=F(7579),O=F(2961),ce=F(4482);function oe(we={}){const{connector:Ee=(()=>new Y.x),resetOnError:De=!0,resetOnComplete:z=!0,resetOnRefCountZero:$=!0}=we;return K=>{let Qe,Me,Dt,Ke=0,de=!1,Ue=!1;const Ce=()=>{Me?.unsubscribe(),Me=void 0},Be=()=>{Ce(),Qe=Dt=void 0,de=Ue=!1},xe=()=>{const ve=Qe;Be(),ve?.unsubscribe()};return(0,ce.e)((ve,Ie)=>{Ke++,!Ue&&!de&&Ce();const Ge=Dt=Dt??Ee();Ie.add(()=>{Ke--,0===Ke&&!Ue&&!de&&(Me=le(xe,$))}),Ge.subscribe(Ie),!Qe&&Ke>0&&(Qe=new O.Hp({next:Oe=>Ge.next(Oe),error:Oe=>{Ue=!0,Ce(),Me=le(Be,De,Oe),Ge.error(Oe)},complete:()=>{de=!0,Ce(),Me=le(Be,z),Ge.complete()}}),(0,g.Xf)(ve).subscribe(Qe))})(K)}}function le(we,Ee,...De){if(!0===Ee)return void we();if(!1===Ee)return;const z=new O.Hp({next:()=>{z.unsubscribe(),we()}});return(0,g.Xf)(Ee(...De)).subscribe(z)}},9468:(Et,Pe,F)=>{F.d(Pe,{R:()=>Y});var g=F(4482);function Y(O,ce=0){return(0,g.e)((oe,le)=>{le.add(O.schedule(()=>oe.subscribe(le),ce))})}},4408:(Et,Pe,F)=>{F.d(Pe,{o:()=>oe});var g=F(727);class Y extends g.w0{constructor(we,Ee){super()}schedule(we,Ee=0){return this}}const O={setInterval(le,we,...Ee){const{delegate:De}=O;return De?.setInterval?De.setInterval(le,we,...Ee):setInterval(le,we,...Ee)},clearInterval(le){const{delegate:we}=O;return(we?.clearInterval||clearInterval)(le)},delegate:void 0};var ce=F(8737);class oe extends Y{constructor(we,Ee){super(we,Ee),this.scheduler=we,this.work=Ee,this.pending=!1}schedule(we,Ee=0){var De;if(this.closed)return this;this.state=we;const z=this.id,$=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId($,z,Ee)),this.pending=!0,this.delay=Ee,this.id=null!==(De=this.id)&&void 0!==De?De:this.requestAsyncId($,this.id,Ee),this}requestAsyncId(we,Ee,De=0){return O.setInterval(we.flush.bind(we,this),De)}recycleAsyncId(we,Ee,De=0){if(null!=De&&this.delay===De&&!1===this.pending)return Ee;null!=Ee&&O.clearInterval(Ee)}execute(we,Ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(we,Ee);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,Ee){let z,De=!1;try{this.work(we)}catch($){De=!0,z=$||new Error("Scheduled action threw falsy error")}if(De)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:we,scheduler:Ee}=this,{actions:De}=Ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(De,this),null!=we&&(this.id=this.recycleAsyncId(Ee,we,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,Pe,F)=>{F.d(Pe,{v:()=>O});var g=F(6063);class Y{constructor(oe,le=Y.now){this.schedulerActionCtor=oe,this.now=le}schedule(oe,le=0,we){return new this.schedulerActionCtor(this,oe).schedule(we,le)}}Y.now=g.l.now;class O extends Y{constructor(oe,le=Y.now){super(oe,le),this.actions=[],this._active=!1}flush(oe){const{actions:le}=this;if(this._active)return void le.push(oe);let we;this._active=!0;do{if(we=oe.execute(oe.state,oe.delay))break}while(oe=le.shift());if(this._active=!1,we){for(;oe=le.shift();)oe.unsubscribe();throw we}}}},4986:(Et,Pe,F)=>{F.d(Pe,{z:()=>O});var g=F(4408);const O=new(F(7565).v)(g.o)},6063:(Et,Pe,F)=>{F.d(Pe,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Et,Pe,F)=>{F.d(Pe,{z:()=>g});const g={setTimeout(Y,O,...ce){const{delegate:oe}=g;return oe?.setTimeout?oe.setTimeout(Y,O,...ce):setTimeout(Y,O,...ce)},clearTimeout(Y){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(Et,Pe,F)=>{F.d(Pe,{h:()=>Y});const Y=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,Pe,F)=>{F.d(Pe,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Et,Pe,F)=>{F.d(Pe,{_6:()=>le,jO:()=>ce,yG:()=>oe});var g=F(576);function O(we){return we[we.length-1]}function ce(we){return(0,g.m)(O(we))?we.pop():void 0}function oe(we){return function Y(we){return we&&(0,g.m)(we.schedule)}(O(we))?we.pop():void 0}function le(we,Ee){return"number"==typeof O(we)?we.pop():Ee}},8737:(Et,Pe,F)=>{function g(Y,O){if(Y){const ce=Y.indexOf(O);0<=ce&&Y.splice(ce,1)}}F.d(Pe,{P:()=>g})},3888:(Et,Pe,F)=>{function g(Y){const ce=Y(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}F.d(Pe,{d:()=>g})},2806:(Et,Pe,F)=>{F.d(Pe,{O:()=>ce,x:()=>O});var g=F(2416);let Y=null;function O(oe){if(g.v.useDeprecatedSynchronousErrorHandling){const le=!Y;if(le&&(Y={errorThrown:!1,error:null}),oe(),le){const{errorThrown:we,error:Ee}=Y;if(Y=null,we)throw Ee}}else oe()}function ce(oe){g.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=oe)}},9672:(Et,Pe,F)=>{function g(Y,O,ce,oe=0,le=!1){const we=O.schedule(function(){ce(),le?Y.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(Y.add(we),!le)return we}F.d(Pe,{f:()=>g})},4671:(Et,Pe,F)=>{function g(Y){return Y}F.d(Pe,{y:()=>g})},1144:(Et,Pe,F)=>{F.d(Pe,{z:()=>g});const g=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(Et,Pe,F)=>{F.d(Pe,{D:()=>Y});var g=F(576);function Y(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(Et,Pe,F)=>{function g(Y){return"function"==typeof Y}F.d(Pe,{m:()=>g})},3670:(Et,Pe,F)=>{F.d(Pe,{c:()=>O});var g=F(8822),Y=F(576);function O(ce){return(0,Y.m)(ce[g.L])}},6495:(Et,Pe,F)=>{F.d(Pe,{T:()=>O});var g=F(2202),Y=F(576);function O(ce){return(0,Y.m)(ce?.[g.h])}},8239:(Et,Pe,F)=>{F.d(Pe,{t:()=>Y});var g=F(576);function Y(O){return(0,g.m)(O?.then)}},3260:(Et,Pe,F)=>{F.d(Pe,{L:()=>ce,Q:()=>O});var g=F(7582),Y=F(576);function O(oe){return(0,g.FC)(this,arguments,function*(){const we=oe.getReader();try{for(;;){const{value:Ee,done:De}=yield(0,g.qq)(we.read());if(De)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Ee)}}finally{we.releaseLock()}})}function ce(oe){return(0,Y.m)(oe?.getReader)}},4482:(Et,Pe,F)=>{F.d(Pe,{e:()=>O});var g=F(576);function O(ce){return oe=>{if(function Y(ce){return(0,g.m)(ce?.lift)}(oe))return oe.lift(function(le){try{return ce(le,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Et,Pe,F)=>{F.d(Pe,{h:()=>O});var g=F(2416),Y=F(3410);function O(ce){Y.z.setTimeout(()=>{const{onUnhandledError:oe}=g.v;if(!oe)throw ce;oe(ce)})}},4532:(Et,Pe,F)=>{function g(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Pe,{z:()=>g})},4650:(Et,Pe,F)=>{F.d(Pe,{$8M:()=>Wo,AFp:()=>qE,AaK:()=>Ee,CHM:()=>Ca,CZH:()=>bh,CqO:()=>rh,D6c:()=>Ac,EJc:()=>YE,EpF:()=>Xg,F4k:()=>Zf,FYo:()=>Tg,FiY:()=>Yo,GfV:()=>Sg,Gpc:()=>$,JOm:()=>Zn,KtG:()=>Ta,LFG:()=>nn,LSH:()=>pl,Lbi:()=>KE,Lck:()=>yE,MGl:()=>Pl,NdJ:()=>Jg,OlP:()=>Wt,Oqu:()=>cm,Q6J:()=>li,QGY:()=>Kf,Qsj:()=>hD,R0b:()=>pi,RDi:()=>pg,Rgc:()=>ha,SBq:()=>Nf,TTD:()=>Fc,TgZ:()=>Rl,X6Q:()=>Bv,Xpm:()=>Fi,Y36:()=>wl,YNc:()=>T_,Yjl:()=>Ut,Yz7:()=>ye,ZZ4:()=>Rh,_Bn:()=>mE,_UZ:()=>Wf,_c5:()=>Oh,_uU:()=>Bw,aQg:()=>ga,cJS:()=>Nt,cg1:()=>ch,dDg:()=>rI,dqk:()=>Qt,eFA:()=>Xl,ekj:()=>k_,eoX:()=>Pv,f3M:()=>Rn,g9A:()=>bv,h0i:()=>Gl,hGG:()=>wI,hij:()=>ah,ifc:()=>me,ip1:()=>Fm,kL8:()=>lh,lG2:()=>It,lri:()=>Nv,n5z:()=>Lu,oAB:()=>te,q4F:()=>Ag,qLn:()=>yl,qOj:()=>Bf,qZA:()=>qf,rWj:()=>Th,s9C:()=>tm,sBO:()=>fI,s_b:()=>nu,soG:()=>Mp,uIk:()=>$f,vHH:()=>de,vpe:()=>hi,wAp:()=>wt,xp6:()=>ED,zSh:()=>zd,zs3:()=>_l});var g=F(7579),Y=F(727),O=F(8306),ce=F(6451),oe=F(3099);function le(i){for(let s in i)if(i[s]===le)return s;throw Error("Could not find renamed property on target object.")}function we(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function Ee(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Ee).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function De(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const z=le({__forward_ref__:le});function $(i){return i.__forward_ref__=$,i.toString=function(){return Ee(this())},i}function K(i){return Qe(i)?i():i}function Qe(i){return"function"==typeof i&&i.hasOwnProperty(z)&&i.__forward_ref__===$}function Me(i){return i&&!!i.\u0275providers}const Ke="https://g.co/ng/security#xss";class de extends Error{constructor(s,a){super(Ue(s,a)),this.code=s}}function Ue(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}function Ce(i){return"string"==typeof i?i:null==i?"":String(i)}function Ge(i,s){throw new de(-201,!1)}function ee(i,s){null==i&&function Q(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function ye(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Nt(i){return{providers:i.providers||[],imports:i.imports||[]}}function rn(i){return cn(i,Ht)||cn(i,jn)}function cn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Fr(i){return i&&(i.hasOwnProperty(Fn)||i.hasOwnProperty(wn))?i[Fn]:null}const Ht=le({\u0275prov:le}),Fn=le({\u0275inj:le}),jn=le({ngInjectableDef:le}),wn=le({ngInjectorDef:le});var it=(()=>((it=it||{})[it.Default=0]="Default",it[it.Host=1]="Host",it[it.Self=2]="Self",it[it.SkipSelf=4]="SkipSelf",it[it.Optional=8]="Optional",it))();let Xr;function wr(i){const s=Xr;return Xr=i,s}function Lr(i,s,a){const c=rn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&it.Optional?null:void 0!==s?s:void Ge(Ee(i))}const Qt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),gi={},Jr="__NG_DI_FLAG__",dr="ngTempTokenPath",Vr="ngTokenPath",Sn=/\n/gm,ei="\u0275",hn="__source";let Ms;function qt(i){const s=Ms;return Ms=i,s}function Wi(i,s=it.Default){if(void 0===Ms)throw new de(-203,!1);return null===Ms?Lr(i,void 0,s):Ms.get(i,s&it.Optional?null:void 0,s)}function nn(i,s=it.Default){return(function Nc(){return Xr}()||Wi)(K(i),s)}function Rn(i,s=it.Default){return nn(i,$n(s))}function $n(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Oi(i){const s=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new de(900,!1);let d,p=it.Default;for(let _=0;_<c.length;_++){const E=c[_],b=ki(E);"number"==typeof b?-1===b?d=E.token:p|=b:d=E}s.push(nn(d,p))}else s.push(nn(c))}return s}function En(i,s){return i[Jr]=s,i.prototype[Jr]=s,i}function ki(i){return i[Jr]}function L(i){return{toString:i}.toString()}var G=(()=>((G=G||{})[G.OnPush=0]="OnPush",G[G.Default=1]="Default",G))(),me=(()=>{return(i=me||(me={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",me;var i})();const X={},Le=[],Ct=le({\u0275cmp:le}),Kt=le({\u0275dir:le}),Ln=le({\u0275pipe:le}),bn=le({\u0275mod:le}),on=le({\u0275fac:le}),Gt=le({__NG_ELEMENT_ID__:le});let Sr=0;function Fi(i){return L(()=>{const s=uu(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===G.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||me.Emulated,id:"c"+Sr++,styles:i.styles||Le,_:null,schemas:i.schemas||null,tView:null};Gh(a);const c=i.dependencies;return a.directiveDefs=No(c,!1),a.pipeDefs=No(c,!0),a})}function ya(i){return pt(i)||Xt(i)}function he(i){return null!==i}function te(i){return L(()=>({type:i.type,bootstrap:i.bootstrap||Le,declarations:i.declarations||Le,imports:i.imports||Le,exports:i.exports||Le,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function ft(i,s){if(null==i)return X;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,s&&(s[d]=p)}return a}function It(i){return L(()=>{const s=uu(i);return Gh(s),s})}function Ut(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function pt(i){return i[Ct]||null}function Xt(i){return i[Kt]||null}function Zt(i){return i[Ln]||null}function uu(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Le,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ft(i.inputs,s),outputs:ft(i.outputs)}}function Gh(i){i.features?.forEach(s=>s(i))}function No(i,s){if(!i)return null;const a=s?Zt:ya;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(he)}const yi=0,ze=1,Pt=2,In=3,_i=4,ln=5,Gn=6,Po=7,Nn=8,_a=9,Ks=10,Vt=11,va=12,Zs=13,as=14,Ys=15,Vn=16,Oo=17,us=18,Zi=19,ko=20,Ir=21,_n=22,wa=1,Pc=2,Fo=7,Rs=8,Qs=9,hr=10;function ni(i){return Array.isArray(i)&&"object"==typeof i[wa]}function ri(i){return Array.isArray(i)&&!0===i[wa]}function Ea(i){return 0!=(4&i.flags)}function Lo(i){return i.componentOffset>-1}function Oc(i){return 1==(1&i.flags)}function vi(i){return!!i.template}function lu(i){return 0!=(256&i[Pt])}function Yi(i,s){return i.hasOwnProperty(on)?i[on]:null}class Xs{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Fc(){return fu}function fu(i){return i.type.prototype.ngOnChanges&&(i.setInput=Lc),Kh}function Kh(){const i=Zh(this),s=i?.current;if(s){const a=i.previous;if(a===X)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Lc(i,s,a,c){const d=this.declaredInputs[a],p=Zh(i)||function pu(i,s){return i[Ns]=s}(i,{previous:X,current:null}),_=p.current||(p.current={}),E=p.previous,b=E[d];_[d]=new Xs(b&&b.currentValue,s,E===X),i[c]=s}Fc.ngInherit=!0;const Ns="__ngSimpleChanges__";function Zh(i){return i[Ns]||null}const Ur=function(i,s,a){};function fr(i){for(;Array.isArray(i);)i=i[yi];return i}function ds(i,s){return fr(s[i])}function pr(i,s){return fr(s[i.index])}function ud(i,s){return i.data[s]}function tr(i,s){const a=s[i];return ni(a)?a:a[yi]}function hs(i){return 64==(64&i[Pt])}function Os(i,s){return null==s?null:i[s]}function Uo(i){i[us]=0}function Da(i,s){i[ln]+=s;let a=i,c=i[In];for(;null!==c&&(1===s&&1===a[ln]||-1===s&&0===a[ln]);)c[ln]+=s,a=c,c=c[In]}const xt={lFrame:Uc(null),bindingsEnabled:!0};function _u(){return xt.bindingsEnabled}function pe(){return xt.lFrame.lView}function Ot(){return xt.lFrame.tView}function Ca(i){return xt.lFrame.contextLView=i,i[Nn]}function Ta(i){return xt.lFrame.contextLView=null,i}function nr(){let i=Js();for(;null!==i&&64===i.type;)i=i.parent;return i}function Js(){return xt.lFrame.currentTNode}function jr(i,s){const a=xt.lFrame;a.currentTNode=i,a.isParent=s}function fd(){return xt.lFrame.isParent}function eo(){return xt.lFrame.bindingIndex++}function Eu(i,s){const a=xt.lFrame;a.bindingIndex=a.bindingRootIndex=i,qn(s)}function qn(i){xt.lFrame.currentDirectiveIndex=i}function Iu(i){xt.lFrame.currentQueryIndex=i}function gd(i){const s=i[ze];return 2===s.type?s.declTNode:1===s.type?i[Gn]:null}function Du(i,s,a){if(a&it.SkipSelf){let d=s,p=i;for(;!(d=d.parent,null!==d||a&it.Host||(d=gd(p),null===d||(p=p[Ys],10&d.type))););if(null===d)return!1;s=d,i=p}const c=xt.lFrame=xa();return c.currentTNode=s,c.lView=i,!0}function bu(i){const s=xa(),a=i[ze];xt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function xa(){const i=xt.lFrame,s=null===i?null:i.child;return null===s?Uc(i):s}function Uc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Ma(){const i=xt.lFrame;return xt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const md=Ma;function Cu(){const i=Ma();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Dr(){return xt.lFrame.selectedIndex}function ps(i){xt.lFrame.selectedIndex=i}function Cn(){const i=xt.lFrame;return ud(i.tView,i.selectedIndex)}function Au(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:R}=p;_&&(i.contentHooks??(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks??(i.contentHooks=[])).push(a,E),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks??(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks??(i.viewHooks=[])).push(a,A),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(a,A)),null!=R&&(i.destroyHooks??(i.destroyHooks=[])).push(a,R)}}function jc(i,s,a){Hc(i,s,3,a)}function $c(i,s,a,c){(3&i[Pt])===a&&Hc(i,s,a,c)}function _d(i,s){let a=i[Pt];(3&a)===s&&(a&=2047,a+=1,i[Pt]=a)}function Hc(i,s,a,c){const p=c??-1,_=s.length-1;let E=0;for(let b=void 0!==c?65535&i[us]:0;b<_;b++)if("number"==typeof s[b+1]){if(E=s[b],null!=c&&E>=c)break}else s[b]<0&&(i[us]+=65536),(E<p||-1==p)&&($o(i,a,s,b),i[us]=(4294901760&i[us])+b+2),b++}function $o(i,s,a,c){const d=a[c]<0,p=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[Pt]>>11<i[us]>>16&&(3&i[Pt])===s){i[Pt]+=2048,Ur(4,E,p);try{p.call(E)}finally{Ur(5,E,p)}}}else{Ur(4,E,p);try{p.call(E)}finally{Ur(5,E,p)}}}const Ho=-1;class gs{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Go(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],_=a[c++],E=a[c++];i.setAttribute(s,_,E,p)}else{const p=d,_=a[++c];io(p)?i.setProperty(s,p,_):i.setAttribute(s,p,_),c++}}return c}function Gc(i){return 3===i||4===i||6===i}function io(i){return 64===i.charCodeAt(0)}function so(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||Ru(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function Ru(i,s,a,c,d){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}function oo(i){return i!==Ho}function ks(i){return 32767&i}function ao(i,s){let a=function vd(i){return i>>16}(i),c=s;for(;a>0;)c=c[Ys],a--;return c}let Nu=!0;function Na(i){const s=Nu;return Nu=i,s}const Pu=255,wd=5;let uo=0;const Vi={};function zc(i,s){const a=qo(i,s);if(-1!==a)return a;const c=s[ze];c.firstCreatePass&&(i.injectorIndex=s.length,zo(c.data,i),zo(s,null),zo(c.blueprint,null));const d=Ed(i,s),p=i.injectorIndex;if(oo(d)){const _=ks(d),E=ao(d,s),b=E[ze].data;for(let A=0;A<8;A++)s[p+A]=E[_+A]|b[_+A]}return s[p+8]=d,p}function zo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function qo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ed(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=ka(d),null===c)return Ho;if(a++,d=d[Ys],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Ho}function fn(i,s,a){!function ms(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Gt)&&(c=a[Gt]),null==c&&(c=a[Gt]=uo++);const d=c&Pu;s.data[i+(d>>wd)]|=1<<d}(i,s,a)}function Ou(i,s,a){if(a&it.Optional||void 0!==i)return i;Ge()}function qc(i,s,a,c){if(a&it.Optional&&void 0===c&&(c=null),!(a&(it.Self|it.Host))){const d=i[_a],p=wr(void 0);try{return d?d.get(s,c,a&it.Optional):Lr(s,c,a&it.Optional)}finally{wr(p)}}return Ou(c,0,a)}function ku(i,s,a,c=it.Default,d){if(null!==i){if(1024&s[Pt]){const _=function Kc(i,s,a,c,d){let p=i,_=s;for(;null!==p&&null!==_&&1024&_[Pt]&&!(256&_[Pt]);){const E=Fu(p,_,a,c|it.Self,Vi);if(E!==Vi)return E;let b=p.parent;if(!b){const A=_[Ir];if(A){const R=A.get(a,Vi,c);if(R!==Vi)return R}b=ka(_),_=_[Ys]}p=b}return d}(i,s,a,c,Vi);if(_!==Vi)return _}const p=Fu(i,s,a,c,Vi);if(p!==Vi)return p}return qc(s,a,c,d)}function Fu(i,s,a,c,d){const p=function Wc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Gt)?i[Gt]:void 0;return"number"==typeof s?s>=0?s&Pu:tf:s}(a);if("function"==typeof p){if(!Du(s,i,c))return c&it.Host?Ou(d,0,c):qc(s,a,c,d);try{const _=p(c);if(null!=_||c&it.Optional)return _;Ge()}finally{md()}}else if("number"==typeof p){let _=null,E=qo(i,s),b=Ho,A=c&it.Host?s[Vn][Gn]:null;for((-1===E||c&it.SkipSelf)&&(b=-1===E?Ed(i,s):s[E+8],b!==Ho&&Oa(c,!1)?(_=s[ze],E=ks(b),s=ao(b,s)):E=-1);-1!==E;){const R=s[ze];if(Pa(p,E,R.data)){const k=rr(E,s,a,_,c,A);if(k!==Vi)return k}b=s[E+8],b!==Ho&&Oa(c,s[ze].data[E+8]===A)&&Pa(p,E,s)?(_=R,E=ks(b),s=ao(b,s)):E=-1}}return d}function rr(i,s,a,c,d,p){const _=s[ze],E=_.data[i+8],R=function co(i,s,a,c,d){const p=i.providerIndexes,_=s.data,E=1048575&p,b=i.directiveStart,R=p>>20,H=d?E+R:i.directiveEnd;for(let J=c?E:E+R;J<H;J++){const _e=_[J];if(J<b&&a===_e||J>=b&&_e.type===a)return J}if(d){const J=_[b];if(J&&vi(J)&&J.type===a)return b}return null}(E,_,a,null==c?Lo(E)&&Nu:c!=_&&0!=(3&E.type),d&it.Host&&p===E);return null!==R?Bn(s,_,R,E):Vi}function Bn(i,s,a,c){let d=i[a];const p=s.data;if(function Jp(i){return i instanceof gs}(d)){const _=d;_.resolving&&function xe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new de(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ce(i)}(p[a]));const E=Na(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?wr(_.injectImpl):null;Du(i,c,it.Default);try{d=i[a]=_.factory(void 0,p,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Xp(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=s.type.prototype;if(c){const _=fu(s);(a.preOrderHooks??(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks??(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==b&&wr(b),Na(E),_.resolving=!1,md()}}return d}function Pa(i,s,a){return!!(a[s+(i>>wd)]&1<<i)}function Oa(i,s){return!(i&it.Self||i&it.Host&&s)}class ys{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return ku(this._tNode,this._lView,s,$n(c),a)}}function tf(){return new ys(nr(),pe())}function Lu(i){return L(()=>{const s=i.prototype.constructor,a=s[on]||lo(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[on]||lo(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function lo(i){return Qe(i)?()=>{const s=lo(K(i));return s&&s()}:Yi(i)}function ka(i){const s=i[ze],a=s.type;return 2===a?s.declTNode:1===a?i[Gn]:null}function Wo(i){return function Id(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(Gc(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===s)return a[d+1];d+=2}}}return null}(nr(),i)}const Ko="__parameters__";function Zo(i,s,a){return L(()=>{const c=function ho(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...p){if(this instanceof d)return c.apply(this,p),this;const _=new d(...p);return E.annotation=_,E;function E(b,A,R){const k=b.hasOwnProperty(Ko)?b[Ko]:Object.defineProperty(b,Ko,{value:[]})[Ko];for(;k.length<=R;)k.push(null);return(k[R]=k[R]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Wt{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ye({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Xi(i,s){i.forEach(a=>Array.isArray(a)?Xi(a,s):s(a))}function af(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function po(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function $r(i,s,a){let c=Ii(i,s);return c>=0?i[1|c]=a:(c=~c,function Xc(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Wn(i,s){const a=Ii(i,s);if(a>=0)return i[1|a]}function Ii(i,s){return function Un(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),_=i[p<<a];if(s===_)return p<<a;_>s?d=p:c=p+1}return~(d<<a)}(i,s,1)}const Yo=En(Zo("Optional"),8),oi=En(Zo("SkipSelf"),4);var Zn=(()=>((Zn=Zn||{})[Zn.Important=1]="Important",Zn[Zn.DashCase=2]="DashCase",Zn))();const Di=new Map;let pf=0;const D="__ngContext__";function S(i,s){ni(s)?(i[D]=s[ko],function gf(i){Di.set(i[ko],i)}(s)):i[D]=s}let yo;function Qo(i,s){return yo(i,s)}function un(i){const s=i[In];return ri(s)?s[In]:s}function Xo(i){return yf(i[Zs])}function Ju(i){return yf(i[_i])}function yf(i){for(;null!==i&&!ri(i);)i=i[_i];return i}function Jo(i,s,a,c,d){if(null!=c){let p,_=!1;ri(c)?p=c:ni(c)&&(_=!0,c=c[yi]);const E=fr(c);0===i&&null!==a?null==d?Vd(s,a,E):$a(s,a,E,d||null,!0):1===i&&null!==a?$a(s,a,E,d||null,!0):2===i?function Df(i,s,a){const c=nc(i,s);c&&function ag(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function Iy(i,s,a,c,d){const p=a[Fo];p!==fr(a)&&Jo(s,i,c,p,d);for(let E=hr;E<a.length;E++){const b=a[E];ai(b[ze],b,i,s,c,p)}}(s,i,p,a,d)}}function Fd(i,s,a){return i.createElement(s,a)}function ig(i,s){const a=i[Qs],c=a.indexOf(s),d=s[In];512&s[Pt]&&(s[Pt]&=-513,Da(d,-1)),a.splice(c,1)}function Hs(i,s){if(i.length<=hr)return;const a=hr+s,c=i[a];if(c){const d=c[Oo];null!==d&&d!==i&&ig(d,c),s>0&&(i[a-1][_i]=c[_i]);const p=po(i,hr+s);!function _y(i,s){ai(i,s,s[Vt],2,null,null),s[yi]=null,s[Gn]=null}(c[ze],c);const _=p[Zi];null!==_&&_.detachView(p[ze]),c[In]=null,c[_i]=null,c[Pt]&=-65}return c}function ec(i,s){if(!(128&s[Pt])){const a=s[Vt];a.destroyNode&&ai(i,s,a,3,null,null),function vo(i){let s=i[Zs];if(!s)return tc(i[ze],i);for(;s;){let a=null;if(ni(s))a=s[Zs];else{const c=s[hr];c&&(a=c)}if(!a){for(;s&&!s[_i]&&s!==i;)ni(s)&&tc(s[ze],s),s=s[In];null===s&&(s=i),ni(s)&&tc(s[ze],s),a=s&&s[_i]}s=a}}(s)}}function tc(i,s){if(!(128&s[Pt])){s[Pt]&=-65,s[Pt]|=128,function sg(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof gs)){const p=a[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=d[p[_]],b=p[_+1];Ur(4,E,b);try{b.call(E)}finally{Ur(5,E,b)}}else{Ur(4,d,p);try{p.call(d)}finally{Ur(5,d,p)}}}}}(i,s),function wy(i,s){const a=i.cleanup,c=s[Po];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+3];_>=0?c[d=_]():c[d=-_].unsubscribe(),p+=2}else{const _=c[d=a[p+1]];a[p].call(_)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();s[Po]=null}}(i,s),1===s[ze].type&&s[Vt].destroy();const a=s[Oo];if(null!==a&&ri(s[In])){a!==s[In]&&ig(a,s);const c=s[Zi];null!==c&&c.detachView(i)}!function Pd(i){Di.delete(i[ko])}(s)}}function Ld(i,s,a){return function og(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[yi];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===me.None||p===me.Emulated)return null}return pr(c,a)}}(i,s.parent,a)}function $a(i,s,a,c,d){i.insertBefore(s,a,c,d)}function Vd(i,s,a){i.appendChild(s,a)}function vf(i,s,a,c,d){null!==c?$a(i,s,a,c,d):Vd(i,s,a)}function nc(i,s){return i.parentNode(s)}let If,ic,ug=function cl(i,s,a){return 40&i.type?pr(i,a):null};function ea(i,s,a,c){const d=Ld(i,c,s),p=s[Vt],E=function Ef(i,s,a){return ug(i,s,a)}(c.parent||s[Gn],c,s);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)vf(p,d,a[b],E,!1);else vf(p,d,a,E,!1);void 0!==If&&If(p,c,s,a,d)}function Bd(i,s){if(null!==s){const a=s.type;if(3&a)return pr(s,i);if(4&a)return Ga(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Bd(i,c);{const d=i[s.index];return ri(d)?Ga(-1,d):fr(d)}}if(32&a)return Qo(s,i)()||fr(i[s.index]);{const c=Ha(i,s);return null!==c?Array.isArray(c)?c[0]:Bd(un(i[Vn]),c):Bd(i,s.next)}}return null}function Ha(i,s){return null!==s?i[Vn][Gn].projection[s.projection]:null}function Ga(i,s){const a=hr+i+1;if(a<s.length){const c=s[a],d=c[ze].firstChild;if(null!==d)return Bd(c,d)}return s[Fo]}function bf(i,s,a,c,d,p,_){for(;null!=a;){const E=c[a.index],b=a.type;if(_&&0===s&&(E&&S(fr(E),c),a.flags|=2),32!=(32&a.flags))if(8&b)bf(i,s,a.child,c,d,p,!1),Jo(s,i,d,E,p);else if(32&b){const A=Qo(a,c);let R;for(;R=A();)Jo(s,i,d,R,p);Jo(s,i,d,E,p)}else 16&b?lg(i,s,c,a,d,p):Jo(s,i,d,E,p);a=_?a.projectionNext:a.next}}function ai(i,s,a,c,d,p){bf(a,c,i.firstChild,s,d,p,!1)}function lg(i,s,a,c,d,p){const _=a[Vn],b=_[Gn].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Jo(s,i,d,b[A],p);else bf(i,s,b,_[In],d,p,!0)}function es(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function hg(i,s,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&Go(i,s,c),null!==d&&es(i,s,d),null!==p&&function dg(i,s,a){i.setAttribute(s,"style",a)}(i,s,p)}function pg(i){ic=i}class Sf{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ke})`}}function zr(i){return i instanceof Sf?i.changingThisBreaksApplicationSecurity:i}const xf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var An=(()=>((An=An||{})[An.NONE=0]="NONE",An[An.HTML=1]="HTML",An[An.STYLE=2]="STYLE",An[An.SCRIPT=3]="SCRIPT",An[An.URL=4]="URL",An[An.RESOURCE_URL=5]="RESOURCE_URL",An))();function pl(i){const s=function Ig(){const i=pe();return i&&i[va]}();return s?s.sanitize(An.URL,i)||"":function za(i,s){const a=function g0(i){return i instanceof Sf&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${Ke})`)}return a===s}(i,"URL")?zr(i):function Gd(i){return(i=String(i)).match(xf)?i:"unsafe:"+i}(Ce(i))}const qa=new Wt("ENVIRONMENT_INITIALIZER"),Dg=new Wt("INJECTOR",-1),ky=new Wt("INJECTOR_DEF_TYPES");class _0{get(s,a=gi){if(a===gi){const c=new Error(`NullInjectorError: No provider for ${Ee(s)}!`);throw c.name="NullInjectorError",c}return a}}function uD(...i){return{\u0275providers:Rf(0,i),\u0275fromNgModule:!0}}function Rf(i,...s){const a=[],c=new Set;let d;return Xi(s,p=>{const _=p;Fy(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&bg(d,a),a}function bg(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Ly(d,p=>{s.push(p)})}}function Fy(i,s,a,c){if(!(i=K(i)))return!1;let d=null,p=Fr(i);const _=!p&&pt(i);if(p||_){if(_&&!_.standalone)return!1;d=i}else{const b=i.ngModule;if(p=Fr(b),!p)return!1;d=b}const E=c.has(d);if(_){if(E)return!1;if(c.add(d),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of b)Fy(A,s,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let A;c.add(d);try{Xi(p.imports,R=>{Fy(R,s,a,c)&&(A||(A=[]),A.push(R))})}finally{}void 0!==A&&bg(A,s)}if(!E){const A=Yi(d)||(()=>new d);s.push({provide:d,useFactory:A,deps:Le},{provide:ky,useValue:d,multi:!0},{provide:qa,useValue:()=>nn(d),multi:!0})}const b=p.providers;null==b||E||Ly(b,R=>{s.push(R)})}}return d!==i&&void 0!==i.providers}function Ly(i,s){for(let a of i)Me(a)&&(a=a.\u0275providers),Array.isArray(a)?Ly(a,s):s(a)}const v0=le({provide:String,useValue:le});function Vy(i){return null!==i&&"object"==typeof i&&v0 in i}function gl(i){return"function"==typeof i}const zd=new Wt("Set Injector scope."),qd={},By={};let Wd;function ml(){return void 0===Wd&&(Wd=new _0),Wd}class ac{}class I0 extends ac{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jy(s,_=>this.processProvider(_)),this.records.set(Dg,ra(void 0,this)),d.has("environment")&&this.records.set(ac,ra(void 0,this));const p=this.records.get(zd);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(ky.multi,Le,it.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=qt(this),c=wr(void 0);try{return s()}finally{qt(a),wr(c)}}get(s,a=gi,c=it.Default){this.assertNotDestroyed(),c=$n(c);const d=qt(this),p=wr(void 0);try{if(!(c&it.SkipSelf)){let E=this.records.get(s);if(void 0===E){const b=function T0(i){return"function"==typeof i||"object"==typeof i&&i instanceof Wt}(s)&&rn(s);E=b&&this.injectableDefInScope(b)?ra(Uy(s),qd):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&it.Self?ml():this.parent).get(s,a=c&it.Optional&&a===gi?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[dr]=_[dr]||[]).unshift(Ee(s)),d)throw _;return function Br(i,s,a,c){const d=i[dr];throw s[hn]&&d.unshift(s[hn]),i.message=function V(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==ei?i.slice(2):i;let d=Ee(s);if(Array.isArray(s))d=s.map(Ee).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):Ee(E)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Sn,"\n  ")}`}("\n"+i.message,d,a,c),i[Vr]=d,i[dr]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{wr(p),qt(d)}}resolveInjectorInitializers(){const s=qt(this),a=wr(void 0);try{const c=this.get(qa.multi,Le,it.Self);for(const d of c)d()}finally{qt(s),wr(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(Ee(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(s){let a=gl(s=K(s))?s:K(s&&s.provide);const c=function cD(i){return Vy(i)?ra(void 0,i.useValue):ra(b0(i),qd)}(s);if(gl(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=ra(void 0,qd,!0),d.factory=()=>Oi(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===qd&&(a.value=By,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Cg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Uy(i){const s=rn(i),a=null!==s?s.factory:Yi(i);if(null!==a)return a;if(i instanceof Wt)throw new de(204,!1);if(i instanceof Function)return function D0(i){const s=i.length;if(s>0)throw function Bu(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new de(204,!1);const a=function yn(i){return i&&(i[Ht]||i[jn])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new de(204,!1)}function b0(i,s,a){let c;if(gl(i)){const d=K(i);return Yi(d)||Uy(d)}if(Vy(i))c=()=>K(i.useValue);else if(function E0(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Oi(i.deps||[]));else if(function w0(i){return!(!i||!i.useExisting)}(i))c=()=>nn(K(i.useExisting));else{const d=K(i&&(i.useClass||i.provide));if(!function C0(i){return!!i.deps}(i))return Yi(d)||Uy(d);c=()=>new d(...Oi(i.deps))}return c}function ra(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function jy(i,s){for(const a of i)Array.isArray(a)?jy(a,s):a&&Me(a)?jy(a.\u0275providers,s):s(a)}class lD{}class S0{}class x0{resolveComponentFactory(s){throw function dD(i){const s=Error(`No component factory found for ${Ee(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Kd=(()=>{class i{}return i.NULL=new x0,i})();function M0(){return ia(nr(),pe())}function ia(i,s){return new Nf(pr(i,s))}let Nf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=M0,i})();class Tg{}let hD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Gy(){const i=pe(),a=tr(nr().index,i);return(ni(a)?a:i)[Vt]}(),i})(),zy=(()=>{class i{}return i.\u0275prov=ye({token:i,providedIn:"root",factory:()=>null}),i})();class Sg{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ag=new Sg("15.2.10"),qy={},Wy="ngOriginalError";function Zd(i){return i[Wy]}class yl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Zd(s);for(;a&&Zd(a);)a=Zd(a);return a||null}}function k0(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=s.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}const F0="ng-template";function yD(i,s,a){let c=0,d=!0;for(;c<i.length;){let p=i[c++];if("string"==typeof p&&d){const _=i[c++];if(a&&"class"===p&&-1!==k0(_.toLowerCase(),s,0))return!0}else{if(1===p){for(;c<i.length&&"string"==typeof(p=i[c++]);)if(p.toLowerCase()===s)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function Pf(i){return 4===i.type&&i.value!==F0}function L0(i,s,a){return s===(4!==i.type||a?i.value:F0)}function V0(i,s,a){let c=4;const d=i.attrs||[],p=function U0(i){for(let s=0;s<i.length;s++)if(Gc(i[s]))return s;return i.length}(d);let _=!1;for(let E=0;E<s.length;E++){const b=s[E];if("number"!=typeof b){if(!_)if(4&c){if(c=2|1&c,""!==b&&!L0(i,b,a)||""===b&&1===s.length){if(Es(c))return!1;_=!0}}else{const A=8&c?b:s[++E];if(8&c&&null!==i.attrs){if(!yD(i.attrs,A,a)){if(Es(c))return!1;_=!0}continue}const k=_D(8&c?"class":b,d,Pf(i),a);if(-1===k){if(Es(c))return!1;_=!0;continue}if(""!==A){let H;H=k>p?"":d[k+1].toLowerCase();const J=8&c?H:null;if(J&&-1!==k0(J,A,0)||2&c&&A!==H){if(Es(c))return!1;_=!0}}}}else{if(!_&&!Es(c)&&!Es(b))return!1;if(_&&Es(b))continue;_=!1,c=b|1&c}}return Es(c)||_}function Es(i){return 0==(1&i)}function _D(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let p=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function j0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function B0(i,s,a=!1){for(let c=0;c<s.length;c++)if(V0(i,s[c],a))return!0;return!1}function Qy(i,s){return i?":not("+s.trim()+")":s}function H0(i){let s=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Es(_)&&(s+=Qy(p,d),d=""),c=_,p=p||!Es(c);a++}return""!==d&&(s+=Qy(p,d)),s}const $t={};function ED(i){xg(Ot(),pe(),Dr()+i,!1)}function xg(i,s,a,c){if(!c)if(3==(3&s[Pt])){const p=i.preOrderCheckHooks;null!==p&&jc(s,p,a)}else{const p=i.preOrderHooks;null!==p&&$c(s,p,0,a)}ps(a)}function Rg(i,s=null,a=null,c){const d=CD(i,s,a,c);return d.resolveInjectorInitializers(),d}function CD(i,s=null,a=null,c,d=new Set){const p=[a||Le,uD(i)];return c=c||("object"==typeof i?void 0:Ee(i)),new I0(p,s||ml(),c||null,d)}let _l=(()=>{class i{static create(a,c){if(Array.isArray(a))return Rg({name:""},c,a,"");{const d=a.name??"";return Rg({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=gi,i.NULL=new _0,i.\u0275prov=ye({token:i,providedIn:"any",factory:()=>nn(Dg)}),i.__NG_ELEMENT_ID__=-1,i})();function wl(i,s=it.Default){const a=pe();return null===a?nn(i,s):ku(nr(),a,K(i),s)}function Z0(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const _=i.data[p];Iu(a[c]),_.contentQueries(2,s[p],p)}}}function Pg(i,s,a,c,d,p,_,E,b,A,R){const k=s.blueprint.slice();return k[yi]=d,k[Pt]=76|c,(null!==R||i&&1024&i[Pt])&&(k[Pt]|=1024),Uo(k),k[In]=k[Ys]=i,k[Nn]=a,k[Ks]=_||i&&i[Ks],k[Vt]=E||i&&i[Vt],k[va]=b||i&&i[va]||null,k[_a]=A||i&&i[_a]||null,k[Gn]=p,k[ko]=function mo(){return pf++}(),k[Ir]=R,k[Vn]=2==s.type?i[Vn]:k,k}function El(i,s,a,c,d){let p=i.data[s];if(null===p)p=function o_(i,s,a,c,d){const p=Js(),_=fd(),b=i.data[s]=function FD(i,s,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(i,s,a,c,d),function pd(){return xt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const _=function vu(){const i=xt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return jr(p,!0),p}function kf(i,s,a,c){if(0===a)return-1;const d=s.length;for(let p=0;p<a;p++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Og(i,s,a){bu(s);try{const c=i.viewQuery;null!==c&&f_(1,c,a);const d=i.template;null!==d&&Y0(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Z0(i,s),i.staticViewQueries&&f_(2,i.viewQuery,a);const p=i.components;null!==p&&function kD(i,s){for(let a=0;a<s.length;a++)GD(i,s[a])}(s,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[Pt]&=-5,Cu()}}function Yd(i,s,a,c){const d=s[Pt];if(128!=(128&d)){bu(s);try{Uo(s),function Qi(i){return xt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Y0(i,s,a,2,c);const _=3==(3&d);if(_){const A=i.preOrderCheckHooks;null!==A&&jc(s,A,null)}else{const A=i.preOrderHooks;null!==A&&$c(s,A,0,null),_d(s,0)}if(function h_(i){for(let s=Xo(i);null!==s;s=Ju(s)){if(!s[Pc])continue;const a=s[Qs];for(let c=0;c<a.length;c++){const d=a[c];512&d[Pt]||Da(d[In],1),d[Pt]|=512}}}(s),function rw(i){for(let s=Xo(i);null!==s;s=Ju(s))for(let a=hr;a<s.length;a++){const c=s[a],d=c[ze];hs(c)&&Yd(d,c,d.template,c[Nn])}}(s),null!==i.contentQueries&&Z0(i,s),_){const A=i.contentCheckHooks;null!==A&&jc(s,A)}else{const A=i.contentHooks;null!==A&&$c(s,A,1),_d(s,1)}!function PD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)ps(~d);else{const p=d,_=a[++c],E=a[++c];Eu(_,p),E(2,s[p])}}}finally{ps(-1)}}(i,s);const E=i.components;null!==E&&function OD(i,s){for(let a=0;a<s.length;a++)iw(i,s[a])}(s,E);const b=i.viewQuery;if(null!==b&&f_(2,b,c),_){const A=i.viewCheckHooks;null!==A&&jc(s,A)}else{const A=i.viewHooks;null!==A&&$c(s,A,2),_d(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Pt]&=-41,512&s[Pt]&&(s[Pt]&=-513,Da(s[In],-1))}finally{Cu()}}}function Y0(i,s,a,c,d){const p=Dr(),_=2&c;try{ps(-1),_&&s.length>_n&&xg(i,s,_n,!1),Ur(_?2:0,d),a(c,d)}finally{ps(p),Ur(_?3:1,d)}}function kg(i,s,a){if(Ea(s)){const d=s.directiveEnd;for(let p=s.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function Fg(i,s,a){_u()&&(function Xe(i,s,a,c){const d=a.directiveStart,p=a.directiveEnd;Lo(a)&&function HD(i,s,a){const c=pr(s,i),d=a_(a),p=i[Ks],_=Dl(i,Pg(i,d,null,a.onPush?32:16,c,s,p,p.createRenderer(c,a),null,null,null));i[s.index]=_}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||zc(a,s),S(c,s);const _=a.initialInputs;for(let E=d;E<p;E++){const b=i.data[E],A=Bn(s,i,E,a);S(A,s),null!==_&&qr(0,E-d,A,b,0,_),vi(b)&&(tr(a.index,s)[Nn]=Bn(s,i,E,a))}}(i,s,a,pr(a,s)),64==(64&a.flags)&&Ug(i,s,a))}function Lg(i,s,a=pr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],E=-1===_?a(s,i):i[_];i[d++]=E}}}function a_(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Vg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Vg(i,s,a,c,d,p,_,E,b,A){const R=_n+c,k=R+d,H=function Q0(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:$t);return a}(R,k),J="function"==typeof A?A():A;return H[ze]={type:i,blueprint:H,template:a,queries:null,viewQuery:E,declTNode:s,data:H.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:J,incompleteFirstPass:!1}}function J0(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?ew(a,s,d,p):c.hasOwnProperty(d)&&ew(a,s,c[d],p)}return a}function ew(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function $i(i,s,a,c,d,p,_,E){const b=pr(s,a);let R,A=s.inputs;!E&&null!=A&&(R=A[c])?(Hg(i,a,R,c,d),Lo(s)&&function LD(i,s){const a=tr(s,i);16&a[Pt]||(a[Pt]|=32)}(a,s.index)):3&s.type&&(c=function u_(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,s.value||"",c):d,p.setProperty(b,c,d))}function l_(i,s,a,c){if(_u()){const d=null===c?null:{"":-1},p=function jg(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const _=a[p];if(B0(s,_.selectors,!1))if(c||(c=[]),vi(_))if(null!==_.findHostDirectiveDefs){const E=[];d=d||new Map,_.findHostDirectiveDefs(_,E,d),c.unshift(...E,_),Il(i,s,E.length)}else c.unshift(_),Il(i,s,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,c,d),c.push(_)}return null===c?null:[c,d]}(i,a);let _,E;null===p?_=E=null:[_,E]=p,null!==_&&VD(i,s,a,_,d,E),d&&function UD(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const p=a[s[d+1]];if(null==p)throw new de(-301,!1);c.push(s[d],p)}}}(a,c,d)}a.mergedAttrs=so(a.mergedAttrs,a.attrs)}function VD(i,s,a,c,d,p){for(let A=0;A<c.length;A++)fn(zc(a,s),i,c[A].type);!function jD(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let A=0;A<c.length;A++){const R=c[A];R.providersResolver&&R.providersResolver(R)}let _=!1,E=!1,b=kf(i,s,c.length,null);for(let A=0;A<c.length;A++){const R=c[A];a.mergedAttrs=so(a.mergedAttrs,R.hostAttrs),$D(i,a,s,b,R),d_(b,R,d),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const k=R.type.prototype;!_&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(a.index),_=!0),!E&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(a.index),E=!0),b++}!function tw(i,s,a){const d=s.directiveEnd,p=i.data,_=s.attrs,E=[];let b=null,A=null;for(let R=s.directiveStart;R<d;R++){const k=p[R],H=a?a.get(k):null,_e=H?H.outputs:null;b=J0(k.inputs,R,b,H?H.inputs:null),A=J0(k.outputs,R,A,_e);const je=null===b||null===_||Pf(s)?null:cc(b,R,_);E.push(je)}null!==b&&(b.hasOwnProperty("class")&&(s.flags|=8),b.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=E,s.inputs=b,s.outputs=A}(i,a,p)}function Ug(i,s,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,_=function Qp(){return xt.lFrame.currentDirectiveIndex}();try{ps(p);for(let E=c;E<d;E++){const b=i.data[E],A=s[E];qn(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Bt(b,A)}}finally{ps(-1),qn(_)}}function Bt(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Il(i,s,a){s.componentOffset=a,(i.components??(i.components=[])).push(s.index)}function d_(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;vi(s)&&(a[""]=i)}}function $D(i,s,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=Yi(d.type)),_=new gs(p,vi(d),wl);i.blueprint[c]=_,a[c]=_,function BD(i,s,a,c,d){const p=d.hostBindings;if(p){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const E=~s.index;(function Io(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(_)!=E&&_.push(E),_.push(a,c,p)}}(i,s,c,kf(i,a,d.hostVars,$t),d)}function Pn(i,s,a,c,d,p){const _=pr(i,s);!function Qd(i,s,a,c,d,p,_){if(null==p)i.removeAttribute(s,d,a);else{const E=null==_?Ce(p):_(p,c||"",d);i.setAttribute(s,d,E,a)}}(s[Vt],_,p,i.value,a,c,d)}function qr(i,s,a,c,d,p){const _=p[s];if(null!==_){const E=c.setInput;for(let b=0;b<_.length;){const A=_[b++],R=_[b++],k=_[b++];null!==E?c.setInput(a,k,A,R):a[R]=k}}}function cc(i,s,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const _=i[p];for(let E=0;E<_.length;E+=2)if(_[E]===s){c.push(p,_[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function nw(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null]}function iw(i,s){const a=tr(s,i);if(hs(a)){const c=a[ze];48&a[Pt]?Yd(c,a,c.template,a[Nn]):a[ln]>0&&Wr(a)}}function Wr(i){for(let c=Xo(i);null!==c;c=Ju(c))for(let d=hr;d<c.length;d++){const p=c[d];if(hs(p))if(512&p[Pt]){const _=p[ze];Yd(_,p,_.template,p[Nn])}else p[ln]>0&&Wr(p)}const a=i[ze].components;if(null!==a)for(let c=0;c<a.length;c++){const d=tr(a[c],i);hs(d)&&d[ln]>0&&Wr(d)}}function GD(i,s){const a=tr(s,i),c=a[ze];(function Ff(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Og(c,a,a[Nn])}function Dl(i,s){return i[Zs]?i[as][_i]=s:i[Zs]=s,i[as]=s,s}function Is(i){for(;i;){i[Pt]|=32;const s=un(i);if(lu(i)&&!s)return i;i=s}return null}function Xd(i,s,a,c=!0){const d=s[Ks];d.begin&&d.begin();try{Yd(i,s,i.template,a)}catch(_){throw c&&sw(s,_),_}finally{d.end&&d.end()}}function f_(i,s,a){Iu(0),s(i,a)}function p_(i){return i[Po]||(i[Po]=[])}function $g(i){return i.cleanup||(i.cleanup=[])}function sw(i,s){const a=i[_a],c=a?a.get(yl,null):null;c&&c.handleError(s)}function Hg(i,s,a,c,d){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],b=s[_],A=i.data[_];null!==A.setInput?A.setInput(b,d,c,E):b[E]=d}}function Jd(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?d=De(d,E):2==p&&(c=De(c,E+": "+s[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function eh(i,s,a,c,d=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&c.push(fr(p)),ri(p))for(let E=hr;E<p.length;E++){const b=p[E],A=b[ze].firstChild;null!==A&&eh(b[ze],b,A,c)}const _=a.type;if(8&_)eh(i,s,a.child,c);else if(32&_){const E=Qo(a,s);let b;for(;b=E();)c.push(b)}else if(16&_){const E=Ha(s,a);if(Array.isArray(E))c.push(...E);else{const b=un(s[Vn]);eh(b[ze],b,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class bl{get rootNodes(){const s=this._lView,a=s[ze];return eh(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(s){this._lView[Nn]=s}get destroyed(){return 128==(128&this._lView[Pt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[In];if(ri(s)){const a=s[Rs],c=a?a.indexOf(this):-1;c>-1&&(Hs(s,c),po(a,c))}this._attachedToViewContainer=!1}ec(this._lView[ze],this._lView)}onDestroy(s){!function Bg(i,s,a,c){const d=p_(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&$g(i).push(c,d.length-1))}(this._lView[ze],this._lView,null,s)}markForCheck(){Is(this._cdRefInjectingView||this._lView)}detach(){this._lView[Pt]&=-65}reattach(){this._lView[Pt]|=64}detectChanges(){Xd(this._lView[ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function js(i,s){ai(i,s,s[Vt],2,null,null)}(this._lView[ze],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=s}}class m_ extends bl{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Xd(s[ze],s,s[Nn],!1)}checkNoChanges(){}get context(){return null}}class y_ extends Kd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=pt(s);return new Wa(a,this.ngModule)}}function ow(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class zD{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=$n(c);const d=this.injector.get(s,qy,c);return d!==qy||a===qy?d:this.parentInjector.get(s,a,c)}}class Wa extends S0{get inputs(){return ow(this.componentDef.inputs)}get outputs(){return ow(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function TS(i){return i.map(H0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let p=(d=d||this.ngModule)instanceof ac?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new zD(s,p):s,E=_.get(Tg,null);if(null===E)throw new de(407,!1);const b=_.get(zy,null),A=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",k=c?function X0(i,s,a){return i.selectRootElement(s,a===me.ShadowDom)}(A,c,this.componentDef.encapsulation):Fd(A,R,function Vf(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(R)),H=this.componentDef.onPush?288:272,J=Vg(0,null,null,1,0,null,null,null,null,null),_e=Pg(null,J,null,H,null,null,E,A,b,_,null);let je,Ye;bu(_e);try{const ot=this.componentDef;let bt,Re=null;ot.findHostDirectiveDefs?(bt=[],Re=new Map,ot.findHostDirectiveDefs(ot,bt,Re),bt.push(ot)):bt=[ot];const Lt=function Gg(i,s){const a=i[ze],c=_n;return i[c]=s,El(a,c,2,"#host",null)}(_e,k),Mn=function __(i,s,a,c,d,p,_,E){const b=d[ze];!function WD(i,s,a,c){for(const d of i)s.mergedAttrs=so(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(Jd(s,s.mergedAttrs,!0),null!==a&&hg(c,a,s))}(c,i,s,_);const A=p.createRenderer(s,a),R=Pg(d,a_(a),null,a.onPush?32:16,d[i.index],i,p,A,E||null,null,null);return b.firstCreatePass&&Il(b,i,c.length-1),Dl(d,R),d[i.index]=R}(Lt,k,ot,bt,_e,E,A);Ye=ud(J,_n),k&&function uw(i,s,a,c){if(c)Go(i,a,["ng-version",Ag.full]);else{const{attrs:d,classes:p}=function wD(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&s.push(p,i[++c]):8===d&&a.push(p);else{if(!Es(d))break;d=p}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Go(i,a,d),p&&p.length>0&&es(i,a,p.join(" "))}}(A,ot,k,c),void 0!==a&&function cw(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(Ye,this.ngContentSelectors,a),je=function aw(i,s,a,c,d,p){const _=nr(),E=d[ze],b=pr(_,d);VD(E,d,_,a,null,c);for(let R=0;R<a.length;R++)S(Bn(d,E,_.directiveStart+R,_),d);Ug(E,d,_),b&&S(b,d);const A=Bn(d,E,_.directiveStart+_.componentOffset,_);if(i[Nn]=d[Nn]=A,null!==p)for(const R of p)R(A,s);return kg(E,_,i),A}(Mn,ot,bt,Re,_e,[zg]),Og(J,_e,null)}finally{Cu()}return new qD(this.componentType,je,ia(Ye,_e),_e,Ye)}}class qD extends lD{constructor(s,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new m_(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const p=this._rootLView;Hg(p[ze],p,d,s,a),Is(tr(this._tNode.index,p))}}get injector(){return new ys(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function zg(){const i=nr();Au(pe()[ze],i)}function Bf(i){let s=function qg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(vi(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new de(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const _=i;_.inputs=Uf(i.inputs),_.declaredInputs=Uf(i.declaredInputs),_.outputs=Uf(i.outputs);const E=d.hostBindings;E&&KD(i,E);const b=d.viewQuery,A=d.contentQueries;if(b&&lw(i,b),A&&dw(i,A),we(i.inputs,d.inputs),we(i.declaredInputs,d.declaredInputs),we(i.outputs,d.outputs),vi(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===Bf&&(a=!1)}}s=Object.getPrototypeOf(s)}!function v_(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=so(d.hostAttrs,a=so(a,d.hostAttrs))}}(c)}function Uf(i){return i===X?{}:i===Le?[]:i}function lw(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function dw(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{s(c,d,p),a(c,d,p)}:s}function KD(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function Cl(i){return!!D_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function D_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ci(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function $f(i,s,a,c){const d=pe();return Ci(d,eo(),s)&&(Ot(),Pn(Cn(),d,i,s,a,c)),$f}function th(i,s,a,c){return Ci(i,eo(),a)?s+Ce(a)+c:$t}function T_(i,s,a,c,d,p,_,E){const b=pe(),A=Ot(),R=i+_n,k=A.firstCreatePass?function Kg(i,s,a,c,d,p,_,E,b){const A=s.consts,R=El(s,i,4,_||null,Os(A,E));l_(s,a,R,Os(A,b)),Au(s,R);const k=R.tView=Vg(2,R,c,d,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,R),k.queries=s.queries.embeddedTView(R)),R}(R,A,b,s,a,c,d,p,_):A.data[R];jr(k,!1);const H=b[Vt].createComment("");ea(A,b,H,k),S(H,b),Dl(b,b[R]=nw(H,b,H,k)),Oc(k)&&Fg(A,b,k),null!=_&&Lg(b,k,E)}function li(i,s,a){const c=pe();return Ci(c,eo(),s)&&$i(Ot(),Cn(),c,i,s,c[Vt],a,!1),li}function Zg(i,s,a,c,d){const _=d?"class":"style";Hg(i,a,s.inputs[_],_,c)}function Rl(i,s,a,c){const d=pe(),p=Ot(),_=_n+i,E=d[Vt],b=p.firstCreatePass?function zf(i,s,a,c,d,p){const _=s.consts,b=El(s,i,2,c,Os(_,d));return l_(s,a,b,Os(_,p)),null!==b.attrs&&Jd(b,b.attrs,!1),null!==b.mergedAttrs&&Jd(b,b.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,b),b}(_,p,d,s,a,c):p.data[_],A=d[_]=Fd(E,s,function yd(){return xt.lFrame.currentNamespace}()),R=Oc(b);return jr(b,!0),hg(E,A,b),32!=(32&b.flags)&&ea(p,d,A,b),0===function ld(){return xt.lFrame.elementDepthCount}()&&S(A,d),function yu(){xt.lFrame.elementDepthCount++}(),R&&(Fg(p,d,b),kg(p,b,d)),null!==c&&Lg(d,b),Rl}function qf(){let i=nr();fd()?function wu(){xt.lFrame.isParent=!1}():(i=i.parent,jr(i,!1));const s=i;!function dd(){xt.lFrame.elementDepthCount--}();const a=Ot();return a.firstCreatePass&&(Au(a,i),Ea(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Ra(i){return 0!=(8&i.flags)}(s)&&Zg(a,s,pe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function no(i){return 0!=(16&i.flags)}(s)&&Zg(a,s,pe(),s.stylesWithoutHost,!1),qf}function Wf(i,s,a,c){return Rl(i,s,a,c),qf(),Wf}function Xg(){return pe()}function Kf(i){return!!i&&"function"==typeof i.then}function Zf(i){return!!i&&"function"==typeof i.subscribe}const rh=Zf;function Jg(i,s,a,c){const d=pe(),p=Ot(),_=nr();return function Yf(i,s,a,c,d,p,_){const E=Oc(c),A=i.firstCreatePass&&$g(i),R=s[Nn],k=p_(s);let H=!0;if(3&c.type||_){const je=pr(c,s),Ye=_?_(je):je,ot=k.length,bt=_?Lt=>_(fr(Lt[c.index])):c.index;let Re=null;if(!_&&E&&(Re=function S_(i,s,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===c){const E=s[Po],b=d[p+2];return E.length>b?E[b]:null}"string"==typeof _&&(p+=2)}return null}(i,s,d,c.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=p,Re.__ngLastListenerFn__=p,H=!1;else{p=A_(c,s,R,p,!1);const Lt=a.listen(Ye,d,p);k.push(p,Lt),A&&A.push(d,bt,ot,ot+1)}}else p=A_(c,s,R,p,!1);const J=c.outputs;let _e;if(H&&null!==J&&(_e=J[d])){const je=_e.length;if(je)for(let Ye=0;Ye<je;Ye+=2){const Mn=s[_e[Ye]][_e[Ye+1]].subscribe(p),Xn=k.length;k.push(p,Mn),A&&A.push(d,c.index,Xn,-(Xn+1))}}}(p,d,d[Vt],_,i,s,c),Jg}function em(i,s,a,c){try{return Ur(6,s,a),!1!==a(c)}catch(d){return sw(i,d),!1}finally{Ur(7,s,a)}}function A_(i,s,a,c,d){return function p(_){if(_===Function)return c;Is(i.componentOffset>-1?tr(i.index,s):s);let b=em(s,a,c,_),A=p.__ngNextListenerFn__;for(;A;)b=em(s,a,A,_)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function tm(i,s,a){return Pl(i,"",s,"",a),tm}function Pl(i,s,a,c,d){const p=pe(),_=th(p,s,a,c);return _!==$t&&$i(Ot(),Cn(),p,i,_,p[Vt],d,!1),Pl}function aa(i,s){return i<<17|s<<2}function Si(i){return i>>17&32767}function sm(i){return 2|i}function mn(i){return(131068&i)>>2}function sh(i,s){return-131069&i|s<<2}function Ol(i){return 1|i}function Mw(i,s,a,c,d){const p=i[a+1],_=null===s;let E=c?Si(p):mn(p),b=!1;for(;0!==E&&(!1===b||_);){const R=i[E+1];tb(i[E],s)&&(b=!0,i[E+1]=c?Ol(R):sm(R)),E=c?Si(R):mn(R)}b&&(i[a+1]=c?sm(p):Ol(p))}function tb(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ii(i,s)>=0}function k_(i,s){return function Hi(i,s,a,c){const d=pe(),p=Ot(),_=function Ei(i){const s=xt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function F_(i,s,a,c){const d=i.data;if(null===d[a+1]){const p=d[Dr()],_=function am(i,s){return s>=i.expandoStartIndex}(i,a);(function V_(i,s){return 0!=(i.flags&(s?8:16))})(p,c)&&null===s&&!_&&(s=!1),s=function Jf(i,s,a,c){const d=function jo(i){const s=xt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=tp(a=um(null,i,s,a,c),s.attrs,c),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=um(d,i,s,a,c),null===p){let b=function ep(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==mn(c))return i[Si(c)]}(i,s,c);void 0!==b&&Array.isArray(b)&&(b=um(null,i,s,b[1],c),b=tp(b,s.attrs,c),function ob(i,s,a,c){i[Si(a?s.classBindings:s.styleBindings)]=c}(i,s,c,b))}else p=function ur(i,s,a){let c;const d=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<d;p++)c=tp(c,i[p].hostAttrs,a);return tp(c,s.attrs,a)}(i,s,c)}return void 0!==p&&(c?s.residualClasses=p:s.residualStyles=p),a}(d,p,s,c),function JD(i,s,a,c,d,p){let _=p?s.classBindings:s.styleBindings,E=Si(_),b=mn(_);i[c]=a;let R,A=!1;if(Array.isArray(a)?(R=a[1],(null===R||Ii(a,R)>0)&&(A=!0)):R=a,d)if(0!==b){const H=Si(i[E+1]);i[c+1]=aa(H,E),0!==H&&(i[H+1]=sh(i[H+1],c)),i[E+1]=function im(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=aa(E,0),0!==E&&(i[E+1]=sh(i[E+1],c)),E=c;else i[c+1]=aa(b,0),0===E?E=c:i[b+1]=sh(i[b+1],c),b=c;A&&(i[c+1]=sm(i[c+1])),Mw(i,R,c,!0),Mw(i,R,c,!1),function eb(i,s,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Ii(p,s)>=0&&(a[c+1]=Ol(a[c+1]))}(s,R,i,c,p),_=aa(E,b),p?s.classBindings=_:s.styleBindings=_}(d,p,s,a,_,c)}}(p,i,_,c),s!==$t&&Ci(d,_,s)&&function L_(i,s,a,c,d,p,_,E){if(!(3&s.type))return;const b=i.data,A=b[E+1],R=function Xf(i){return 1==(1&i)}(A)?np(b,s,a,d,mn(A),_):void 0;rp(R)||(rp(p)||function rm(i){return 2==(2&i)}(A)&&(p=np(b,null,a,d,E,_)),function Dy(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Zn.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Zn.Important),i.setStyle(a,c,d,p))}}(c,_,ds(Dr(),a),d,p))}(p,p.data[Dr()],d,d[Vt],i,d[_+1]=function ca(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=Ee(zr(i)))),i}(s,a),c,_)}(i,s,null,!0),k_}function um(i,s,a,c,d){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],c=tp(c,p.hostAttrs,d),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function tp(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?d=_:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),$r(i,_,!!a||s[++p]))}return void 0===i?null:i}function np(i,s,a,c,d,p){const _=null===s;let E;for(;d>0;){const b=i[d],A=Array.isArray(b),R=A?b[1]:b,k=null===R;let H=a[d+1];H===$t&&(H=k?Le:void 0);let J=k?Wn(H,c):R===c?H:void 0;if(A&&!rp(J)&&(J=Wn(b,c)),rp(J)&&(E=J,_))return E;const _e=i[d+1];d=_?Si(_e):mn(_e)}if(null!==s){let b=p?s.residualClasses:s.residualStyles;null!=b&&(E=Wn(b,c))}return E}function rp(i){return void 0!==i}function Bw(i,s=""){const a=pe(),c=Ot(),d=i+_n,p=c.firstCreatePass?El(c,d,1,s,null):c.data[d],_=a[d]=function _f(i,s){return i.createText(s)}(a[Vt],s);ea(c,a,_,p),jr(p,!1)}function cm(i){return ah("",i,""),cm}function ah(i,s,a){const c=pe(),d=th(c,i,s,a);return d!==$t&&function Do(i,s,a){const c=ds(s,i);!function kd(i,s,a){i.setValue(s,a)}(i[Vt],c,a)}(c,Dr(),d),ah}const Ya=void 0;var Qa=["en",[["a","p"],["AM","PM"],Ya],[["AM","PM"],Ya,Ya],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ya,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ya,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ya,"{1} 'at' {0}",Ya],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eE(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let di={};function ch(i){const s=function cb(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ap(s);if(a)return a;const c=s.split("-")[0];if(a=ap(c),a)return a;if("en"===c)return Qa;throw new de(701,!1)}function lh(i){return ch(i)[wt.PluralCase]}function ap(i){return i in di||(di[i]=Qt.ng&&Qt.ng.common&&Qt.ng.common.locales&&Qt.ng.common.locales[i]),di[i]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const dh="en-US";let tE=dh;function nv(i,s,a,c,d){if(i=K(i),Array.isArray(i))for(let p=0;p<i.length;p++)nv(i[p],s,a,c,d);else{const p=Ot(),_=pe();let E=gl(i)?i:K(i.provide),b=b0(i);const A=nr(),R=1048575&A.providerIndexes,k=A.directiveStart,H=A.providerIndexes>>20;if(gl(i)||!i.multi){const J=new gs(b,d,wl),_e=iv(E,s,d?R:R+H,k);-1===_e?(fn(zc(A,_),p,E),rv(p,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(J),_.push(J)):(a[_e]=J,_[_e]=J)}else{const J=iv(E,s,R+H,k),_e=iv(E,s,R,R+H),Ye=_e>=0&&a[_e];if(d&&!Ye||!d&&!(J>=0&&a[J])){fn(zc(A,_),p,E);const ot=function Ab(i,s,a,c,d){const p=new gs(i,a,wl);return p.multi=[],p.index=s,p.componentProviders=0,gE(p,d,c&&!a),p}(d?Sb:Tb,a.length,d,c,b);!d&&Ye&&(a[_e].providerFactory=ot),rv(p,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(ot),_.push(ot)}else rv(p,i,J>-1?J:_e,gE(a[d?_e:J],b,!d&&c));!d&&c&&Ye&&a[_e].componentProviders++}}}function rv(i,s,a,c){const d=gl(s),p=function ci(i){return!!i.useClass}(s);if(d||p){const b=(p?K(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const R=A.indexOf(a);-1===R?A.push(a,[c,b]):A[R+1].push(c,b)}else A.push(a,b)}}}function gE(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function iv(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function Tb(i,s,a,c){return sv(this.multi,[])}function Sb(i,s,a,c){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Bn(a,a[ze],this.providerFactory.index,c);p=E.slice(0,_),sv(d,p);for(let b=_;b<E.length;b++)p.push(E[b])}else p=[],sv(d,p);return p}function sv(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function mE(i,s=[]){return a=>{a.providersResolver=(c,d)=>function Cb(i,s,a){const c=Ot();if(c.firstCreatePass){const d=vi(i);nv(a,c.data,c.blueprint,d,!0),nv(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class Gl{}class xb{}function yE(i,s){return new _E(i,s??null)}class _E extends Gl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new y_(this);const c=function Hn(i,s){const a=i[bn]||null;if(!a&&!0===s)throw new Error(`Type ${Ee(i)} does not have '\u0275mod' property.`);return a}(s);this._bootstrapComponents=function sa(i){return i instanceof Function?i():i}(c.bootstrap),this._r3Injector=CD(s,a,[{provide:Gl,useValue:this},{provide:Kd,useValue:this.componentFactoryResolver}],Ee(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class yp extends xb{constructor(s){super(),this.moduleType=s}create(s){return new _E(this.moduleType,s)}}function Tn(i){return s=>{setTimeout(i,void 0,s)}}const hi=class TE extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,p=a||(()=>null),_=c;if(s&&"object"==typeof s){const b=s;d=b.next?.bind(b),p=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(p=Tn(p),d&&(d=Tn(d)),_&&(_=Tn(_)));const E=super.subscribe({next:d,error:p,complete:_});return s instanceof Y.w0&&s.add(E),E}};let ha=(()=>{class i{}return i.__NG_ELEMENT_ID__=Jt,i})();const kb=ha,AE=class extends kb{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tView,d=Pg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[Oo]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[Zi];return null!==_&&(d[Zi]=_.createEmbeddedView(c)),Og(c,d,s),new bl(d)}};function Jt(){return function dn(i,s){return 4&i.type?new AE(s,i,ia(i,s)):null}(nr(),pe())}let nu=(()=>{class i{}return i.__NG_ELEMENT_ID__=lv,i})();function lv(){return function fv(i,s){let a;const c=s[i.index];if(ri(c))a=c;else{let d;if(8&i.type)d=fr(c);else{const p=s[Vt];d=p.createComment("");const _=pr(i,s);$a(p,nc(p,_),d,function Ey(i,s){return i.nextSibling(s)}(p,_),!1)}s[i.index]=a=nw(c,s,d,i),Dl(s,a)}return new hv(a,i,s)}(nr(),pe())}const dv=nu,hv=class extends dv{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return ia(this._hostTNode,this._hostLView)}get injector(){return new ys(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ed(this._hostTNode,this._hostLView);if(oo(s)){const a=ao(s,this._hostLView),c=ks(s);return new ys(a[ze].data[c+8],a)}return new ys(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Sm(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-hr}createEmbeddedView(s,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const _=s.createEmbeddedView(a||{},p);return this.insert(_,d),_}createComponent(s,a,c,d,p){const _=s&&!function Vu(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,c=k.injector,d=k.projectableNodes,p=k.environmentInjector||k.ngModuleRef}const b=_?s:new Wa(pt(s)),A=c||this.parentInjector;if(!p&&null==b.ngModule){const H=(_?A:this.parentInjector).get(ac,null);H&&(p=H)}const R=b.create(A,d,void 0,p);return this.insert(R.hostView,E),R}insert(s,a){const c=s._lView,d=c[ze];if(function Vc(i){return ri(i[In])}(c)){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const k=c[In],H=new hv(k,k[Gn],k[In]);H.detach(H.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function $s(i,s,a,c){const d=hr+c,p=a.length;c>0&&(a[d-1][_i]=s),c<p-hr?(s[_i]=a[d],af(a,hr+c,s)):(a.push(s),s[_i]=null),s[In]=a;const _=s[Oo];null!==_&&a!==_&&function vy(i,s){const a=i[Qs];s[Vn]!==s[In][In][Vn]&&(i[Pc]=!0),null===a?i[Qs]=[s]:a.push(s)}(_,s);const E=s[Zi];null!==E&&E.insertView(i),s[Pt]|=64}(d,c,_,p);const E=Ga(p,_),b=c[Vt],A=nc(b,_[Fo]);return null!==A&&function rg(i,s,a,c,d,p){c[yi]=d,c[Gn]=s,ai(i,c,a,1,d,p)}(d,_[Gn],b,c,A,E),s.attachToViewContainerRef(),af(Am(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Sm(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Hs(this._lContainer,a);c&&(po(Am(this._lContainer),a),ec(c[ze],c))}detach(s){const a=this._adjustIndex(s,-1),c=Hs(this._lContainer,a);return c&&null!=po(Am(this._lContainer),a)?new bl(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Sm(i){return i[Rs]}function Am(i){return i[Rs]||(i[Rs]=[])}function Dh(...i){}const Fm=new Wt("Application Initializer");let bh=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Dh,this.reject=Dh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Kf(p))a.push(p);else if(rh(p)){const _=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(nn(Fm,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const qE=new Wt("AppId",{providedIn:"root",factory:function WE(){return`${en()}${en()}${en()}`}});function en(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bv=new Wt("Platform Initializer"),KE=new Wt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Mp=new Wt("LocaleId",{providedIn:"root",factory:()=>Rn(Mp,it.Optional|it.SkipSelf)||function Xb(){return typeof $localize<"u"&&$localize.locale||dh}()}),YE=new Wt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),tC=(()=>Promise.resolve(0))();function Av(i){typeof Zone>"u"?tC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class pi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hi(!1),this.onMicrotaskEmpty=new hi(!1),this.onStable=new hi(!1),this.onError=new hi(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function nC(){let i=Qt.requestAnimationFrame,s=Qt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Mv(i){const s=()=>{!function vr(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Qt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Bm(i),i.isCheckStableRunning=!0,xv(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Bm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,_,E)=>{try{return Ch(i),a.invokeTask(d,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Ao(i)}},onInvoke:(a,c,d,p,_,E,b)=>{try{return Ch(i),a.invoke(d,p,_,E,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),Ao(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Bm(i),xv(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pi.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(pi.isInAngularZone())throw new de(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,s,nI,Dh,Dh);try{return p.runTask(_,a,c)}finally{p.cancelTask(_)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const nI={};function xv(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Bm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ch(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Ao(i){i._nesting--,xv(i)}class Rv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hi,this.onMicrotaskEmpty=new hi,this.onStable=new hi,this.onError=new hi}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const Nv=new Wt(""),Th=new Wt("");let Ov,rI=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ov||(function iI(i){Ov=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pi.assertNotInAngularZone(),Av(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Av(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(nn(pi),nn(Pv),nn(Th))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})(),Pv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Ov?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const su=!1;let qs=null;const Um=new Wt("AllowMultipleToken"),kv=new Wt("PlatformDestroyListeners"),sI=new Wt("appBootstrapListener");function Xl(i,s,a=[]){const c=`Platform: ${s}`,d=new Wt(c);return(p=[])=>{let _=xo();if(!_||_.injector.get(Um,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function oC(i){if(qs&&!qs.get(Um,!1))throw new de(400,!1);qs=i;const s=i.get(Lv);(function oI(i){const s=i.get(bv,null);s&&s.forEach(a=>a())})(i)}(function uI(i=[],s){return _l.create({name:s,providers:[{provide:zd,useValue:"platform"},{provide:kv,useValue:new Set([()=>qs=null])},...i]})}(E,c))}return function aI(i){const s=xo();if(!s)throw new de(401,!1);return s}()}}function xo(){return qs?.get(Lv)??null}let Lv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Vv(i,s){let a;return a="noop"===i?new Rv:("zone.js"===i?void 0:i)||new pi(s),a}(c?.ngZone,function cI(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:pi,useValue:d}];return d.run(()=>{const _=_l.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(_),b=E.injector.get(yl,null);if(!b)throw new de(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:R=>{b.handleError(R)}});E.onDestroy(()=>{pa(this._modules,E),A.unsubscribe()})}),function Np(i,s,a){try{const c=a();return Kf(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(b,d,()=>{const A=E.injector.get(bh);return A.runInitializers(),A.donePromise.then(()=>(function Bl(i){ee(i,"Expected localeId to be defined"),"string"==typeof i&&(tE=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Mp,dh)||dh),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=Tc({},c);return function Fv(i,s,a){const c=new yp(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(ou);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new de(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(kv,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(nn(_l))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Tc(i,s){return Array.isArray(s)?s.reduce(Tc,i):{...i,...s}}let ou=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new O.y(E=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{pi.assertNotInAngularZone(),Av(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{pi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ce.T)(p,_.pipe((0,oe.B)()))}bootstrap(a,c){const d=a instanceof S0;if(!this._injector.get(bh).done){!d&&function Er(i){const s=pt(i)||Xt(i)||Zt(i);return null!==s&&s.standalone}(a);throw new de(405,su)}let _;_=d?a:this._injector.get(Kd).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function iC(i){return i.isBoundToModule}(_)?void 0:this._injector.get(Gl),A=_.create(_l.NULL,[],c||_.selector,E),R=A.location.nativeElement,k=A.injector.get(Nv,null);return k?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),pa(this.components,A),k?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;pa(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(sI,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>pa(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new de(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(nn(pi),nn(ac),nn(yl))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function pa(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function Bv(){return!1}let fI=(()=>{class i{}return i.__NG_ELEMENT_ID__=pI,i})();function pI(i){return function jm(i,s,a){if(Lo(i)&&!a){const c=tr(i.index,s);return new bl(c,c)}return 47&i.type?new bl(s[Vn],s):null}(nr(),pe(),16==(16&i))}class qm{constructor(){}supports(s){return Cl(s)}create(s){return new pC(s)}}const Wm=(i,s)=>s;class pC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Wm}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const _=!c||a&&a.currentIndex<Mh(c,d,p)?a:c,E=Mh(_,d,p),b=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const A=E-d,R=b-d;if(A!=R){for(let H=0;H<A;H++){const J=H<p.length?p[H]:p[H]=0,_e=J+H;R<=_e&&_e<A&&(p[H]=J+1)}p[_.previousIndex]=R-A}}E!==b&&s(_,E,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Cl(s))throw new de(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,p,_,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),c=!0),a=a._next}else d=0,function ZD(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,d)):s=this._addAfter(new yI(a,c),p,d),s}_verifyReinsertion(s,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?s=this._reinsertAfter(p,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,p=s._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Fp),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fp),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class yI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kp{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Fp{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new kp,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Mh(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class Hv{constructor(){}supports(s){return s instanceof Map||D_(s)}create(){return new _I}}class _I{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||D_(s)))throw new de(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const c=new Ni(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class Ni{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Gv(){return new Rh([new qm])}let Rh=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Gv()),deps:[[i,new oi,new Yo]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new de(901,!1)}}return i.\u0275prov=ye({token:i,providedIn:"root",factory:Gv}),i})();function qv(){return new ga([new Hv])}let ga=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||qv()),deps:[[i,new oi,new Yo]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new de(901,!1)}}return i.\u0275prov=ye({token:i,providedIn:"root",factory:qv}),i})();const Oh=Xl(null,"core",[]);let wI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(nn(ou))},i.\u0275mod=te({type:i}),i.\u0275inj=Nt({}),i})();function Ac(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},6101:(Et,Pe,F)=>{F.d(Pe,{Z:()=>Dt});var g=F(5578),Y=F(1617),O=F(7212);F(9357);class oe{constructor(de,Ue){this._delegate=de,this.firebase=Ue,(0,O._addComponent)(de,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(de,Ue=O._DEFAULT_ENTRY_NAME){var Ce;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(de);return!Be.isInitialized()&&"EXPLICIT"===(null===(Ce=Be.getComponent())||void 0===Ce?void 0:Ce.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:Ue})}_removeServiceInstance(de,Ue=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(Ue)}_addComponent(de){(0,O._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,O._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});function De(){const Ke=function Ee(Ke){const de={},Ue={__esModule:!0,initializeApp:function xe(Oe,at={}){const re=O.initializeApp(Oe,at);if((0,g.r3)(de,re.name))return de[re.name];const ht=new Ke(re,Ue);return de[re.name]=ht,ht},app:Be,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Oe){const at=Oe.name,re=at.replace("-compat","");if(O._registerComponent(Oe)&&"PUBLIC"===Oe.type){const ht=(Je=Be())=>{if("function"!=typeof Je[re])throw we.create("invalid-app-argument",{appName:at});return Je[re]()};void 0!==Oe.serviceProps&&(0,g.ZB)(ht,Oe.serviceProps),Ue[re]=ht,Ke.prototype[re]=function(...Je){return this._getService.bind(this,at).apply(this,Oe.multipleInstances?Je:[])}}return"PUBLIC"===Oe.type?Ue[re]:null},removeApp:function Ce(Oe){delete de[Oe]},useAsService:function Ge(Oe,at){return"serverAuth"===at?null:at},modularAPIs:O}};function Be(Oe){if(!(0,g.r3)(de,Oe=Oe||O._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Oe});return de[Oe]}return Ue.default=Ue,Object.defineProperty(Ue,"apps",{get:function ve(){return Object.keys(de).map(Oe=>de[Oe])}}),Be.App=Ke,Ue}(oe);return Ke.INTERNAL=Object.assign(Object.assign({},Ke.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function de(Ue){(0,g.ZB)(Ke,Ue)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ke}const z=De();(0,g.jU)()&&void 0!==self.firebase&&self;const Dt=z},7212:(Et,Pe,F)=>{F.r(Pe),F.d(Pe,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Ms,_DEFAULT_ENTRY_NAME:()=>Lr,_addComponent:()=>rt,_addOrOverwriteComponent:()=>At,_apps:()=>Qt,_clearComponents:()=>Vr,_components:()=>tn,_getProvider:()=>Jr,_registerComponent:()=>gi,_removeServiceInstance:()=>dr,deleteApp:()=>mi,getApp:()=>Wi,getApps:()=>nn,initializeApp:()=>qt,onLog:()=>Oi,registerVersion:()=>$n,setLogLevel:()=>En});var g=F(5861),Y=F(1617),O=F(9357),ce=F(5578);const oe=(he,te)=>te.some(ke=>he instanceof ke);let le,we;const z=new WeakMap,$=new WeakMap,K=new WeakMap,Qe=new WeakMap,Me=new WeakMap;let de={get(he,te,ke){if(he instanceof IDBTransaction){if("done"===te)return $.get(he);if("objectStoreNames"===te)return he.objectStoreNames||K.get(he);if("store"===te)return ke.objectStoreNames[1]?void 0:ke.objectStore(ke.objectStoreNames[0])}return xe(he[te])},set:(he,te,ke)=>(he[te]=ke,!0),has:(he,te)=>he instanceof IDBTransaction&&("done"===te||"store"===te)||te in he};function Be(he){return"function"==typeof he?function Ce(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...te){return he.apply(ve(this),te),xe(z.get(this))}:function(...te){return xe(he.apply(ve(this),te))}:function(te,...ke){const ft=he.call(ve(this),te,...ke);return K.set(ft,te.sort?te.sort():[te]),xe(ft)}}(he):(he instanceof IDBTransaction&&function Ke(he){if($.has(he))return;const te=new Promise((ke,ft)=>{const It=()=>{he.removeEventListener("complete",Ut),he.removeEventListener("error",pt),he.removeEventListener("abort",pt)},Ut=()=>{ke(),It()},pt=()=>{ft(he.error||new DOMException("AbortError","AbortError")),It()};he.addEventListener("complete",Ut),he.addEventListener("error",pt),he.addEventListener("abort",pt)});$.set(he,te)}(he),oe(he,function Ee(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,de):he)}function xe(he){if(he instanceof IDBRequest)return function Dt(he){const te=new Promise((ke,ft)=>{const It=()=>{he.removeEventListener("success",Ut),he.removeEventListener("error",pt)},Ut=()=>{ke(xe(he.result)),It()},pt=()=>{ft(he.error),It()};he.addEventListener("success",Ut),he.addEventListener("error",pt)});return te.then(ke=>{ke instanceof IDBCursor&&z.set(ke,he)}).catch(()=>{}),Me.set(te,he),te}(he);if(Qe.has(he))return Qe.get(he);const te=Be(he);return te!==he&&(Qe.set(he,te),Me.set(te,he)),te}const ve=he=>Me.get(he),Oe=["get","getKey","getAll","getAllKeys","count"],at=["put","add","delete","clear"],re=new Map;function ht(he,te){if(!(he instanceof IDBDatabase)||te in he||"string"!=typeof te)return;if(re.get(te))return re.get(te);const ke=te.replace(/FromIndex$/,""),ft=te!==ke,It=at.includes(ke);if(!(ke in(ft?IDBIndex:IDBObjectStore).prototype)||!It&&!Oe.includes(ke))return;const Ut=function(){var pt=(0,g.Z)(function*(Xt,...Zt){const Er=this.transaction(Xt,It?"readwrite":"readonly");let Hn=Er.store;return ft&&(Hn=Hn.index(Zt.shift())),(yield Promise.all([Hn[ke](...Zt),It&&Er.done]))[0]});return function(Zt){return pt.apply(this,arguments)}}();return re.set(te,Ut),Ut}!function Ue(he){de=he(de)}(he=>({...he,get:(te,ke,ft)=>ht(te,ke)||he.get(te,ke,ft),has:(te,ke)=>!!ht(te,ke)||he.has(te,ke)}));const Qr=new O.Yd("@firebase/app"),Lr="[DEFAULT]",qi={"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qt=new Map,tn=new Map;function rt(he,te){try{he.container.addComponent(te)}catch(ke){Qr.debug(`Component ${te.name} failed to register with FirebaseApp ${he.name}`,ke)}}function At(he,te){he.container.addOrOverwriteComponent(te)}function gi(he){const te=he.name;if(tn.has(te))return Qr.debug(`There were multiple attempts to register component ${te}.`),!1;tn.set(te,he);for(const ke of Qt.values())rt(ke,he);return!0}function Jr(he,te){const ke=he.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),he.container.getProvider(te)}function dr(he,te,ke=Lr){Jr(he,te).clearInstance(ke)}function Vr(){tn.clear()}const ei=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hn{constructor(te,ke,ft){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=ft,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}const Ms="9.23.0";function qt(he,te={}){let ke=he;"object"!=typeof te&&(te={name:te});const ft=Object.assign({name:Lr,automaticDataCollectionEnabled:!1},te),It=ft.name;if("string"!=typeof It||!It)throw ei.create("bad-app-name",{appName:String(It)});if(ke||(ke=(0,ce.aH)()),!ke)throw ei.create("no-options");const Ut=Qt.get(It);if(Ut){if((0,ce.vZ)(ke,Ut.options)&&(0,ce.vZ)(ft,Ut.config))return Ut;throw ei.create("duplicate-app",{appName:It})}const pt=new Y.H0(It);for(const Zt of tn.values())pt.addComponent(Zt);const Xt=new hn(ke,ft,pt);return Qt.set(It,Xt),Xt}function Wi(he=Lr){const te=Qt.get(he);if(!te&&he===Lr&&(0,ce.aH)())return qt();if(!te)throw ei.create("no-app",{appName:he});return te}function nn(){return Array.from(Qt.values())}function mi(he){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,g.Z)(function*(he){const te=he.name;Qt.has(te)&&(Qt.delete(te),yield Promise.all(he.container.getProviders().map(ke=>ke.delete())),he.isDeleted=!0)})).apply(this,arguments)}function $n(he,te,ke){var ft;let It=null!==(ft=qi[he])&&void 0!==ft?ft:he;ke&&(It+=`-${ke}`);const Ut=It.match(/\s|\//),pt=te.match(/\s|\//);if(Ut||pt){const Xt=[`Unable to register library "${It}" with version "${te}":`];return Ut&&Xt.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Ut&&pt&&Xt.push("and"),pt&&Xt.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void Qr.warn(Xt.join(" "))}gi(new Y.wA(`${It}-version`,()=>({library:It,version:te}),"VERSION"))}function Oi(he,te){if(null!==he&&"function"!=typeof he)throw ei.create("invalid-log-argument");(0,O.Am)(he,te)}function En(he){(0,O.Ub)(he)}},1617:(Et,Pe,F)=>{F.d(Pe,{H0:()=>Ee,wA:()=>O});var g=F(5861),Y=F(5578);class O{constructor(z,$,K){this.name=z,this.instanceFactory=$,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ce="[DEFAULT]";class oe{constructor(z,$){this.name=z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const $=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has($)){const K=new Y.BH;if(this.instancesDeferred.set($,K),this.isInitialized($)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:$});Qe&&K.resolve(Qe)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(z){var $;const K=this.normalizeInstanceIdentifier(z?.identifier),Qe=null!==($=z?.optional)&&void 0!==$&&$;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Me){if(Qe)return null;throw Me}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function we(De){return"EAGER"===De.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[$,K]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:Qe});K.resolve(Me)}catch{}}}}clearInstance(z=ce){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,g.Z)(function*(){const $=Array.from(z.instances.values());yield Promise.all([...$.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...$.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ce){return this.instances.has(z)}getOptions(z=ce){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:$={}}=z,K=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:K,options:$});for(const[Me,Dt]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Me)&&Dt.resolve(Qe);return Qe}onInit(z,$){var K;const Qe=this.normalizeInstanceIdentifier($),Me=null!==(K=this.onInitCallbacks.get(Qe))&&void 0!==K?K:new Set;Me.add(z),this.onInitCallbacks.set(Qe,Me);const Dt=this.instances.get(Qe);return Dt&&z(Dt,Qe),()=>{Me.delete(z)}}invokeOnInitCallbacks(z,$){const K=this.onInitCallbacks.get($);if(K)for(const Qe of K)try{Qe(z,$)}catch{}}getOrInitializeService({instanceIdentifier:z,options:$={}}){let K=this.instances.get(z);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(De=z,De===ce?void 0:De),options:$}),this.instances.set(z,K),this.instancesOptions.set(z,$),this.invokeOnInitCallbacks(K,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,K)}catch{}var De;return K||null}normalizeInstanceIdentifier(z=ce){return this.component?this.component.multipleInstances?z:ce:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const $=this.getProvider(z.name);if($.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);$.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const $=new oe(z,this);return this.providers.set(z,$),$}getProviders(){return Array.from(this.providers.values())}}},9357:(Et,Pe,F)=>{F.d(Pe,{Am:()=>De,Ub:()=>Ee,Yd:()=>we,in:()=>Y});const g=[];var Y=(()=>((Y=Y||{})[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",Y))();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ce=Y.INFO,oe={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},le=(z,$,...K)=>{if($<z.logLevel)return;const Qe=(new Date).toISOString(),Me=oe[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${Qe}]  ${z.name}:`,...K)};class we{constructor($){this.name=$,this._logLevel=ce,this._logHandler=le,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Y))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...$),this._logHandler(this,Y.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...$),this._logHandler(this,Y.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...$),this._logHandler(this,Y.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...$),this._logHandler(this,Y.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...$),this._logHandler(this,Y.ERROR,...$)}}function Ee(z){g.forEach($=>{$.setLogLevel(z)})}function De(z,$){for(const K of g){let Qe=null;$&&$.level&&(Qe=O[$.level]),K.userLogHandler=null===z?null:(Me,Dt,...Ke)=>{const de=Ke.map(Ue=>{if(null==Ue)return null;if("string"==typeof Ue)return Ue;if("number"==typeof Ue||"boolean"==typeof Ue)return Ue.toString();if(Ue instanceof Error)return Ue.message;try{return JSON.stringify(Ue)}catch{return null}}).filter(Ue=>Ue).join(" ");Dt>=(Qe??Me.logLevel)&&z({level:Y[Dt].toLowerCase(),message:de,args:Ke,type:Me.name})}}}},8140:(Et,Pe,F)=>{F.d(Pe,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=F(7212)},1274:(Et,Pe,F)=>{F.d(Pe,{Z:()=>g.Z});var g=F(6101)},8463:(Et,Pe,F)=>{F.r(Pe);var g=F(5861),Y=F(6101),O=F(5578),ce=F(7212),oe=F(7582),le=F(9357);F(1617);const De={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ke=Me,de=new O.LL("auth","Firebase",Me()),Ce=new le.Yd("@firebase/auth");function xe(m,...h){Ce.logLevel<=le.in.ERROR&&Ce.error(`Auth (${ce.SDK_VERSION}): ${m}`,...h)}function ve(m,...h){throw at(m,...h)}function Ie(m,...h){return at(m,...h)}function Ge(m,h,f){const v=Object.assign(Object.assign({},Ke()),{[h]:f});return new O.LL("auth","Firebase",v).create(h,{appName:m.name})}function Oe(m,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&ve(m,"argument-error"),Ge(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function at(m,...h){if("string"!=typeof m){const f=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=m.name),m._errorFactory.create(f,...v)}return de.create(m,...h)}function re(m,h,...f){if(!m)throw at(h,...f)}function ht(m){const h="INTERNAL ASSERTION FAILED: "+m;throw xe(h),new Error(h)}function Je(m,h){m||ht(h)}function jt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function xs(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Pi{constructor(h,f){this.shortDelay=h,this.longDelay=f,Je(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Qr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function ut(){return"http:"===xs()||"https:"===xs()}()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zi(m,h){Je(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class Ro{static initialize(h,f,v){this.fetchImpl=h,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Q=new Pi(3e4,6e4);function ne(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function se(m,h,f,v){return Te.apply(this,arguments)}function Te(){return(Te=(0,g.Z)(function*(m,h,f,v,T={}){return ye(m,T,(0,g.Z)(function*(){let M={},B={};v&&("GET"===h?B=v:M={body:JSON.stringify(v)});const Z=(0,O.xO)(Object.assign({key:m.config.apiKey},B)).slice(1),Ae=yield m._getAdditionalHeaders();return Ae["Content-Type"]="application/json",m.languageCode&&(Ae["X-Firebase-Locale"]=m.languageCode),Ro.fetch()(Tt(m,m.config.apiHost,f,Z),Object.assign({method:h,headers:Ae,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function ye(m,h,f){return ct.apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(m,h,f){m._canInitEmulator=!1;const v=Object.assign(Object.assign({},ee),h);try{const T=new cn(m),M=yield Promise.race([f(),T.promise]);T.clearNetworkTimeout();const B=yield M.json();if("needConfirmation"in B)throw yn(m,"account-exists-with-different-credential",B);if(M.ok&&!("errorMessage"in B))return B;{const Z=M.ok?B.errorMessage:B.error.message,[Ae,$e]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ae)throw yn(m,"credential-already-in-use",B);if("EMAIL_EXISTS"===Ae)throw yn(m,"email-already-in-use",B);if("USER_DISABLED"===Ae)throw yn(m,"user-disabled",B);const et=v[Ae]||Ae.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw Ge(m,et,$e);ve(m,et)}}catch(T){if(T instanceof O.ZR)throw T;ve(m,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function Nt(m,h,f,v){return rn.apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(m,h,f,v,T={}){const M=yield se(m,h,f,v,T);return"mfaPendingCredential"in M&&ve(m,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Tt(m,h,f,v){const T=`${h}${f}?${v}`;return m.config.emulator?zi(m.config,T):`${m.config.apiScheme}://${T}`}class cn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(Ie(this.auth,"network-request-failed")),Q.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yn(m,h,f){const v={appName:m.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const T=Ie(m,h,v);return T.customData._tokenResponse=f,T}function Ht(){return(Ht=(0,g.Z)(function*(m,h){return se(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function jn(){return(jn=(0,g.Z)(function*(m,h){return se(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function it(){return(it=(0,g.Z)(function*(m,h){return se(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Xr(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Lr(){return(Lr=(0,g.Z)(function*(m,h=!1){const f=(0,O.m9)(m),v=yield f.getIdToken(h),T=Qt(v);re(T&&T.exp&&T.auth_time&&T.iat,f.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,B=M?.sign_in_provider;return{claims:T,token:v,authTime:Xr(qi(T.auth_time)),issuedAtTime:Xr(qi(T.iat)),expirationTime:Xr(qi(T.exp)),signInProvider:B||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function qi(m){return 1e3*Number(m)}function Qt(m){const[h,f,v]=m.split(".");if(void 0===h||void 0===f||void 0===v)return xe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(f);return T?JSON.parse(T):(xe("Failed to decode base64 JWT payload"),null)}catch(T){return xe("Caught error parsing JWT payload as JSON",T?.toString()),null}}function rt(m,h){return At.apply(this,arguments)}function At(){return(At=(0,g.Z)(function*(m,h,f=!1){if(f)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&function gi({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(v)&&m.auth.currentUser===m&&(yield m.auth.signOut()),v}})).apply(this,arguments)}class Jr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class dr{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vr(m){return Sn.apply(this,arguments)}function Sn(){return Sn=(0,g.Z)(function*(m){var h;const f=m.auth,v=yield m.getIdToken(),T=yield rt(m,function wn(m,h){return it.apply(this,arguments)}(f,{idToken:v}));re(T?.users.length,f,"internal-error");const M=T.users[0];m._notifyReloadListener(M);const B=null!==(h=M.providerUserInfo)&&void 0!==h&&h.length?function qt(m){return m.map(h=>{var{providerId:f}=h,v=(0,oe._T)(h,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}(M.providerUserInfo):[],Z=function Ms(m,h){return[...m.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}(m.providerData,B),et=!!m.isAnonymous&&!(m.email&&M.passwordHash||Z?.length),tt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:Z,metadata:new dr(M.createdAt,M.lastLoginAt),isAnonymous:et};Object.assign(m,tt)}),Sn.apply(this,arguments)}function hn(){return(hn=(0,g.Z)(function*(m){const h=(0,O.m9)(m);yield Vr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function nn(){return(nn=(0,g.Z)(function*(m,h){const f=yield ye(m,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:M}=m.config,B=Tt(m,T,"/v1/token",`key=${M}`),Z=yield m._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",Ro.fetch()(B,{method:"POST",headers:Z,body:v})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class mi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){re(h.idToken,"internal-error"),re(typeof h.idToken<"u","internal-error"),re(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function tn(m){const h=Qt(m);return re(h,"internal-error"),re(typeof h.exp<"u","internal-error"),re(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var v=this;return(0,g.Z)(function*(){return re(!v.accessToken||v.refreshToken,h,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:B}=yield function Wi(m,h){return nn.apply(this,arguments)}(h,f);v.updateTokensAndExpiration(T,M,Number(B))})()}updateTokensAndExpiration(h,f,v){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,f){const{refreshToken:v,accessToken:T,expirationTime:M}=f,B=new mi;return v&&(re("string"==typeof v,"internal-error",{appName:h}),B.refreshToken=v),T&&(re("string"==typeof T,"internal-error",{appName:h}),B.accessToken=T),M&&(re("number"==typeof M,"internal-error",{appName:h}),B.expirationTime=M),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new mi,this.toJSON())}_performRefresh(){return ht("not implemented")}}function Rn(m,h){re("string"==typeof m||typeof m>"u","internal-error",{appName:h})}class $n{constructor(h){var{uid:f,auth:v,stsTokenManager:T}=h,M=(0,oe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new dr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,g.Z)(function*(){const v=yield rt(f,f.stsTokenManager.getToken(f.auth,h));return re(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(h){return function wr(m){return Lr.apply(this,arguments)}(this,h)}reload(){return function ei(m){return hn.apply(this,arguments)}(this)}_assign(h){this!==h&&(re(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new $n(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var v=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),f&&(yield Vr(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const f=yield h.getIdToken();return yield rt(h,function Fr(m,h){return Ht.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var v,T,M,B,Z,Ae,$e,et;const tt=null!==(v=f.displayName)&&void 0!==v?v:void 0,gn=null!==(T=f.email)&&void 0!==T?T:void 0,ws=null!==(M=f.phoneNumber)&&void 0!==M?M:void 0,fl=null!==(B=f.photoURL)&&void 0!==B?B:void 0,vg=null!==(Z=f.tenantId)&&void 0!==Z?Z:void 0,An=null!==(Ae=f._redirectEventId)&&void 0!==Ae?Ae:void 0,Ry=null!==($e=f.createdAt)&&void 0!==$e?$e:void 0,Ny=null!==(et=f.lastLoginAt)&&void 0!==et?et:void 0,{uid:pl,emailVerified:Mf,isAnonymous:Py,providerData:wg,stsTokenManager:Oy}=f;re(pl&&Oy,h,"internal-error");const y0=mi.fromJSON(this.name,Oy);re("string"==typeof pl,h,"internal-error"),Rn(tt,h.name),Rn(gn,h.name),re("boolean"==typeof Mf,h,"internal-error"),re("boolean"==typeof Py,h,"internal-error"),Rn(ws,h.name),Rn(fl,h.name),Rn(vg,h.name),Rn(An,h.name),Rn(Ry,h.name),Rn(Ny,h.name);const Eg=new $n({uid:pl,auth:h,email:gn,emailVerified:Mf,displayName:tt,isAnonymous:Py,photoURL:fl,phoneNumber:ws,tenantId:vg,stsTokenManager:y0,createdAt:Ry,lastLoginAt:Ny});return wg&&Array.isArray(wg)&&(Eg.providerData=wg.map(aD=>Object.assign({},aD))),An&&(Eg._redirectEventId=An),Eg}static _fromIdTokenResponse(h,f,v=!1){return(0,g.Z)(function*(){const T=new mi;T.updateFromServerResponse(f);const M=new $n({uid:f.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield Vr(M),M})()}}const Oi=new Map;function En(m){Je(m instanceof Function,"Expected a class definition");let h=Oi.get(m);return h?(Je(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,Oi.set(m,h),h)}function V(m,h,f){return`firebase:${m}:${h}:${f}`}function X(m=(0,O.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Kt(m=(0,O.z$)()){return/android/i.test(m)}function on(m=(0,O.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function Ki(m=(0,O.z$)()){return on(m)||Kt(m)||function bn(m=(0,O.z$)()){return/webos/i.test(m)}(m)||function Ln(m=(0,O.z$)()){return/blackberry/i.test(m)}(m)||/windows phone/i.test(m)||function Ct(m=(0,O.z$)()){return/iemobile/i.test(m)}(m)}function ln(m){return(0,O.m9)(m)}class as{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return ht("not implemented")}_getIdTokenResponse(h){return ht("not implemented")}_linkToIdToken(h,f){return ht("not implemented")}_getReauthenticationResolver(h){return ht("not implemented")}}function Oo(m,h){return us.apply(this,arguments)}function us(){return(us=(0,g.Z)(function*(m,h){return se(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ti(m,h){return wa.apply(this,arguments)}function wa(){return(wa=(0,g.Z)(function*(m,h){return se(m,"POST","/v1/accounts:sendOobCode",ne(m,h))})).apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(m,h){return ti(m,h)})).apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(m,h){return ti(m,h)})).apply(this,arguments)}function Li(m,h){return rd.apply(this,arguments)}function rd(){return(rd=(0,g.Z)(function*(m,h){return Nt(m,"POST","/v1/accounts:signInWithIdp",ne(m,h))})).apply(this,arguments)}class cs extends as{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new cs(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):ve("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=f,M=(0,oe._T)(f,["providerId","signInMethod"]);if(!v||!T)return null;const B=new cs(v,T);return B.idToken=M.idToken||void 0,B.accessToken=M.accessToken||void 0,B.secret=M.secret,B.nonce=M.nonce,B.pendingToken=M.pendingToken||null,B}_getIdTokenResponse(h){return Li(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Li(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Li(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,O.xO)(f)}return h}}function kc(){return(kc=(0,g.Z)(function*(m,h){return se(m,"POST","/v1/accounts:sendVerificationCode",ne(m,h))})).apply(this,arguments)}function id(){return(id=(0,g.Z)(function*(m,h){return Nt(m,"POST","/v1/accounts:signInWithPhoneNumber",ne(m,h))})).apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(m,h){const f=yield Nt(m,"POST","/v1/accounts:signInWithPhoneNumber",ne(m,h));if(f.temporaryProof)throw yn(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const sd={USER_NOT_FOUND:"user-not-found"};function hu(){return(hu=(0,g.Z)(function*(m,h){return Nt(m,"POST","/v1/accounts:signInWithPhoneNumber",ne(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),sd)})).apply(this,arguments)}class ii extends as{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new ii({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new ii({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function Wp(m,h){return id.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function Kp(m,h){return du.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function hy(m,h){return hu.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:v,verificationCode:T}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:v,phoneNumber:T,temporaryProof:M}=h;return v||f||T||M?new ii({verificationId:f,verificationCode:v,phoneNumber:T,temporaryProof:M}):null}}class ls{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Yi extends ls{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Xs extends Yi{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return re("providerId"in f&&"signInMethod"in f,"argument-error"),cs._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return re(h.idToken||h.accessToken,"argument-error"),cs._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Xs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Xs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:M,nonce:B,providerId:Z}=h;if(!v&&!T&&!f&&!M||!Z)return null;try{return new Xs(Z)._credential({idToken:f,accessToken:v,nonce:B,pendingToken:M})}catch{return null}}}let Fc=(()=>{class m extends Yi{constructor(){super("facebook.com")}static credential(f){return cs._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),fu=(()=>{class m extends Yi{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return cs._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:T}=f;if(!v&&!T)return null;try{return m.credential(v,T)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Kh=(()=>{class m extends Yi{constructor(){super("github.com")}static credential(f){return cs._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Ns extends as{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Li(h,this.buildRequest())}_linkToIdToken(h,f){const v=this.buildRequest();return v.idToken=f,Li(h,v)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Li(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:M}=f;return v&&T&&M&&v===T?new Ns(v,M):null}static _create(h,f){return new Ns(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let gu=(()=>{class m extends Yi{constructor(){super("twitter.com")}static credential(f,v){return cs._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=f;if(!v||!T)return null;try{return m.credential(v,T)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();class Ar{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,v,T=!1){return(0,g.Z)(function*(){const M=yield $n._fromIdTokenResponse(h,v,T),B=Ia(v);return new Ar({user:M,providerId:B,_tokenResponse:v,operationType:f})})()}static _forOperation(h,f,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=Ia(v);return new Ar({user:h,providerId:T,_tokenResponse:v,operationType:f})})()}}function Ia(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}class ds extends O.ZR{constructor(h,f,v,T){var M;super(f.code,f.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,ds.prototype),this.customData={appName:h.name,tenantId:null!==(M=h.tenantId)&&void 0!==M?M:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,f,v,T){return new ds(h,f,v,T)}}function pr(m,h,f,v){return("reauthenticate"===h?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ds._fromErrorAndOperation(m,M,h,v):M})}function ad(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function xr(){return xr=(0,g.Z)(function*(m,h){const f=(0,O.m9)(m);yield hs(!0,f,h);const{providerUserInfo:v}=yield function Fn(m,h){return jn.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),T=ad(v||[]);return f.providerData=f.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),xr.apply(this,arguments)}function tr(m,h){return mu.apply(this,arguments)}function mu(){return(mu=(0,g.Z)(function*(m,h,f=!1){const v=yield rt(m,h._linkToIdToken(m.auth,yield m.getIdToken()),f);return Ar._forOperation(m,"link",v)})).apply(this,arguments)}function hs(m,h,f){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,g.Z)(function*(m,h,f){yield Vr(h);const T=!1===m?"provider-already-linked":"no-such-provider";re(ad(h.providerData).has(f)===m,h.auth,T)})).apply(this,arguments)}function Os(m,h){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,g.Z)(function*(m,h,f=!1){const{auth:v}=m,T="reauthenticate";try{const M=yield rt(m,pr(v,T,h,m),f);re(M.idToken,v,"internal-error");const B=Qt(M.idToken);re(B,v,"internal-error");const{sub:Z}=B;return re(m.uid===Z,v,"user-mismatch"),Ar._forOperation(m,T,M)}catch(M){throw"auth/user-not-found"===M?.code&&ve(v,"user-mismatch"),M}})).apply(this,arguments)}function Da(m,h){return xt.apply(this,arguments)}function xt(){return(xt=(0,g.Z)(function*(m,h,f=!1){const v="signIn",T=yield pr(m,v,h),M=yield Ar._fromIdTokenResponse(m,v,T);return f||(yield m._updateCurrentUser(M.user)),M})).apply(this,arguments)}function ld(m,h){return yu.apply(this,arguments)}function yu(){return(yu=(0,g.Z)(function*(m,h){const f=(0,O.m9)(m);return yield hs(!1,f,h.providerId),tr(f,h)})).apply(this,arguments)}function dd(m,h){return _u.apply(this,arguments)}function _u(){return(_u=(0,g.Z)(function*(m,h){return Os((0,O.m9)(m),h)})).apply(this,arguments)}class Ca{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?Ta._fromServerResponse(h,f):"totpInfo"in f?nr._fromServerResponse(h,f):ve(h,"internal-error")}}class Ta extends Ca{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new Ta(f)}}class nr extends Ca{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new nr(f)}}function Js(m,h,f){var v;re((null===(v=f.url)||void 0===v?void 0:v.length)>0,m,"invalid-continue-uri"),re(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(re(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(re(f.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function xa(){return xa=(0,g.Z)(function*(m,h){const f=(0,O.m9)(m),T={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&Js(f.auth,T,h);const{email:M}=yield function Pc(m,h){return Fo.apply(this,arguments)}(f.auth,T);M!==m.email&&(yield m.reload())}),xa.apply(this,arguments)}function Ma(){return Ma=(0,g.Z)(function*(m,h,f){const v=(0,O.m9)(m),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};f&&Js(v.auth,M,f);const{email:B}=yield function ni(m,h){return ri.apply(this,arguments)}(v.auth,M);B!==m.email&&(yield m.reload())}),Ma.apply(this,arguments)}function Cu(){return(Cu=(0,g.Z)(function*(m,h){return se(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Tu(){return Tu=(0,g.Z)(function*(m,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const v=(0,O.m9)(m),M={idToken:yield v.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},B=yield rt(v,function md(m,h){return Cu.apply(this,arguments)}(v.auth,M));v.displayName=B.displayName||null,v.photoURL=B.photoUrl||null;const Z=v.providerData.find(({providerId:Ae})=>"password"===Ae);Z&&(Z.displayName=v.displayName,Z.photoURL=v.photoURL),yield v._updateTokensIfNecessary(B)}),Tu.apply(this,arguments)}function Cn(m,h,f){return Su.apply(this,arguments)}function Su(){return(Su=(0,g.Z)(function*(m,h,f){const{auth:v}=m,M={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(M.email=h),f&&(M.password=f);const B=yield rt(m,Oo(v,M));yield m._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class to{constructor(h,f,v={}){this.isNewUser=h,this.providerId=f,this.profile=v}}class Xh extends to{constructor(h,f,v,T){super(h,f,v),this.username=T}}class yd extends to{constructor(h,f){super(h,"facebook.com",f)}}class Xp extends Xh{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Au extends to{constructor(h,f){super(h,"google.com",f)}}class jc extends Xh{constructor(h,f,v){super(h,"twitter.com",f,v)}}function $c(m){const{user:h,_tokenResponse:f}=m;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Qh(m){var h,f;if(!m)return null;const{providerId:v}=m,T=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},M=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!v&&m?.idToken){const B=null===(f=null===(h=Qt(m.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(B)return new to(M,"anonymous"!==B&&"custom"!==B?B:null)}if(!v)return null;switch(v){case"facebook.com":return new yd(M,T);case"github.com":return new Xp(M,T);case"google.com":return new Au(M,T);case"twitter.com":return new jc(M,T,m.screenName||null);case"custom":case"anonymous":return new to(M,null);default:return new to(M,v,T)}}(f)}class no{constructor(h,f,v){this.type=h,this.credential=f,this.auth=v}static _fromIdtoken(h,f){return new no("enroll",h,f)}static _fromMfaPendingCredential(h){return new no("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,v;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return no._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(v=h.multiFactorSession)&&void 0!==v&&v.idToken)return no._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ro{constructor(h,f,v){this.session=h,this.hints=f,this.signInResolver=v}static _fromError(h,f){const v=ln(h),T=f.customData._serverResponse,M=(T.mfaInfo||[]).map(Z=>Ca._fromServerResponse(v,Z));re(T.mfaPendingCredential,v,"internal-error");const B=no._fromMfaPendingCredential(T.mfaPendingCredential);return new ro(B,M,function(){var Z=(0,g.Z)(function*(Ae){const $e=yield Ae._process(v,B);delete T.mfaInfo,delete T.mfaPendingCredential;const et=Object.assign(Object.assign({},T),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(f.operationType){case"signIn":const tt=yield Ar._fromIdTokenResponse(v,f.operationType,et);return yield v._updateCurrentUser(tt.user),tt;case"reauthenticate":return re(f.user,v,"internal-error"),Ar._forOperation(f.user,f.operationType,et);default:ve(v,"internal-error")}});return function(Ae){return Z.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,g.Z)(function*(){return f.signInResolver(h)})()}}class oo{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>Ca._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new oo(h)}getSession(){var h=this;return(0,g.Z)(function*(){return no._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,f){var v=this;return(0,g.Z)(function*(){const T=h,M=yield v.getSession(),B=yield rt(v.user,T._process(v.user.auth,M,f));return yield v.user._updateTokensIfNecessary(B),v.user.reload()})()}unenroll(h){var f=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield f.user.getIdToken();try{const M=yield rt(f.user,function Ru(m,h){return se(m,"POST","/v2/accounts/mfaEnrollment:withdraw",ne(m,h))}(f.user.auth,{idToken:T,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:B})=>B!==v),yield f.user._updateTokensIfNecessary(M),yield f.user.reload()}catch(M){throw M}})()}}const ks=new WeakMap;class Nu{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const uo=(()=>{class m extends Nu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Na(){const m=(0,O.z$)();return X(m)||on(m)}()&&function ya(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ki(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),M=this.localCache[v];T!==M&&f(v,M,T)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((Z,Ae,$e)=>{this.notifyListeners(Z,$e)});const T=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(T);if(f.newValue!==Z)null!==f.newValue?this.storage.setItem(T,f.newValue):this.storage.removeItem(T);else if(this.localCache[T]===f.newValue&&!v)return}const M=()=>{const Z=this.storage.getItem(T);!v&&this.localCache[T]===Z||this.notifyListeners(T,Z)},B=this.storage.getItem(T);!function Fi(){return(0,O.w1)()&&10===document.documentMode}()||B===f.newValue||f.newValue===f.oldValue?M():setTimeout(M,10)}notifyListeners(f,v){this.localCache[f]=v;const T=this.listeners[f];if(T)for(const M of Array.from(T))M(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var T=()=>super._set,M=this;return(0,g.Z)(function*(){yield T().call(M,f,v),M.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const M=yield v().call(T,f);return T.localCache[f]=JSON.stringify(M),M})()}_remove(f){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,f),delete T.localCache[f]})()}}return m.type="LOCAL",m})(),ms=(()=>{class m extends Nu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return m.type="SESSION",m})();function qo(m="",h=10){let f="";for(let v=0;v<h;v++)f+=Math.floor(10*Math.random());return m+f}function fn(){return window}const Va="recaptcha";class Xi{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=ii._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function Uu(){return(Uu=(0,g.Z)(function*(m,h,f){const v=(0,O.m9)(m);yield hs(!1,v,"phone");const T=yield ju(v.auth,h,(0,O.m9)(f));return new Xi(T,M=>ld(v,M))})).apply(this,arguments)}function Xc(){return(Xc=(0,g.Z)(function*(m,h,f){const v=(0,O.m9)(m),T=yield ju(v.auth,h,(0,O.m9)(f));return new Xi(T,M=>dd(v,M))})).apply(this,arguments)}function ju(m,h,f){return $r.apply(this,arguments)}function $r(){return $r=(0,g.Z)(function*(m,h,f){var v;const T=yield f.verify();try{let M;if(re("string"==typeof T,m,"argument-error"),re(f.type===Va,m,"argument-error"),M="string"==typeof h?{phoneNumber:h}:h,"session"in M){const B=M.session;if("phoneNumber"in M)return re("enroll"===B.type,m,"internal-error"),(yield function Go(m,h){return se(m,"POST","/v2/accounts/mfaEnrollment:start",ne(m,h))}(m,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{re("signin"===B.type,m,"internal-error");const Z=(null===(v=M.multiFactorHint)||void 0===v?void 0:v.uid)||M.multiFactorUid;return re(Z,m,"missing-multi-factor-info"),(yield function Zo(m,h){return se(m,"POST","/v2/accounts/mfaSignIn:start",ne(m,h))}(m,{mfaPendingCredential:B.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield function qp(m,h){return kc.apply(this,arguments)}(m,{phoneNumber:M.phoneNumber,recaptchaToken:T});return B}}finally{f._reset()}}),$r.apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(m,h){yield tr((0,O.m9)(m),h)})).apply(this,arguments)}let _s=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=ln(f)}verifyPhoneNumber(f,v){return ju(this.auth,f,(0,O.m9)(v))}static credential(f,v){return ii._fromVerification(f,v)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:T}=f;return v&&T?ii._fromTokenResponse(v,T):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Un(m,h){return h?En(h):(re(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Kn extends as{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Li(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Li(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Li(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Jc(m){return Da(m.auth,new Kn(m),m.bypassAuthState)}function Ui(m){const{auth:h,user:f}=m;return re(f,h,"internal-error"),Os(f,new Kn(m),m.bypassAuthState)}function Hr(m){return $u.apply(this,arguments)}function $u(){return($u=(0,g.Z)(function*(m){const{auth:h,user:f}=m;return re(f,h,"internal-error"),tr(f,new Kn(m),m.bypassAuthState)})).apply(this,arguments)}class sr{constructor(h,f,v,T,M=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,g.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(M){h.reject(M)}});return function(v,T){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:M,tenantId:B,error:Z,type:Ae}=h;if(Z)return void f.reject(Z);const $e={auth:f.auth,requestUri:v,sessionId:T,tenantId:B||void 0,postBody:M||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ae)($e))}catch(et){f.reject(et)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Jc;case"linkViaPopup":case"linkViaRedirect":return Hr;case"reauthViaPopup":case"reauthViaRedirect":return Ui;default:ve(this.auth,"internal-error")}}resolve(h){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const si=new Pi(2e3,1e4);function ge(){return(ge=(0,g.Z)(function*(m,h,f){const v=(0,O.m9)(m);Oe(v.auth,h,ls);const T=Un(v.auth,f);return new vs(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function Mt(){return(Mt=(0,g.Z)(function*(m,h,f){const v=(0,O.m9)(m);Oe(v.auth,h,ls);const T=Un(v.auth,f);return new vs(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let vs=(()=>{class m extends sr{constructor(f,v,T,M,B){super(f,v,M,B),this.provider=T,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const v=yield f.execute();return re(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,g.Z)(function*(){Je(1===f.filter.length,"Popup operations only handle one event");const v=qo();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(T=>{f.reject(T)}),f.resolver._isIframeWebStorageSupported(f.auth,T=>{T||f.reject(Ie(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,T;this.pollId=null!==(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,si.get())};f()}}return m.currentPopupAction=null,m})();const Ls="pendingRedirect",Vs=new Map;class cf extends sr{constructor(h,f,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,g.Z)(function*(){let v=Vs.get(f.auth._key());if(!v){try{const M=(yield function el(m,h){return bd.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;v=()=>Promise.resolve(M)}catch(T){v=()=>Promise.reject(T)}Vs.set(f.auth._key(),v)}return f.bypassAuthState||Vs.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,f().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function bd(){return(bd=(0,g.Z)(function*(m,h){const f=tl(h),v=Td(m);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(f));return yield v._remove(f),T})).apply(this,arguments)}function an(m,h){return gt.apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(m,h){return Td(m)._set(tl(h),"true")})).apply(this,arguments)}function Hu(m,h){Vs.set(m._key(),h)}function Td(m){return En(m._redirectPersistence)}function tl(m){return V(Ls,m.config.apiKey,m.name)}function Sd(m,h,f){return function Ba(m,h,f){return Gu.apply(this,arguments)}(m,h,f)}function Gu(){return(Gu=(0,g.Z)(function*(m,h,f){const v=(0,O.m9)(m);Oe(v.auth,h,ls),yield v.auth._initializationPromise;const T=Un(v.auth,f);yield an(T,v.auth);const M=yield Ua(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",M)})).apply(this,arguments)}function hf(m,h,f){return function ff(m,h,f){return rl.apply(this,arguments)}(m,h,f)}function rl(){return(rl=(0,g.Z)(function*(m,h,f){const v=(0,O.m9)(m);Oe(v.auth,h,ls),yield v.auth._initializationPromise;const T=Un(v.auth,f);yield hs(!1,v,h.providerId),yield an(T,v.auth);const M=yield Ua(v);return T._openRedirect(v.auth,h,"linkViaRedirect",M)})).apply(this,arguments)}function zu(m,h){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,g.Z)(function*(m,h,f=!1){const v=ln(m),T=Un(v,h),B=yield new cf(v,T,f).execute();return B&&!f&&(delete B.user._redirectEventId,yield v._persistUserIfCurrent(B.user),yield v._setRedirectUser(null,h)),B})).apply(this,arguments)}function Ua(m){return qu.apply(this,arguments)}function qu(){return(qu=(0,g.Z)(function*(m){const h=qo(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class Us{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(f=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Md(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return il(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var v;if(h.error&&!il(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(Ie(this.auth,T))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const v=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(or(h))}saveEventToCache(h){this.cachedEventUids.add(or(h)),this.lastProcessedEventTime=Date.now()}}function or(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function il({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===h?.code}function sl(m){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,g.Z)(function*(m,h={}){return se(m,"GET","/v1/projects",h)})).apply(this,arguments)}const ol=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zu=/^https?/;function Yu(){return(Yu=(0,g.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield sl(m);for(const f of h)try{if(al(f))return}catch{}ve(m,"unauthorized-domain")})).apply(this,arguments)}function al(m){const h=jt(),{protocol:f,hostname:v}=new URL(h);if(m.startsWith("chrome-extension://")){const B=new URL(m);return""===B.hostname&&""===v?"chrome-extension:"===f&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&B.hostname===v}if(!Zu.test(f))return!1;if(ol.test(m))return v===m;const T=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Qu=new Pi(3e4,6e4);function Zn(){const m=fn().___jsl;if(m?.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let ar=null;function Rd(m){return ar=ar||function go(m){return new Promise((h,f)=>{var v,T,M;function B(){Zn(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Zn(),f(Ie(m,"network-request-failed"))},timeout:Qu.get()})}if(null!==(T=null===(v=fn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(M=fn().gapi)||void 0===M||!M.load){const Z=function Hn(m){return`__${m}${Math.floor(1e6*Math.random())}`}("iframefcb");return fn()[Z]=()=>{gapi.load?B():f(Ie(m,"network-request-failed"))},function Er(m){return new Promise((h,f)=>{const v=document.createElement("script");v.setAttribute("src",m),v.onload=h,v.onerror=T=>{const M=Ie("internal-error");M.customData=T,f(M)},v.type="text/javascript",v.charset="UTF-8",function Zt(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(v)})}(`https://apis.google.com/js/api.js?onload=${Z}`).catch(Ae=>f(Ae))}B()}}).catch(h=>{throw ar=null,h})}(m),ar}const Nd=new Pi(5e3,15e3),Di="__/auth/iframe",pf="emulator/auth/iframe",mo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mf(m){const h=m.config;re(h.authDomain,m,"auth-domain-config-required");const f=h.emulator?zi(h,pf):`https://${m.config.authDomain}/${Di}`,v={apiKey:h.apiKey,appName:m.name,v:ce.SDK_VERSION},T=gf.get(m.config.apiHost);T&&(v.eid=T);const M=m._getFrameworks();return M.length&&(v.fw=M.join(",")),`${f}?${(0,O.xO)(v).slice(1)}`}function ul(){return ul=(0,g.Z)(function*(m){const h=yield Rd(m),f=fn().gapi;return re(f,m,"internal-error"),h.open({where:document.body,url:mf(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mo,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(M,B){yield v.restyle({setHideOnLeave:!1});const Z=Ie(m,"network-request-failed"),Ae=fn().setTimeout(()=>{B(Z)},Nd.get());function $e(){fn().clearTimeout(Ae),M(v)}v.ping($e).then($e,()=>{B(Z)})});return function(M,B){return T.apply(this,arguments)}}()))}),ul.apply(this,arguments)}const Gr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Od=500,w=600,D="_blank",S="http://localhost";class P{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function U(m,h,f,v=Od,T=w){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-v)/2,0).toString();let Z="";const Ae=Object.assign(Object.assign({},Gr),{width:v.toString(),height:T.toString(),top:M,left:B}),$e=(0,O.z$)().toLowerCase();f&&(Z=function Le(m=(0,O.z$)()){return/crios\//i.test(m)}($e)?D:f),function me(m=(0,O.z$)()){return/firefox\//i.test(m)}($e)&&(h=h||S,Ae.scrollbars="yes");const et=Object.entries(Ae).reduce((gn,[ws,fl])=>`${gn}${ws}=${fl},`,"");if(function Sr(m=(0,O.z$)()){var h;return on(m)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}($e)&&"_self"!==Z)return function q(m,h){const f=document.createElement("a");f.href=m,f.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(h||"",Z),new P(null);const tt=window.open(h||"",Z,et);re(tt,m,"popup-blocked");try{tt.focus()}catch{}return new P(tt)}const ue="__/auth/handler",He="emulator/auth/handler",Fe=encodeURIComponent("fac");function qe(m,h,f,v,T,M){return St.apply(this,arguments)}function St(){return(St=(0,g.Z)(function*(m,h,f,v,T,M){re(m.config.authDomain,m,"auth-domain-config-required"),re(m.config.apiKey,m,"invalid-api-key");const B={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:v,v:ce.SDK_VERSION,eventId:T};if(h instanceof ls){h.setDefaultLanguage(m.languageCode),B.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[et,tt]of Object.entries(M||{}))B[et]=tt}if(h instanceof Yi){const et=h.getScopes().filter(tt=>""!==tt);et.length>0&&(B.scopes=et.join(","))}m.tenantId&&(B.tid=m.tenantId);const Z=B;for(const et of Object.keys(Z))void 0===Z[et]&&delete Z[et];const Ae=yield m._getAppCheckToken(),$e=Ae?`#${Fe}=${encodeURIComponent(Ae)}`:"";return`${function yt({config:m}){return m.emulator?zi(m,He):`https://${m.authDomain}/${ue}`}(m)}?${(0,O.xO)(Z).slice(1)}${$e}`})).apply(this,arguments)}const br="webStorageSupport",yo=class gr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ms,this._completeRedirectFn=zu,this._overrideRedirectResult=Hu}_openPopup(h,f,v,T){var M=this;return(0,g.Z)(function*(){var B;Je(null===(B=M.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Z=yield qe(h,f,v,jt(),T);return U(h,Z,qo())})()}_openRedirect(h,f,v,T){var M=this;return(0,g.Z)(function*(){return yield M._originValidation(h),function Id(m){fn().location.href=m}(yield qe(h,f,v,jt(),T)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:T,promise:M}=this.eventManagers[f];return T?Promise.resolve(T):(Je(M,"If manager is not set, promise should be"),M)}const v=this.initAndGetManager(h);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(h){var f=this;return(0,g.Z)(function*(){const v=yield function Pd(m){return ul.apply(this,arguments)}(h),T=new Us(h);return v.register("authEvent",M=>(re(M?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:T},f.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(br,{type:br},T=>{var M;const B=null===(M=T?.[0])||void 0===M?void 0:M[br];void 0!==B&&f(!!B),ve(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ja(m){return Yu.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Ki()||X()||on()}};function $s(){return window}const vy=2e3;function Hs(){return Hs=(0,g.Z)(function*(m,h,f){var v;const{BuildInfo:T}=$s();Je(h.sessionId,"AuthEvent did not contain a session ID");const M=yield function $a(m){return Vd.apply(this,arguments)}(h.sessionId),B={};return on()?B.ibi=T.packageName:Kt()?B.apn=T.packageName:ve(m,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=M,qe(m,f,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,B)}),Hs.apply(this,arguments)}function tc(){return(tc=(0,g.Z)(function*(m){const{BuildInfo:h}=$s(),f={};on()?f.iosBundleId=h.packageName:Kt()?f.androidPackageName=h.packageName:ve(m,"operation-not-supported-in-this-environment"),yield sl(m,f)})).apply(this,arguments)}function Ld(){return(Ld=(0,g.Z)(function*(m,h,f){const{cordova:v}=$s();let T=()=>{};try{yield new Promise((M,B)=>{let Z=null;function Ae(){var tt;M();const gn=null===(tt=v.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof gn&&gn(),"function"==typeof f?.close&&f.close()}function $e(){Z||(Z=window.setTimeout(()=>{B(Ie(m,"redirect-cancelled-by-user"))},vy))}function et(){"visible"===document?.visibilityState&&$e()}h.addPassiveListener(Ae),document.addEventListener("resume",$e,!1),Kt()&&document.addEventListener("visibilitychange",et,!1),T=()=>{h.removePassiveListener(Ae),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",et,!1),Z&&window.clearTimeout(Z)}})}finally{T()}})).apply(this,arguments)}function Vd(){return(Vd=(0,g.Z)(function*(m){const h=function vf(m){if(Je(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),f=new Uint8Array(h);for(let v=0;v<m.length;v++)f[v]=m.charCodeAt(v);return f}(m),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ag=20;class wf extends Us{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Ef(m){return cl.apply(this,arguments)}function cl(){return(cl=(0,g.Z)(function*(m){const h=yield Cr()._get(ea(m));return h&&(yield Cr()._remove(ea(m))),h})).apply(this,arguments)}function If(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<ag;f++){const v=Math.floor(Math.random()*h.length);m.push(h.charAt(v))}return m.join("")}function Cr(){return En(uo)}function ea(m){return V("authEvent",m.config.apiKey,m.name)}function Ga(m){if(!m?.includes("?"))return{};const[h,...f]=m.split("?");return(0,O.zd)(f.join("?"))}const ai=class bf{constructor(){this._redirectPersistence=ms,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zu,this._overrideRedirectResult=Hu}_initialize(h){var f=this;return(0,g.Z)(function*(){const v=h._key();let T=f.eventManagers.get(v);return T||(T=new wf(h),f.eventManagers.set(v,T),f.attachCallbackListeners(h,T)),T})()}_openPopup(h){ve(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,v,T){var M=this;return(0,g.Z)(function*(){!function og(m){var h,f,v,T,M,B,Z,Ae,$e,et;const tt=$s();re("function"==typeof(null===(h=tt?.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(f=tt?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(M=null===(T=null===(v=tt?.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Ae=null===(Z=null===(B=tt?.cordova)||void 0===B?void 0:B.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===Ae?void 0:Ae.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(et=null===($e=tt?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===et?void 0:et.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield M._initialize(h);yield B.initialized(),B.resetRedirect(),function Cd(){Vs.clear()}(),yield M._originValidation(h);const Z=function nc(m,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:If(),postBody:null,tenantId:m.tenantId,error:Ie(m,"no-auth-event")}}(h,v,T);yield function Ey(m,h){return Cr()._set(ea(m),h)}(h,Z);const Ae=yield function ig(m,h,f){return Hs.apply(this,arguments)}(h,Z,f),$e=yield function wy(m){const{cordova:h}=$s();return new Promise(f=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(m):T=h.InAppBrowser.open(m,function Gt(m=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(T)})})}(Ae);return function sg(m,h,f){return Ld.apply(this,arguments)}(h,B,$e)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ec(m){return tc.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:v,handleOpenURL:T,BuildInfo:M}=$s(),B=setTimeout((0,g.Z)(function*(){yield Ef(h),f.onEvent(cg())}),500),Z=function(){var et=(0,g.Z)(function*(tt){clearTimeout(B);const gn=yield Ef(h);let ws=null;gn&&tt?.url&&(ws=function ug(m,h){var f,v;const T=function Ha(m){const h=Ga(m),f=h.link?decodeURIComponent(h.link):void 0,v=Ga(f).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Ga(T).link||T||v||f||m}(h);if(T.includes("/__/auth/callback")){const M=Ga(T),B=M.firebaseError?function Bd(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,Z=null===(v=null===(f=B?.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],Ae=Z?Ie(Z):null;return Ae?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Ae,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:T,postBody:null}}return null}(gn,tt.url)),f.onEvent(ws||cg())});return function(gn){return et.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,Z);const Ae=T,$e=`${M.packageName.toLowerCase()}://`;$s().handleOpenURL=function(){var et=(0,g.Z)(function*(tt){if(tt.toLowerCase().startsWith($e)&&Z({url:tt}),"function"==typeof Ae)try{Ae(tt)}catch(gn){console.error(gn)}});return function(tt){return et.apply(this,arguments)}}()}};function cg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}const dg=1e3;function es(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function pg(){return function ll(m=(0,O.z$)()){return!("file:"!==es()&&"ionic:"!==es()&&"capacitor:"!==es()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}()&&typeof document<"u"}function sc(){return(sc=(0,g.Z)(function*(){return!!pg()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},dg);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const Tf="persistence";function Af(m){return jd.apply(this,arguments)}function jd(){return(jd=(0,g.Z)(function*(m){yield m._initializationPromise;const h=function $d(){var m;try{return(null===(m=function Cf(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}(),f=V(Tf,m.config.apiKey,m.name);h&&h.setItem(f,m._getPersistence())})).apply(this,arguments)}const mg=re;class zr{constructor(){this.browserResolver=En(yo),this.cordovaResolver=En(ai),this.underlyingResolver=null,this._redirectPersistence=ms,this._completeRedirectFn=zu,this._overrideRedirectResult=Hu}_initialize(h){var f=this;return(0,g.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,v,T){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(h,f,v,T)})()}_openRedirect(h,f,v,T){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(h,f,v,T)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return pg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const f=yield function gg(){return sc.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function za(m){return m.unwrap()}function sD(m){return Sy(m)}function Sy(m){const{_tokenResponse:h}=m instanceof O.ZR?m.customData:m;if(!h)return null;if(!(m instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return _s.credentialFromResult(m);const f=h.providerId;if(!f||f===De.PASSWORD)return null;let v;switch(f){case De.GOOGLE:v=fu;break;case De.FACEBOOK:v=Fc;break;case De.GITHUB:v=Kh;break;case De.TWITTER:v=gu;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:B,pendingToken:Z,nonce:Ae}=h;return M||B||T||Z?Z?f.startsWith("saml.")?Ns._create(f,Z):cs._fromParams({providerId:f,signInMethod:f,pendingToken:Z,idToken:T,accessToken:M}):new Xs(f).credential({idToken:T,accessToken:M,rawNonce:Ae}):null}return m instanceof O.ZR?v.credentialFromError(m):v.credentialFromResult(m)}function ji(m,h){return h.catch(f=>{throw f instanceof O.ZR&&function oD(m,h){var f;const v=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Ay(m,function Mu(m,h){var f;const v=(0,O.m9)(m),T=h;return re(h.customData.operationType,v,"argument-error"),re(null===(f=T.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),ro._fromError(v,T)}(m,h));else if(v){const T=Sy(h),M=h;T&&(M.credential=T,M.tenantId=v.tenantId||void 0,M.email=v.email||void 0,M.phoneNumber=v.phoneNumber||void 0)}}(m,f),f}).then(f=>{const T=f.user;return{operationType:f.operationType,credential:sD(f),additionalUserInfo:$c(f),user:wo.getOrCreate(T)}})}function yg(m,h){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,g.Z)(function*(m,h){const f=yield h;return{verificationId:f.verificationId,confirm:v=>ji(m,f.confirm(v))}})).apply(this,arguments)}class Ay{constructor(h,f){this.resolver=f,this.auth=function g0(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ji(za(this.auth),this.resolver.resolveSignIn(h))}}class wo{constructor(h){this._delegate=h,this.multiFactor=function vd(m){const h=(0,O.m9)(m);return ks.has(h)||ks.set(h,oo._fromUser(h)),ks.get(h)}(h)}static getOrCreate(h){return wo.USER_MAP.has(h)||wo.USER_MAP.set(h,new wo(h)),wo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,g.Z)(function*(){return ji(f.auth,ld(f._delegate,h))})()}linkWithPhoneNumber(h,f){var v=this;return(0,g.Z)(function*(){return yg(v.auth,function Bu(m,h,f){return Uu.apply(this,arguments)}(v._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,g.Z)(function*(){return ji(f.auth,function oi(m,h,f){return Mt.apply(this,arguments)}(f._delegate,h,zr))})()}linkWithRedirect(h){var f=this;return(0,g.Z)(function*(){return yield Af(ln(f.auth)),hf(f._delegate,h,zr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,g.Z)(function*(){return ji(f.auth,dd(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return yg(this.auth,function uf(m,h,f){return Xc.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return ji(this.auth,function Yo(m,h,f){return ge.apply(this,arguments)}(this._delegate,h,zr))}reauthenticateWithRedirect(h){var f=this;return(0,g.Z)(function*(){return yield Af(ln(f.auth)),Sd(f._delegate,h,zr)})()}sendEmailVerification(h){return function bu(m,h){return xa.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,g.Z)(function*(){return yield function ud(m,h){return xr.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function Dr(m,h){return Cn((0,O.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function ps(m,h){return Cn((0,O.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Wn(m,h){return Ii.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Yh(m,h){return Tu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function Uc(m,h,f){return Ma.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wo.USER_MAP=new WeakMap;class na{constructor(){this.providerId="phone",this._delegate=new _s(za(Y.Z.auth()))}static credential(h,f){return _s.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}na.PHONE_SIGN_IN_METHOD=_s.PHONE_SIGN_IN_METHOD,na.PROVIDER_ID=_s.PROVIDER_ID},5861:(Et,Pe,F)=>{function g(O,ce,oe,le,we,Ee,De){try{var z=O[Ee](De),$=z.value}catch(K){return void oe(K)}z.done?ce($):Promise.resolve($).then(le,we)}function Y(O){return function(){var ce=this,oe=arguments;return new Promise(function(le,we){var Ee=O.apply(ce,oe);function De($){g(Ee,le,we,De,z,"next",$)}function z($){g(Ee,le,we,De,z,"throw",$)}De(void 0)})}}F.d(Pe,{Z:()=>Y})},7582:(Et,Pe,F)=>{function ce(ee,Q){var ne={};for(var se in ee)Object.prototype.hasOwnProperty.call(ee,se)&&Q.indexOf(se)<0&&(ne[se]=ee[se]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(se=Object.getOwnPropertySymbols(ee);Te<se.length;Te++)Q.indexOf(se[Te])<0&&Object.prototype.propertyIsEnumerable.call(ee,se[Te])&&(ne[se[Te]]=ee[se[Te]])}return ne}function K(ee,Q,ne,se){return new(ne||(ne=Promise))(function(ye,ct){function Nt(cn){try{Tt(se.next(cn))}catch(yn){ct(yn)}}function rn(cn){try{Tt(se.throw(cn))}catch(yn){ct(yn)}}function Tt(cn){cn.done?ye(cn.value):function Te(ye){return ye instanceof ne?ye:new ne(function(ct){ct(ye)})}(cn.value).then(Nt,rn)}Tt((se=se.apply(ee,Q||[])).next())})}function xe(ee){return this instanceof xe?(this.v=ee,this):new xe(ee)}function ve(ee,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,se=ne.apply(ee,Q||[]),ye=[];return Te=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Nt("next"),Nt("throw"),Nt("return",function ct(Ht){return function(Fn){return Promise.resolve(Fn).then(Ht,yn)}}),Te[Symbol.asyncIterator]=function(){return this},Te;function Nt(Ht,Fn){se[Ht]&&(Te[Ht]=function(jn){return new Promise(function(wn,it){ye.push([Ht,jn,wn,it])>1||rn(Ht,jn)})},Fn&&(Te[Ht]=Fn(Te[Ht])))}function rn(Ht,Fn){try{!function Tt(Ht){Ht.value instanceof xe?Promise.resolve(Ht.value.v).then(cn,yn):Fr(ye[0][2],Ht)}(se[Ht](Fn))}catch(jn){Fr(ye[0][3],jn)}}function cn(Ht){rn("next",Ht)}function yn(Ht){rn("throw",Ht)}function Fr(Ht,Fn){Ht(Fn),ye.shift(),ye.length&&rn(ye[0][0],ye[0][1])}}function Ge(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=ee[Symbol.asyncIterator];return Q?Q.call(ee):(ee=function Ke(ee){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&ee[Q],se=0;if(ne)return ne.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&se>=ee.length&&(ee=void 0),{value:ee&&ee[se++],done:!ee}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),ne={},se("next"),se("throw"),se("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function se(ye){ne[ye]=ee[ye]&&function(ct){return new Promise(function(Nt,rn){!function Te(ye,ct,Nt,rn){Promise.resolve(rn).then(function(Tt){ye({value:Tt,done:Nt})},ct)}(Nt,rn,(ct=ee[ye](ct)).done,ct.value)})}}}F.d(Pe,{FC:()=>ve,KL:()=>Ge,_T:()=>ce,mG:()=>K,qq:()=>xe}),"function"==typeof SuppressedError&&SuppressedError}},Et=>{Et(Et.s=477)}]);